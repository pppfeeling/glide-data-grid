{"version":3,"file":"image-window-loader.js","names":["CellSet","throttle","packColRowToNumber","unpackNumberToColRow","WindowingTrackerBase","imgPool","ImageWindowLoaderImpl","constructor","arguments","imageLoaded","undefined","loadedLocations","cache","sendLoaded","clearOutOfWindow","keys","Object","key","obj","keep","j","cells","length","packed","isInWindow","filter","cancel","setCallback","loadImage","url","col","row","_imgPool$pop","loaded","img","pop","Image","canceled","result","unshift","src","loadPromise","Promise","r","addEventListener","requestAnimationFrame","decode","toWrite","push","loadOrGetImage","current","includes"],"sources":["../../../src/common/image-window-loader.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}