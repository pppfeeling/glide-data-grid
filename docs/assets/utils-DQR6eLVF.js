var K=Object.defineProperty;var L=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var A=(e,t,n)=>L(e,typeof t!="symbol"?t+"":t,n);import{r as i}from"./iframe-CI-U1wEL.js";import{W as U,X as j,i as S,G as s,a as p}from"./image-window-loader-DSpFIgLX.js";import{y as u}from"./index-D_kXk1yT.js";import{s as I}from"./marked.esm-BmZ9459z.js";import{n as z}from"./throttle-CrC0zd7y.js";import{n as q}from"./flatten-Cjd8EGAb.js";import{t as W,d as X}from"./throttle--dN168Gr.js";const Y=(e,t,n,r)=>{switch(t){case"debounce":return X(e,n,r);case"throttle":return W(e,n,r);default:return e}},J=e=>{const t=i.useRef(e);return i.useEffect(()=>{t.current=e}),i.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])},Q=e=>{const[t,n]=i.useState((e==null?void 0:e.current)||null);return e&&setTimeout(()=>{e.current!==t&&n(e.current)},0),{refProxy:i.useMemo(()=>new Proxy(o=>{o!==t&&n(o)},{get(o,a){return a==="current"?t:o[a]},set(o,a,m){return a==="current"?n(m):o[a]=m,!0}}),[t]),refElement:t,setRefElement:n}},Z=(e,t)=>{var n,r;const o=(n=e.borderBoxSize)===null||n===void 0?void 0:n[0],a=(r=e.contentBoxSize)===null||r===void 0?void 0:r[0];return t==="border-box"&&o?{width:o.inlineSize,height:o.blockSize}:t==="content-box"&&a?{width:a.inlineSize,height:a.blockSize}:{width:e.contentRect.width,height:e.contentRect.height}};function _({skipOnMount:e=!1,refreshMode:t,refreshRate:n=1e3,refreshOptions:r,handleWidth:o=!0,handleHeight:a=!0,targetRef:m,observerOptions:w,onResize:C,disableRerender:c=!1}={}){const f=i.useRef(e),l=J(C),[h,g]=i.useState({width:void 0,height:void 0}),d=i.useRef({width:void 0,height:void 0}),{refProxy:k,refElement:v}=Q(m),{box:D}=w||{},H=i.useCallback(M=>{if(!o&&!a)return;if(f.current){f.current=!1;return}const x=(b,y)=>o&&b.width!==y.width||a&&b.height!==y.height;M.forEach(b=>{const y=Z(b,D);c?x(d.current,y)&&(d.current.width=y.width,d.current.height=y.height,l==null||l({width:y.width,height:y.height,entry:b})):g(B=>x(B,y)?(l==null||l({width:y.width,height:y.height,entry:b}),y):B)})},[o,a,f,D,c]),N=i.useCallback(Y(H,t,n,r),[H,t,n,r]);return i.useEffect(()=>{let M;if(v)try{M=new window.ResizeObserver(N),M.observe(v,w)}catch(x){console.warn("ResizeObserver not supported or failed to initialize:",x)}else(h.width||h.height)&&(l==null||l({width:null,height:null,entry:null}),d.current.width=void 0,d.current.height=void 0,c||g({width:void 0,height:void 0}));return()=>{var x,b,y;(x=M==null?void 0:M.disconnect)===null||x===void 0||x.call(M),(y=(b=N).cancel)===null||y===void 0||y.call(b)}},[N,v]),Object.assign({ref:k},c?d.current:h)}u.seed(1337);function ee(e){return!!e}function R(e,t){var r;const n=e.data;if(typeof n==typeof t.data)return{...t,data:n};switch(t.kind){case s.Uri:return z(n)?{...t,data:n[0]}:{...t,data:(n==null?void 0:n.toString())??""};case s.Boolean:return z(n)?{...t,data:n[0]!==void 0}:e.kind===s.Boolean?{...t,data:e.data}:{...t,data:!!ee(n)};case s.Image:return z(n)?{...t,data:[n[0]]}:{...t,data:[(n==null?void 0:n.toString())??""]};case s.Number:return{...t,data:0};case s.Text:case s.Markdown:return z(n)?{...t,data:n[0].toString()??""}:{...t,data:((r=e.data)==null?void 0:r.toString())??""};case s.Custom:return t}}function E(e){const{getContent:t,...n}=e;return n}const ue=I("div")({name:"ColumnAddButton",class:"c4uqbye",propsAsIs:!1}),G=I("div")({name:"BeautifulStyle",class:"b1bsqg7n",propsAsIs:!1}),ce=I("span")({name:"PropName",class:"piiq54i",propsAsIs:!1}),fe=I("p")({name:"Description",class:"d1k3yj19",propsAsIs:!1}),he=I("p")({name:"MoreInfo",class:"m1j0dy02",propsAsIs:!1}),me=e=>{const{title:t,children:n,description:r,className:o,scale:a}=e,{ref:m,width:w,height:C}=_();return i.createElement(G,{className:o+(U.value?" firefox":"")},i.createElement("h1",null,t),r,i.createElement("div",{style:{scale:a},className:"sizer"},i.createElement("div",{className:"sizer-clip",ref:m},i.createElement("div",{style:{position:"relative",width:w??100,height:C??100}},n))))},we=e=>{const{title:t,children:n,description:r,className:o,scale:a}=e,{ref:m,width:w,height:C}=_();return i.createElement(G,{className:o+(U.value?" firefox":"")},i.createElement("h1",null,t),r,i.createElement("div",{style:{scale:a},className:"sizer"},i.createElement("div",{className:"sizer-clip",ref:m},i.createElement("div",{style:{position:"relative",width:w??100,height:e.height??100}},n))))};function te(e,t){return{title:`Column ${e}`,id:`Column ${e}`,group:t?`Group ${Math.round(e/3)}`:void 0,icon:p.HeaderString,hasMenu:!1,getContent:()=>{const n=u.lorem.word();return{kind:s.Text,data:n,displayData:n,allowOverlay:!0,readonly:!0}}}}function P(e,t){const n=[{title:"First name",id:"First name",group:t?"Name":void 0,icon:p.HeaderString,hasMenu:!1,getContent:()=>{const a=u.name.firstName();return{kind:s.Text,displayData:a,data:a,allowOverlay:!0,readonly:!1}}},{title:"Last name",id:"Last name",group:t?"Name":void 0,icon:p.HeaderString,hasMenu:!1,getContent:()=>{const a=u.name.lastName();return{kind:s.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"Avatar",id:"Avatar",group:t?"Info":void 0,icon:p.HeaderImage,hasMenu:!1,getContent:()=>{const a=Math.round(Math.random()*100);return{kind:s.Image,data:[`https://picsum.photos/id/${a}/900/900`],displayData:[`https://picsum.photos/id/${a}/40/40`],allowOverlay:!0,readonly:!0}}},{title:"Email",id:"Email",group:t?"Info":void 0,icon:p.HeaderString,hasMenu:!1,getContent:()=>{const a=u.internet.email();return{kind:s.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"Title",id:"Title",group:t?"Info":void 0,icon:p.HeaderString,hasMenu:!1,getContent:()=>{const a=u.name.jobTitle();return{kind:s.Text,displayData:a,data:a,allowOverlay:!0,readonly:!0}}},{title:"More Info",id:"More Info",group:t?"Info":void 0,icon:p.HeaderUri,hasMenu:!1,getContent:()=>{const a=u.internet.url();return{kind:s.Uri,displayData:a,data:a,hoverEffect:!0,allowOverlay:!0,readonly:!0,onClickUri:m=>{window.open(a,"_blank"),m.preventDefault()}}}}];if(e<n.length)return n.slice(0,e);const r=e-n.length,o=[...new Array(r)].map((a,m)=>te(m+n.length,t));return[...n,...o]}class T{constructor(){A(this,"cachedContent",new Map)}get(t,n){const r=this.cachedContent.get(t);if(r!==void 0)return r[n]}set(t,n,r){let o=this.cachedContent.get(t);o===void 0&&this.cachedContent.set(t,o=[]),o[n]=r}}function pe(e,t=!0,n=!1){const r=i.useRef(new T),[o,a]=i.useState(()=>P(e,n));i.useEffect(()=>{a(P(e,n))},[n,e]);const m=i.useCallback((h,g)=>{a(d=>{const k=d.findIndex(D=>D.title===h.title),v=[...d];return v.splice(k,1,{...d[k],width:g}),v})},[]),w=i.useMemo(()=>o.map(E),[o]),C=i.useRef(o);C.current=o;const c=i.useCallback(([h,g])=>{let d=r.current.get(h,g);return d===void 0&&(d=C.current[h].getContent(),!t&&j(d)&&(d={...d,readonly:t}),r.current.set(h,g,d)),d},[t]),f=i.useCallback(([h,g],d)=>{r.current.set(h,g,d)},[]),l=i.useCallback(([h,g],d)=>{let k=r.current.get(h,g);if(k===void 0&&(k=o[h].getContent()),S(d)&&S(k)){const v=R(d,k);r.current.set(h,g,{...v,displayData:typeof v.data=="string"?v.data:v.displayData,lastUpdated:performance.now()})}},[o]);return{cols:w,getCellContent:c,onColumnResize:m,setCellValue:l,setCellValueRaw:f}}const ge=I("kbd")({name:"KeyName",class:"kcvwzr4",propsAsIs:!1}),Ce={smoothScrollX:!0,smoothScrollY:!0,getCellsForSelection:!0,width:"100%"};function ye(e){switch(e.kind){case s.Boolean:return{...e,data:!1};case s.Image:return{...e,data:[],displayData:[]};case s.Drilldown:case s.Bubble:return{...e,data:[]};case s.Uri:case s.Markdown:return{...e,data:""};case s.Text:return{...e,data:"",displayData:""};case s.Number:return{...e,data:0,displayData:""}}return e}function V(){return[{title:"Row ID",width:120,icon:p.HeaderRowID,hasMenu:!1,getContent:()=>({kind:s.RowID,data:u.datatype.uuid(),allowOverlay:!0})},{title:"Protected",width:120,icon:p.HeaderCode,hasMenu:!1,getContent:()=>({kind:s.Protected,data:u.finance.bitcoinAddress(),allowOverlay:!1})},{title:"Loading",width:120,icon:p.HeaderString,hasMenu:!1,getContent:()=>({kind:s.Loading,allowOverlay:!1,skeletonWidth:70,skeletonWidthVariability:25})},{title:"Text",width:120,icon:p.HeaderCode,hasMenu:!1,getContent:()=>{const e=u.name.firstName();return{kind:s.Text,data:e,displayData:e,allowOverlay:!0,hoverEffect:!0,themeOverride:{cellVerticalPadding:8,cellHorizontalPadding:8},hoverEffectTheme:{bgColor:"#f4f4f4",fullSize:!0}}}},{title:"Number",width:120,icon:p.HeaderNumber,hasMenu:!1,getContent:()=>{const e=u.datatype.number(100);return{kind:s.Number,data:e,displayData:`${e}`,allowOverlay:!0,hoverEffect:!0,themeOverride:{cellVerticalPadding:8,cellHorizontalPadding:8},hoverEffectTheme:{bgColor:"#f4f4f4",fullSize:!0}}}},{title:"Boolean",width:120,icon:p.HeaderBoolean,hasMenu:!1,getContent:()=>{const e=Math.random(),t=e<.1?void 0:e<.2?null:e<.6;return{kind:s.Boolean,data:t,allowOverlay:!1,readonly:!1}}},{title:"Image",width:120,icon:p.HeaderImage,hasMenu:!1,getContent:()=>({kind:s.Image,data:[`${u.image.animals(40,40)}?random=${u.datatype.number(1e5)}`],allowOverlay:!0,readonly:!0})},{title:"Uri",width:120,icon:p.HeaderUri,hasMenu:!1,getContent:()=>{const e=u.internet.url();return{kind:s.Uri,data:e,allowOverlay:!0,hoverEffect:!0,onClickUri:()=>{window.open(e,"_blank")}}}},{title:"Markdown",width:120,icon:p.HeaderMarkdown,hasMenu:!1,getContent:()=>{const e=`# Title
Hello my name is *${u.name.firstName()}*

## TODO:
Try out [Glide](https://www.glideapps.com/)
`;return{kind:s.Markdown,data:e,allowOverlay:!0}}},{title:"Bubble",width:120,icon:p.HeaderArray,hasMenu:!1,getContent:()=>({kind:s.Bubble,data:[u.lorem.word(),u.lorem.word(),u.lorem.word(),u.lorem.words(2),u.lorem.words(2),u.lorem.words(2)],allowOverlay:!0})},{title:"Drilldown",width:120,icon:p.HeaderArray,hasMenu:!1,getContent:()=>({kind:s.Drilldown,data:[{text:u.address.cityName(),img:`${u.image.nature(40,40)}?random=${u.datatype.number(1e5)}`},{text:u.address.cityName(),img:`${u.image.nature(40,40)}?random=${u.datatype.number(1e5)}`}],allowOverlay:!0})}]}function ve(){const e=i.useRef(new T),[t,n]=i.useState(V),r=i.useCallback((c,f)=>{n(l=>{const h=l.findIndex(d=>d.title===c.title),g=[...l];return g.splice(h,1,{...l[h],width:f}),g})},[]),o=i.useMemo(()=>t.map(E),[t]),[a,m]=i.useState(0),w=i.useCallback(([c,f])=>{q(a);let l=e.current.get(c,f);return l===void 0&&(l=t[c].getContent(),e.current.set(c,f,l)),l},[t,a]),C=i.useCallback(([c,f],l,h,g)=>{var k;let d=e.current.get(c,f);if(d===void 0&&(d=t[c].getContent()),S(l)&&S(d)){const v=R(l,d);e.current.set(c,f,{...v,displayData:h===!0?void 0:((k=v.data)==null?void 0:k.toString())??""}),g===!0&&m(D=>D+1)}},[t]);return{cols:o,getCellContent:w,onColumnResize:r,setCellValue:C}}const F=1e3;let O;function $(){if(O===void 0){const e=V(),t=new T;for(let n=0;n<F;n++)for(let r=0;r<e.length;r++)t.set(r,n,e[r].getContent());O={cols:e,data:t}}return O}function ke(){const e=i.useRef($().data),t=i.useRef($().cols),[n,r]=i.useState(()=>t.current.map(E)),o=i.useCallback((w,C)=>{const c=[...t.current],f=c.findIndex(l=>l.title===w.title);f!==-1&&(c.splice(f,1,{...c[f],width:C}),t.current=c,r(c.map(E)))},[]),a=i.useCallback(([w,C])=>e.current.get(w,C)??{kind:s.Loading,allowOverlay:!1},[]),m=i.useCallback(([w,C],c)=>{let f=e.current.get(w,C);if(f===void 0&&(f=t.current[w].getContent()),S(c)&&S(f)){const l=R(c,f);e.current.set(w,C,{...l,displayData:typeof l.data=="string"?l.data:l.displayData,lastUpdated:performance.now()})}},[]);return{cols:n,getCellContent:a,onColumnResize:o,setCellValue:m,rows:F,data:e}}export{me as B,ue as C,fe as D,ge as K,he as M,ce as P,ve as a,ke as b,we as c,Ce as d,ye as e,G as f,pe as u};
