const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./number-overlay-editor-DYN3leDJ.js","./iframe-DfFb5Ign.js","./preload-helper-C1FmrZbK.js","./marked.esm-CIUALPyN.js","./react-number-format.es-p7Wc_rWC.js","./index-KG-dsUoR.js","./throttle-ByAiyUNP.js","./flatten-By6_WT6j.js"])))=>i.map(i=>d[i]);
var Sa=Object.defineProperty;var Ma=(e,t,n)=>t in e?Sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xe=(e,t,n)=>Ma(e,typeof t!="symbol"?t+"":t,n);import{r as s,R as Rt}from"./iframe-DfFb5Ign.js";import{_ as jl}from"./preload-helper-C1FmrZbK.js";import{r as Zl}from"./index-KG-dsUoR.js";import{h as Ra,g as Jl,j as Ea,k as Ia,v as Ha,l as Da,m as hn,r as mo,t as Fa}from"./throttle-ByAiyUNP.js";import{u as Ta,f as vl}from"./flatten-By6_WT6j.js";import{s as Yt,a as Aa}from"./marked.esm-CIUALPyN.js";function Ql(e="This should not happen"){throw new Error(e)}function sn(e,t="Assertion failed"){if(!e)return Ql(t)}function dr(e,t){return Ql(t??"Hell froze over")}function Pa(e,t){try{return e()}catch{return t}}const xl=Object.prototype.hasOwnProperty;function Ko(e,t){let n,o;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((o=e.length)===t.length)for(;o--&&Ko(e[o],t[o]););return o===-1}if(!n||typeof e=="object"){o=0;for(n in e)if(xl.call(e,n)&&++o&&!xl.call(t,n)||!(n in t)||!Ko(e[n],t[n]))return!1;return Object.keys(t).length===o}}return e!==e&&t!==t}const Yr=null,Bi=void 0;var te;(function(e){e.Uri="uri",e.Text="text",e.Image="image",e.RowID="row-id",e.Number="number",e.Bubble="bubble",e.Boolean="boolean",e.Loading="loading",e.Markdown="markdown",e.Drilldown="drilldown",e.Protected="protected",e.Custom="custom"})(te||(te={}));var Sl;(function(e){e.HeaderRowID="headerRowID",e.HeaderCode="headerCode",e.HeaderNumber="headerNumber",e.HeaderString="headerString",e.HeaderBoolean="headerBoolean",e.HeaderAudioUri="headerAudioUri",e.HeaderVideoUri="headerVideoUri",e.HeaderEmoji="headerEmoji",e.HeaderImage="headerImage",e.HeaderUri="headerUri",e.HeaderPhone="headerPhone",e.HeaderMarkdown="headerMarkdown",e.HeaderDate="headerDate",e.HeaderTime="headerTime",e.HeaderEmail="headerEmail",e.HeaderReference="headerReference",e.HeaderIfThenElse="headerIfThenElse",e.HeaderSingleValue="headerSingleValue",e.HeaderLookup="headerLookup",e.HeaderTextTemplate="headerTextTemplate",e.HeaderMath="headerMath",e.HeaderRollup="headerRollup",e.HeaderJoinStrings="headerJoinStrings",e.HeaderSplitString="headerSplitString",e.HeaderGeoDistance="headerGeoDistance",e.HeaderArray="headerArray",e.RowOwnerOverlay="rowOwnerOverlay",e.ProtectedColumnOverlay="protectedColumnOverlay",e.HeaderArrowDown="headerArrowDown",e.HeaderArrowUp="headerArrowUp"})(Sl||(Sl={}));var _r;(function(e){e.Triangle="triangle",e.Dots="dots"})(_r||(_r={}));function Nr(e){return"width"in e&&typeof e.width=="number"}async function Ml(e){return typeof e=="object"?e:await e()}function Wn(e){return!(e.kind===te.Loading||e.kind===te.Bubble||e.kind===te.RowID||e.kind===te.Protected||e.kind===te.Drilldown)}function Pf(e){return!(e.kind===te.Loading||e.kind===te.Bubble||e.kind===te.RowID||e.kind===te.Protected||e.kind===te.Drilldown||e.kind===te.Boolean||e.kind===te.Image||e.kind===te.Custom)}function wo(e){return e.kind===zt.Marker||e.kind===zt.NewRow||e.kind===zt.RowStatus}function to(e){if(!Wn(e)||e.kind===te.Image)return!1;switch(e.kind){case te.Text:case te.Number:case te.Markdown:case te.Uri:case te.Custom:case te.Boolean:return e.readonly!==!0;default:dr(e,"A cell was passed with an invalid kind")}}function es(e){return Ra(e,"editor")}function Wi(e){return!(e.readonly??!1)}var zt;(function(e){e.NewRow="new-row",e.Marker="marker",e.RowStatus="row-status",e.RowId="row-id"})(zt||(zt={}));const Vr={shape:"square",size:4,offsetX:-2,offsetY:-2,outline:0};function ki(e){if(e.length===0)return[];const t=[...e],n=[];t.sort(function(o,r){return o[0]-r[0]}),n.push([...t[0]]);for(const o of t.slice(1)){const r=n[n.length-1];r[1]<o[0]?n.push([...o]):r[1]<o[1]&&(r[1]=o[1])}return n}let Rl;const Jt=class Jt{constructor(t){Xe(this,"items");this.items=t}offset(t){if(t===0)return this;const n=this.items.map(o=>[o[0]+t,o[1]+t]);return new Jt(n)}add(t){const n=typeof t=="number"?[t,t+1]:t,o=ki([...this.items,n]);return new Jt(o)}remove(t){const n=[...this.items],o=typeof t=="number"?t:t[0],r=typeof t=="number"?t+1:t[1];for(const[i,a]of n.entries()){const[l,c]=a;if(l<=r&&o<=c){const u=[];l<o&&u.push([l,o]),r<c&&u.push([r,c]),n.splice(i,1,...u)}}return new Jt(n)}first(){if(this.items.length!==0)return this.items[0][0]}last(){if(this.items.length!==0)return this.items.slice(-1)[0][1]-1}hasIndex(t){for(let n=0;n<this.items.length;n++){const[o,r]=this.items[n];if(t>=o&&t<r)return!0}return!1}hasAll(t){for(let n=t[0];n<t[1];n++)if(!this.hasIndex(n))return!1;return!0}some(t){for(const n of this)if(t(n))return!0;return!1}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(let n=0;n<this.items.length;n++){const o=t.items[n],r=this.items[n];if(o[0]!==r[0]||o[1]!==r[1])return!1}return!0}toArray(){const t=[];for(const[n,o]of this.items)for(let r=n;r<o;r++)t.push(r);return t}get length(){let t=0;for(const[n,o]of this.items)t+=o-n;return t}*[Symbol.iterator](){for(const[t,n]of this.items)for(let o=t;o<n;o++)yield o}};Xe(Jt,"create",t=>new Jt(ki(t))),Xe(Jt,"empty",()=>Rl??(Rl=new Jt([]))),Xe(Jt,"fromSingleSelection",t=>Jt.empty().add(t)),Xe(Jt,"fromArray",t=>{if(t.length===0)return Jt.empty();const n=t.map(r=>[r,r+1]),o=ki(n);return new Jt(o)});let ot=Jt;const za=Yt("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});function Kt(e,t,n,o,r=!1){const i=s.useRef();i.current=t,s.useEffect(()=>{if(n===null||n.addEventListener===void 0)return;const a=n,l=c=>{var u;(u=i.current)==null||u.call(a,c)};return a.addEventListener(e,l,{passive:o,capture:r}),()=>{a.removeEventListener(e,l,{capture:r})}},[e,n,o,r])}function Jn(e,t){return e===void 0?void 0:t}const La=Math.PI;function El(e){return e*La/180}const ts=(e,t,n)=>({x1:e-n/2,y1:t-n/2,x2:e+n/2,y2:t+n/2}),ns=(e,t,n,o,r)=>{switch(e){case"left":return Math.floor(t)+o+r/2;case"center":return Math.floor(t+n/2);case"right":return Math.floor(t+n)-o-r/2}},os=(e,t,n)=>Math.min(e,t-n*2),rs=(e,t,n)=>n.x1<=e&&e<=n.x2&&n.y1<=t&&t<=n.y2,Oi=e=>{const t=e.fgColor??"currentColor";return s.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),s.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},Ba=e=>{const t=e.fgColor??"currentColor";return s.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function Wa(e,t,n){const[o,r]=s.useState(e),i=s.useRef(!0);s.useEffect(()=>()=>{i.current=!1},[]);const a=s.useRef(Jl(l=>{i.current&&r(l)},n));return s.useLayoutEffect(()=>{i.current&&a.current(()=>e())},t),o}const Oa="֑-߿יִ-﷽ﹰ-ﻼ",Na="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",$a=new RegExp("^[^"+Na+"]*["+Oa+"]");function Ni(e){return $a.test(e)?"rtl":"not-rtl"}let $r;function Di(){if(typeof document>"u")return 0;if($r!==void 0)return $r;const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);const n=e.offsetWidth;t.style.overflow="scroll";let o=e.offsetWidth;return n===o&&(o=t.clientWidth),t.remove(),$r=n-o,$r}const go=Symbol();function Ga(e){const t=s.useRef([go,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;const[n,o]=s.useState(e),[,r]=s.useState(),i=s.useCallback(l=>{const c=t.current[0];c!==go&&(l=typeof l=="function"?l(c):l,l===c)||(c!==go&&r({}),o(u=>typeof l=="function"?l(c===go?u:c):l),t.current[0]=go)},[]),a=s.useCallback(()=>{t.current[0]=go,r({})},[]);return[t.current[0]===go?n:t.current[0],i,a]}function is(e){if(e.length===0)return"";let t=0,n=0;for(const o of e){if(n+=o.length,n>1e4)break;t++}return e.slice(0,t).join(", ")}function Xa(e){const t=s.useRef(e);return Ko(e,t.current)||(t.current=e),t.current}const Ka=e=>{const{urls:t,canWrite:n,onEditClick:o,renderImage:r}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;const a=i.length>1;return s.createElement(za,{"data-testid":"GDG-default-image-overlay-editor"},s.createElement(Ea.Carousel,{showArrows:a,showThumbs:!1,swipeable:a,emulateTouch:a,infiniteLoop:a},i.map(l=>{const c=(r==null?void 0:r(l))??s.createElement("img",{draggable:!1,src:l});return s.createElement("div",{className:"gdg-centering-container",key:l},c)})),n&&o&&s.createElement("button",{className:"gdg-edit-icon",onClick:o},s.createElement(Oi,null)))},Ya=Yt("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});class _a extends Rt.PureComponent{constructor(){super(...arguments);Xe(this,"targetElement",null);Xe(this,"containerRefHook",n=>{this.targetElement=n,this.renderMarkdownIntoDiv()})}renderMarkdownIntoDiv(){const{targetElement:n,props:o}=this;if(n===null)return;const{contents:r,createNode:i}=o,a=Aa(r),l=document.createRange();l.selectNodeContents(n),l.deleteContents();let c=i==null?void 0:i(a);if(c===void 0){const d=document.createElement("template");d.innerHTML=a,c=d.content}n.append(c);const u=n.getElementsByTagName("a");for(const d of u)d.target="_blank",d.rel="noreferrer noopener"}render(){return this.renderMarkdownIntoDiv(),Rt.createElement(Ya,{ref:this.containerRefHook})}}const Va=Yt("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),Ua=Yt("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),qa=Yt("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});class ls extends s.PureComponent{constructor(){super(...arguments);Xe(this,"wrapperRef",s.createRef());Xe(this,"clickOutside",n=>{if(!(this.props.isOutsideClick&&!this.props.isOutsideClick(n))&&this.wrapperRef.current!==null&&!this.wrapperRef.current.contains(n.target)){let o=n.target;for(;o!==null;){if(o.classList.contains("click-outside-ignore"))return;o=o.parentElement}this.props.onClickOutside()}})}componentDidMount(){const n=this.props.customEventTarget??document;n.addEventListener("pointerdown",this.clickOutside,!0),n.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){const n=this.props.customEventTarget??document;n.removeEventListener("pointerdown",this.clickOutside,!0),n.removeEventListener("contextmenu",this.clickOutside,!0)}render(){const{onClickOutside:n,isOutsideClick:o,customEventTarget:r,...i}=this.props;return s.createElement("div",{...i,ref:this.wrapperRef},this.props.children)}}const vi={};let qn=null;function ja(){const e=document.createElement("div");return e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",document.body.append(e),e}function Yo(e){const t=e.toLowerCase().trim();if(vi[t]!==void 0)return vi[t];qn=qn||ja(),qn.style.color="#000",qn.style.color=t;const n=getComputedStyle(qn).color;qn.style.color="#fff",qn.style.color=t;const o=getComputedStyle(qn).color;if(o!==n)return[0,0,0,1];let r=o.replace(/[^\d.,]/g,"").split(",").map(Number.parseFloat);return r.length<4&&r.push(1),r=r.map(i=>Number.isNaN(i)?0:i),vi[t]=r,r}function no(e,t){const[n,o,r]=Yo(e);return`rgba(${n}, ${o}, ${r}, ${t})`}const Il=new Map;function Hl(e,t){const n=`${e}-${t}`,o=Il.get(n);if(o!==void 0)return o;const r=an(e,t);return Il.set(n,r),r}function an(e,t){if(t===void 0)return e;const[n,o,r,i]=Yo(e);if(i===1)return e;const[a,l,c,u]=Yo(t),d=i+u*(1-i),g=(i*n+u*a*(1-i))/d,h=(i*o+u*l*(1-i))/d,m=(i*r+u*c*(1-i))/d;return`rgba(${g}, ${h}, ${m}, ${d})`}function zf(e,t,n){if(n<=0)return e;if(n>=1)return t;const[o,r,i,a]=Yo(e),[l,c,u,d]=Yo(t),g=o*a,h=r*a,m=i*a,f=l*d,w=c*d,y=u*d,v=n,b=1-n,C=a*b+d*v;if(C===0)return"rgba(0, 0, 0, 0)";const I=Math.floor((g*b+f*v)/C),L=Math.floor((h*b+w*v)/C),x=Math.floor((m*b+y*v)/C);return`rgba(${I}, ${L}, ${x}, ${C})`}function Lf(e){if(e==="transparent")return 0;function t(i){const a=i/255;return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}const[n,o,r]=Yo(e);return .2126*t(n)+.7152*t(o)+.0722*t(r)}function ss(e){return{"--gdg-accent-color":e.accentColor,"--gdg-accent-fg":e.accentFg,"--gdg-accent-light":e.accentLight,"--gdg-text-dark":e.textDark,"--gdg-text-medium":e.textMedium,"--gdg-text-light":e.textLight,"--gdg-text-bubble":e.textBubble,"--gdg-bg-icon-header":e.bgIconHeader,"--gdg-fg-icon-header":e.fgIconHeader,"--gdg-text-header":e.textHeader,"--gdg-text-group-header":e.textGroupHeader??e.textHeader,"--gdg-bg-group-header":e.bgGroupHeader??e.bgHeader,"--gdg-bg-group-header-hovered":e.bgGroupHeaderHovered??e.bgHeaderHovered,"--gdg-text-header-selected":e.textHeaderSelected,"--gdg-bg-cell":e.bgCell,"--gdg-bg-cell-medium":e.bgCellMedium,"--gdg-bg-header":e.bgHeader,"--gdg-bg-header-has-focus":e.bgHeaderHasFocus,"--gdg-bg-header-hovered":e.bgHeaderHovered,"--gdg-bg-bubble":e.bgBubble,"--gdg-bg-bubble-selected":e.bgBubbleSelected,"--gdg-bubble-height":`${e.bubbleHeight}px`,"--gdg-bubble-padding":`${e.bubblePadding}px`,"--gdg-bubble-margin":`${e.bubbleMargin}px`,"--gdg-bg-search-result":e.bgSearchResult,"--gdg-border-color":e.borderColor,"--gdg-horizontal-border-color":e.horizontalBorderColor??e.borderColor,"--gdg-drilldown-border":e.drilldownBorder,"--gdg-link-color":e.linkColor,"--gdg-cell-horizontal-padding":`${e.cellHorizontalPadding}px`,"--gdg-cell-vertical-padding":`${e.cellVerticalPadding}px`,"--gdg-header-font-style":e.headerFontStyle,"--gdg-base-font-style":e.baseFontStyle,"--gdg-marker-font-style":e.markerFontStyle,"--gdg-font-family":e.fontFamily,"--gdg-editor-font-size":e.editorFontSize,"--gdg-checkbox-max-size":`${e.checkboxMaxSize}px`,...e.resizeIndicatorColor===void 0?{}:{"--gdg-resize-indicator-color":e.resizeIndicatorColor},...e.headerBottomBorderColor===void 0?{}:{"--gdg-header-bottom-border-color":e.headerBottomBorderColor},...e.roundingRadius===void 0?{}:{"--gdg-rounding-radius":`${e.roundingRadius}px`}}}const as={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bubbleHeight:20,bubblePadding:6,bubbleMargin:4,bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#353fb5",cellHorizontalPadding:8,cellVerticalPadding:3,headerIconSize:18,headerFontStyle:"600 13px",baseFontStyle:"13px",markerFontStyle:"9px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif",editorFontSize:"13px",lineHeight:1.4,checkboxMaxSize:18};function cs(){return as}const $i=Rt.createContext(as);function Bf(){return Rt.useContext($i)}function Dn(e,...t){const n={...e};for(const o of t)if(o!==void 0)for(const r in o)o.hasOwnProperty(r)&&(r==="bgCell"?n[r]=an(o[r],n[r]):n[r]=o[r]);return(n.headerFontFull===void 0||e.fontFamily!==n.fontFamily||e.headerFontStyle!==n.headerFontStyle)&&(n.headerFontFull=`${n.headerFontStyle} ${n.fontFamily}`),(n.baseFontFull===void 0||e.fontFamily!==n.fontFamily||e.baseFontStyle!==n.baseFontStyle)&&(n.baseFontFull=`${n.baseFontStyle} ${n.fontFamily}`),(n.markerFontFull===void 0||e.fontFamily!==n.fontFamily||e.markerFontStyle!==n.markerFontStyle)&&(n.markerFontFull=`${n.markerFontStyle} ${n.fontFamily}`),n}const Za=()=>e=>e.targetX,Ja=()=>e=>e.targetY,Qa=()=>e=>e.targetWidth,ec=()=>e=>e.targetHeight,tc=()=>e=>e.targetY+10,nc=()=>e=>Math.max(0,(e.targetHeight-28)/2),oc=Yt("div")({name:"DataGridOverlayEditorStyle",class:"gdg-d19meir1",propsAsIs:!1,vars:{"d19meir1-0":[Ja(),"px"],"d19meir1-1":[Za(),"px"],"d19meir1-2":[Qa(),"px"],"d19meir1-3":[ec(),"px"],"d19meir1-4":[tc(),"px"],"d19meir1-5":[nc(),"px"]}});function rc(){const[e,t]=s.useState();return[e??void 0,t]}function ic(){const[e,t]=rc(),[n,o]=s.useState(0),[r,i]=s.useState(!0);s.useLayoutEffect(()=>{if(e===void 0||!("IntersectionObserver"in window))return;const l=new IntersectionObserver(c=>{c.length!==0&&i(c[0].isIntersecting)},{threshold:1});return l.observe(e),()=>l.disconnect()},[e]),s.useEffect(()=>{if(r||e===void 0)return;let l;const c=()=>{const{right:u}=e.getBoundingClientRect();o(d=>Math.min(d+window.innerWidth-u-10,0)),l=requestAnimationFrame(c)};return l=requestAnimationFrame(c),()=>{l!==void 0&&cancelAnimationFrame(l)}},[e,r]);const a=s.useMemo(()=>({transform:`translateX(${n}px)`}),[n]);return{ref:t,style:a}}const Vo=s.createContext({isGhostMode:!1,ghostValue:""}),lc=e=>{const{target:t,content:n,onFinishEditing:o,forceEditMode:r,initialValue:i,imageEditorOverride:a,markdownDivCreateNode:l,highlight:c,className:u,theme:d,id:g,cell:h,bloom:m,portalElementRef:f,validateCell:w,getCellRenderer:y,provideEditor:v,isOutsideClick:b,customEventTarget:C,activation:I,ghostValue:L,isGhostMode:x}=e,[H,R]=s.useState(r?n:void 0),S=s.useRef(H??n);S.current=H??n;const[A,F]=s.useState(()=>w===void 0?!0:!(Wn(n)&&(w==null?void 0:w(h,n,S.current))===!1)),D=s.useCallback((W,ee)=>{o(A?W:void 0,ee)},[A,o]),E=s.useCallback(W=>{if(w!==void 0&&W!==void 0&&Wn(W)){const ee=w(h,W,S.current);ee===!1?F(!1):(typeof ee=="object"&&(W=ee),F(!0))}R(W)},[h,w]),k=s.useRef(!1),$=s.useRef(void 0),_=s.useCallback(()=>{D(H,[0,0]),k.current=!0},[H,D]),se=s.useCallback((W,ee)=>{console.log("[onEditorFinished] newValue:",W),console.log("[onEditorFinished] movement:",ee),console.log("[onEditorFinished] calling onFinishEditing"),D(W,ee??$.current??[0,0]),console.log("[onEditorFinished] onFinishEditing called"),k.current=!0},[D]),Z=s.useCallback(async W=>{if(W.nativeEvent.isComposing)return;let ee=!1;W.key==="Escape"?(W.stopPropagation(),W.preventDefault(),$.current=[0,0]):W.key==="Enter"&&!W.shiftKey?(W.stopPropagation(),W.preventDefault(),$.current=[0,1],ee=!0):W.key==="Tab"&&(W.stopPropagation(),W.preventDefault(),$.current=[W.shiftKey?-1:1,0],ee=!0),window.setTimeout(()=>{!k.current&&$.current!==void 0&&(D(ee?H:void 0,$.current),k.current=!0)},0)},[D,H]),j=H??n,[G,X]=s.useMemo(()=>{var we,qe;if(wo(n))return[];const W={...n,location:h,activation:I},ee=v==null?void 0:v(W);return ee!==void 0?[ee,!1]:[(qe=(we=y(n))==null?void 0:we.provideEditor)==null?void 0:qe.call(we,W),!1]},[h,n,y,v,I]),{ref:ne,style:de}=ic();let me=!0,le,re=!0,P;if(G!==void 0){me=G.disablePadding!==!0,re=G.disableStyling!==!0;const W=es(G);W&&(P=G.styleOverride);const ee=W?G.editor:G;le=s.createElement(ee,{portalElementRef:f,isHighlighted:c,activation:I,onChange:E,value:j,initialValue:i,onFinishedEditing:se,validatedSelection:Wn(j)?j.selectionRange:void 0,forceEditMode:r,target:t,imageEditorOverride:a,markdownDivCreateNode:l,isValid:A,theme:d})}P={...P,...de};const Y=(f==null?void 0:f.current)??document.getElementById("portal");if(Y===null)return console.error('Cannot open Data Grid overlay editor, because portal not found. Please, either provide a portalElementRef or add `<div id="portal" />` as the last child of your `<body>`.'),null;let K=re?"gdg-style":"gdg-unstyle";A||(K+=" gdg-invalid"),me&&(K+=" gdg-pad");const Q=(m==null?void 0:m[0])??1,Re=(m==null?void 0:m[1])??1,Te=s.useMemo(()=>({isGhostMode:x??!1,ghostValue:L??""}),[x,L]);return Zl.createPortal(s.createElement($i.Provider,{value:d},s.createElement(Vo.Provider,{value:Te},s.createElement(ls,{style:ss(d),className:u,onClickOutside:_,isOutsideClick:b,customEventTarget:C},s.createElement(oc,{ref:ne,id:g,className:K,style:x?{...P,visibility:"hidden"}:P,as:X===!0?"label":void 0,targetX:t.x-Q,targetY:t.y-Re,targetWidth:t.width+Q*2,targetHeight:t.height+Re*2},s.createElement("div",{className:"gdg-clip-region",onKeyDown:Z},le))))),Y)},sc=Object.freeze(Object.defineProperty({__proto__:null,GhostModeContext:Vo,default:lc},Symbol.toStringTag,{value:"Module"}));let Dl=0;const Gi=e=>{const{placeholder:t,value:n,onKeyDown:o,highlight:r,altNewline:i,validatedSelection:a,autoFocus:l,...c}=e,{onChange:u,className:d}=c,g=s.useRef(null),{isGhostMode:h,ghostValue:m}=s.useContext(Vo),f=h&&m?m:n??"";sn(u!==void 0,"GrowingEntry must be a controlled input area");const[w]=s.useState(()=>"input-box-"+(Dl=(Dl+1)%1e7));s.useEffect(()=>{if(h)return;const b=g.current;if(b===null||b.disabled)return;const C=f.toString().length;b.focus(),b.setSelectionRange(r?0:C,C)},[h]),s.useLayoutEffect(()=>{var b;if(a!==void 0){const C=typeof a=="number"?[a,null]:a;(b=g.current)==null||b.setSelectionRange(C[0],C[1])}},[a]);const y=s.useCallback(b=>{b.key==="Enter"&&b.shiftKey&&i===!0||o==null||o(b)},[i,o]),v=h?{visibility:"hidden"}:void 0;return s.createElement(qa,{className:"gdg-growing-entry"},s.createElement(Ua,{className:d},f+`
`),s.createElement(Va,{...c,className:(d??"")+" gdg-input",id:w,ref:g,onKeyDown:y,value:f,placeholder:t,dir:"auto",style:v}))};function ac(e,t){return Rt.useMemo(()=>e.map((n,o)=>({group:n.group,grow:n.grow,hasMenu:n.hasMenu,icon:n.icon,id:n.id,menuIcon:n.menuIcon,overlayIcon:n.overlayIcon,sourceIndex:o,sticky:o<t,indicatorIcon:n.indicatorIcon,style:n.style,themeOverride:n.themeOverride,title:n.title,trailingRowOptions:n.trailingRowOptions,width:n.width,growOffset:n.growOffset,rowMarker:n.rowMarker,rowMarkerChecked:n.rowMarkerChecked,headerRowMarkerTheme:n.headerRowMarkerTheme,headerRowMarkerAlwaysVisible:n.headerRowMarkerAlwaysVisible,headerRowMarkerDisabled:n.headerRowMarkerDisabled,rowGroupBorder:n.rowGroupBorder,required:n.required})),[e,t])}function cc(e,t){const[n,o]=t;if(e.columns.hasIndex(n)||e.rows.hasIndex(o))return!0;if(e.current!==void 0){if(ar(e.current.cell,t))return!0;const r=[e.current.range,...e.current.rangeStack];for(const i of r)if(n>=i.x&&n<i.x+i.width&&o>=i.y&&o<i.y+i.height)return!0}return!1}function po(e,t){return e===void 0?"":typeof e=="string"?e:t!==void 0&&t>=0&&t<e.length?e[t]:e.length>0?e[e.length-1]:""}function Fi(e,t,n){if(e!==void 0)return typeof e=="string"?t===n-1?e:void 0:t<e.length?e[t]:void 0}function ds(e,t){const n=po(e),o=po(t);return n===o}function Ur(e,t,n,o){for(let r=0;r<=n;r++){const i=Fi(e,r,o)??"",a=Fi(t,r,o)??"";if(i!==a)return!1}return!0}function dc(e,t,n){return n.current===void 0||e[1]!==n.current.cell[1]?!1:t.span===void 0?n.current.cell[0]===e[0]:n.current.cell[0]>=t.span[0]&&n.current.cell[0]<=t.span[1]}function us(e,t){const[n,o]=e;return n>=t.x&&n<t.x+t.width&&o>=t.y&&o<t.y+t.height}function ar(e,t){return(e==null?void 0:e[0])===(t==null?void 0:t[0])&&(e==null?void 0:e[1])===(t==null?void 0:t[1])}function fs(e){return[e.x+e.width-1,e.y+e.height-1]}function Fl(e,t,n){const o=n.x,r=n.x+n.width-1,i=n.y,a=n.y+n.height-1,[l,c]=e;if(c<i||c>a)return!1;if(t.span===void 0)return l>=o&&l<=r;const[u,d]=t.span;return u>=o&&u<=r||d>=o&&u<=r||u<o&&d>r}function uc(e,t,n,o){let r=0;if(n.current===void 0)return r;const i=n.current.range;(o||i.height*i.width>1)&&Fl(e,t,i)&&r++;for(const a of n.current.rangeStack)Fl(e,t,a)&&r++;return r}function hs(e,t){let n=e;if(t!==void 0){let o=[...e];const r=n[t.src];t.src>t.dest?(o.splice(t.src,1),o.splice(t.dest,0,r)):(o.splice(t.dest+1,0,r),o.splice(t.src,1)),o=o.map((i,a)=>({...i,sticky:e[a].sticky})),n=o}return n}function _o(e,t){let n=0;const o=hs(e,t);for(let r=0;r<o.length;r++){const i=o[r];if(i.sticky)n+=i.width;else break}return n}function bo(e,t,n){if(typeof n=="number")return t*n;{let o=0;for(let r=e-t;r<e;r++)o+=n(r);return o}}function Ti(e,t,n,o,r){const i=hs(e,o),a=[];for(const u of i)if(u.sticky)a.push(u);else break;if(a.length>0)for(const u of a)n-=u.width;let l=t,c=r??0;for(;c<=n&&l<i.length;)c+=i[l].width,l++;for(let u=t;u<l;u++){const d=i[u];d.sticky||a.push(d)}return a}function fc(e,t,n){let o=0;for(const r of t){const i=r.sticky?o:o+(n??0);if(e<=i+r.width)return r.sourceIndex;o+=r.width}return-1}function hc(e,t,n,o,r,i,a,l,c,u,d,g){const h=d??(n?1:0),m=g??(n?[r]:[]),f=m.reduce((C,I)=>C+I,0),w=o+f;if(n&&h>0){let C=0;for(let I=0;I<h;I++)if(C+=m[I]??0,e<=C)return-(I+2)}if(e<=w)return-1;let y=t;for(let C=0;C<u;C++){const I=i-1-C,L=typeof a=="number"?a:a(I);if(y-=L,e>=y)return I}const v=i-u,b=e-(c??0);if(typeof a=="number"){const C=Math.floor((b-w)/a)+l;return C>=v?void 0:C}else{let C=w;for(let I=l;I<v;I++){const L=a(I);if(b<=C+L)return I;C+=L}return}}let Kr=0,cr={};const gc=typeof window>"u";async function mc(){var e;gc||((e=document==null?void 0:document.fonts)==null?void 0:e.ready)===void 0||(await document.fonts.ready,Kr=0,cr={},Ha())}mc();function gs(e,t,n,o){return`${e}_${o??(t==null?void 0:t.font)}_${n}`}function yo(e,t,n,o="middle"){const r=gs(e,t,o,n);let i=cr[r];return i===void 0&&(i=t.measureText(e),cr[r]=i,Kr++),Kr>1e4&&(cr={},Kr=0),i}function ms(e,t){const n=gs(e,void 0,"middle",t);return cr[n]}function cn(e,t){return typeof t!="string"&&(t=t.baseFontFull),wc(e,t)}function Tl(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.save(),e.textBaseline=t;const o=e.measureText(n);return e.restore(),o}const Al=[];function wc(e,t){for(const i of Al)if(i.key===t)return i.val;const n=Tl(e,"alphabetic"),r=-(Tl(e,"middle").actualBoundingBoxDescent-n.actualBoundingBoxDescent)+n.actualBoundingBoxAscent/2;return Al.push({key:t,val:r}),r}function pc(e,t,n,o,r,i){const{ctx:a,rect:l,theme:c}=e;let u=Number.MAX_SAFE_INTEGER;const d=500;if(t!==void 0&&(u=n-t,u<d)){const g=1-u/d;a.globalAlpha=g,a.fillStyle=c.bgSearchResult,a.fillRect(l.x+1,l.y+1,l.width-(r?2:1),l.height-(i?2:1)),a.globalAlpha=1,o!==void 0&&(o.fillStyle=c.bgSearchResult)}return u<d}function Jr(e,t,n){const{ctx:o,theme:r}=e,i=t??{},a=n??r.textDark;return a!==i.fillStyle&&(o.fillStyle=a,i.fillStyle=a),i}function Wf(e,t,n,o,r){const{rect:i,ctx:a,theme:l}=e;a.fillStyle=l.textDark,Bn({ctx:a,rect:i,theme:l},t,n,o,r)}function ws(e,t,n,o,r,i,a,l,c){c==="right"?e.fillText(t,n+r-(l.cellHorizontalPadding+.5),o+i/2+a):c==="center"?e.fillText(t,n+r/2,o+i/2+a):e.fillText(t,n+l.cellHorizontalPadding+.5,o+i/2+a)}function ps(e,t){const n=yo("ABCi09jgqpy",e,t);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}function bc(e,t){e=String(e),e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);const n=t/4;return e.length>n&&(e=e.slice(0,n)),e}function yc(e,t,n,o,r,i,a,l,c,u){const d=l.baseFontFull,g=Ia(e,t,d,r-l.cellHorizontalPadding*2,u??!1),h=ps(e,d),m=l.lineHeight*h,f=h+m*(g.length-1),w=f+l.cellVerticalPadding>i;w&&(e.save(),e.rect(n,o,r,i),e.clip());const y=o+i/2-f/2;let v=Math.max(o+l.cellVerticalPadding,y);for(const b of g)if(ws(e,b,n,v,r,h,a,l,c),v+=m,v>o+i)break;w&&e.restore()}function Bn(e,t,n,o,r){const{ctx:i,rect:a,theme:l}=e,{x:c,y:u,width:d,height:g}=a;o=o??!1,o||(t=bc(t,d));const h=cn(i,l),m=Ni(t)==="rtl";if(n===void 0&&m&&(n="right"),m&&(i.direction="rtl"),t.length>0){let f=!1;n==="right"?(i.textAlign="right",f=!0):n!==void 0&&n!=="left"&&(i.textAlign=n,f=!0),o?yc(i,t,c,u,d,g,h,l,n,r):ws(i,t,c,u,d,g,h,l,n),f&&(i.textAlign="start"),m&&(i.direction="inherit")}}function Fn(e,t,n,o,r,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,r/2,o/2)),tr:Math.max(0,Math.min(i.tr,r/2,o/2)),bl:Math.max(0,Math.min(i.bl,r/2,o/2)),br:Math.max(0,Math.min(i.br,r/2,o/2))},e.moveTo(t+i.tl,n),e.arcTo(t+o,n,t+o,n+i.tr,i.tr),e.arcTo(t+o,n+r,t+o-i.br,n+r,i.br),e.arcTo(t,n+r,t,n+r-i.bl,i.bl),e.arcTo(t,n,t+i.tl,n,i.tl)}function Cc(e,t,n){e.arc(t,n-1.25*3.5,1.25,0,2*Math.PI,!1),e.arc(t,n,1.25,0,2*Math.PI,!1),e.arc(t,n+1.25*3.5,1.25,0,2*Math.PI,!1)}function kc(e,t,n){const o=function(l,c){const u=c.x-l.x,d=c.y-l.y,g=Math.sqrt(u*u+d*d),h=u/g,m=d/g;return{x:u,y:c.y-l.y,len:g,nx:h,ny:m,ang:Math.atan2(m,h)}};let r;const i=t.length;let a=t[i-1];for(let l=0;l<i;l++){let c=t[l%i];const u=t[(l+1)%i],d=o(c,a),g=o(c,u),h=d.nx*g.ny-d.ny*g.nx,m=d.nx*g.nx-d.ny*-g.ny;let f=Math.asin(h<-1?-1:h>1?1:h),w=1,y=!1;m<0?f<0?f=Math.PI+f:(f=Math.PI-f,w=-1,y=!0):f>0&&(w=-1,y=!0),r=c.radius!==void 0?c.radius:n;const v=f/2;let b=Math.abs(Math.cos(v)*r/Math.sin(v)),C;b>Math.min(d.len/2,g.len/2)?(b=Math.min(d.len/2,g.len/2),C=Math.abs(b*Math.sin(v)/Math.cos(v))):C=r;let I=c.x+g.nx*b,L=c.y+g.ny*b;I+=-g.ny*C*w,L+=g.nx*C*w,e.arc(I,L,C,d.ang+Math.PI/2*w,g.ang-Math.PI/2*w,y),a=c,c=u}e.closePath()}function Ai(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y){const v={x:0,y:i+u,width:0,height:0},b=w??(r>0?1:0),C=-(b+1);if(e>=m.length||t>=d||t<C||e<0)return v;const I=y??(r>0?[r]:[]),L=I.reduce((H,R)=>H+R,0),x=i-L;if(e>=g){const H=a>e?-1:1,R=_o(m);v.x+=R+c;for(let S=a;S!==e;S+=H)v.x+=m[H===1?S:S-1].width*H}else for(let H=0;H<e;H++)v.x+=m[H].width;if(v.width=m[e].width+1,t===-1)v.y=L,v.height=x;else if(t<=-2){const H=-(t+2);let R=0;for(let E=0;E<H;E++)R+=I[E]??0;v.y=R,v.height=I[H]??r;let S=e;const A=m[e].group,F=m[e].sticky;for(;S>0&&Ur(m[S-1].group,A,H,b)&&m[S-1].sticky===F;){const E=m[S-1];v.x-=E.width,v.width+=E.width,S--}let D=e;for(;D+1<m.length&&Ur(m[D+1].group,A,H,b)&&m[D+1].sticky===F;){const E=m[D+1];v.width+=E.width,D++}if(!F){const E=_o(m),k=v.x-E;k<0&&(v.x-=k,v.width+=k),v.x+v.width>n&&(v.width=n-v.x)}}else if(t>=d-h){let H=d-t;for(v.y=o;H>0;){const R=t+H-1;v.height=typeof f=="number"?f:f(R),v.y-=v.height,H--}v.height+=1}else{const H=l>t?-1:1;if(typeof f=="number"){const R=t-l;v.y+=R*f}else for(let R=l;R!==t;R+=H)v.y+=f(R)*H;v.height=(typeof f=="number"?f:f(t))+1}return v}const Xi=1<<21;function Cn(e,t){return(t+2)*Xi+e}function bs(e){return e%Xi}function Ki(e){return Math.floor(e/Xi)-2}function Yi(e){const t=bs(e),n=Ki(e);return[t,n]}class ys{constructor(){Xe(this,"visibleWindow",{x:0,y:0,width:0,height:0});Xe(this,"freezeCols",0);Xe(this,"freezeRows",[]);Xe(this,"isInWindow",t=>{const n=bs(t),o=Ki(t),r=this.visibleWindow,i=n>=r.x&&n<=r.x+r.width||n<this.freezeCols,a=o>=r.y&&o<=r.y+r.height||this.freezeRows.includes(o);return i&&a})}setWindow(t,n,o){this.visibleWindow.x===t.x&&this.visibleWindow.y===t.y&&this.visibleWindow.width===t.width&&this.visibleWindow.height===t.height&&this.freezeCols===n&&Ko(this.freezeRows,o)||(this.visibleWindow=t,this.freezeCols=n,this.freezeRows=o,this.clearOutOfWindow())}}class vc extends ys{constructor(){super(...arguments);Xe(this,"cache",new Map);Xe(this,"setValue",(n,o)=>{this.cache.set(Cn(n[0],n[1]),o)});Xe(this,"getValue",n=>this.cache.get(Cn(n[0],n[1])));Xe(this,"clearOutOfWindow",()=>{for(const[n]of this.cache.entries())this.isInWindow(n)||this.cache.delete(n)})}}class Xo{constructor(t=[]){Xe(this,"cells");this.cells=new Set(t.map(n=>Cn(n[0],n[1])))}add(t){this.cells.add(Cn(t[0],t[1]))}has(t){return t===void 0?!1:this.cells.has(Cn(t[0],t[1]))}remove(t){this.cells.delete(Cn(t[0],t[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(const t of this.cells)if(Ki(t)<0)return!0;return!1}hasItemInRectangle(t){for(let n=t.y;n<t.y+t.height;n++)for(let o=t.x;o<t.x+t.width;o++)if(this.cells.has(Cn(o,n)))return!0;return!1}hasItemInRegion(t){for(const n of t)if(this.hasItemInRectangle(n))return!0;return!1}*values(){for(const t of this.cells)yield Yi(t)}}const Pi=150;function xc(e,t,n,o){var i;const r=o(t);return((i=r==null?void 0:r.measure)==null?void 0:i.call(r,e,t,n))??Pi}function Cs(e,t,n,o,r,i,a,l,c){let u=0;const d=r===void 0?[]:r.map(m=>{const f=xc(e,m[o],t,c);return u=Math.max(u,f),f});if(d.length>5&&l){u=0;let m=0;for(const w of d)m+=w;const f=m/d.length;for(let w=0;w<d.length;w++)d[w]>=f*2?d[w]=0:u=Math.max(u,d[w])}const g=e.font;e.font=t.headerFontFull,u=Math.max(u,e.measureText(n.title).width+t.cellHorizontalPadding*2+(n.icon===void 0?0:28)),e.font=g;const h=Math.max(Math.ceil(i),Math.min(Math.floor(a),Math.ceil(u)));return{...n,width:h}}function Sc(e,t,n,o,r,i,a,l,c){const u=s.useRef(t),d=s.useRef(n),g=s.useRef(a);u.current=t,d.current=n,g.current=a;const[h,m]=s.useMemo(()=>{if(typeof window>"u")return[null,null];const b=document.createElement("canvas");return b.style.display="none",b.style.opacity="0",b.style.position="fixed",[b,b.getContext("2d",{alpha:!1})]},[]);s.useLayoutEffect(()=>(h&&document.documentElement.append(h),()=>{h==null||h.remove()}),[h]);const f=s.useRef({}),w=s.useRef(),[y,v]=s.useState();return s.useLayoutEffect(()=>{const b=d.current;if(b===void 0||e.every(Nr))return;let C=Math.max(1,10-Math.floor(e.length/1e4)),I=0;C<u.current&&C>1&&(C--,I=1);const L={x:0,y:0,width:e.length,height:Math.min(u.current,C)},x={x:0,y:u.current-1,width:e.length,height:1};(async()=>{const R=b(L,c.signal),S=I>0?b(x,c.signal):void 0;let A;typeof R=="object"?A=R:A=await Ml(R),S!==void 0&&(typeof S=="object"?A=[...A,...S]:A=[...A,...await Ml(S)]),w.current=e,v(A)})()},[c.signal,e]),s.useMemo(()=>{let C=e.every(Nr)?e:m===null?e.map(H=>Nr(H)?H:{...H,width:Pi}):(m.font=g.current.baseFontFull,e.map((H,R)=>{if(Nr(H))return H;if(f.current[H.id]!==void 0)return{...H,width:f.current[H.id]};if(y===void 0||w.current!==e||H.id===void 0)return{...H,width:Pi};const S=Cs(m,a,H,R,y,r,i,!0,l);return f.current[H.id]=S.width,S})),I=0,L=0;const x=[];for(const[H,R]of C.entries())I+=R.width,R.grow!==void 0&&R.grow>0&&(L+=R.grow,x.push(H));if(I<o&&x.length>0){const H=[...C],R=o-I;let S=R;for(let A=0;A<x.length;A++){const F=x[A],D=(C[F].grow??0)/L,E=A===x.length-1?S:Math.min(S,Math.floor(R*D));H[F]={...C[F],growOffset:E,width:C[F].width+E},S-=E}C=H}return{sizedColumns:C,nonGrowWidth:I}},[o,e,m,y,a,r,i,l])}const yt='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',Mc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}<rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},Rc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}<rect x="2" y="2" width="16" height="16" rx="4" fill="${n}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},Ec=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},Ic=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},Hc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${n}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},ks=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `},Dc=e=>{const t=e.bgColor;return`${yt}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`},Fc=ks,Tc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},Ac=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},Pc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},zc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <path fill="${t}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${n}"/>
  </svg>`},Lc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},Bc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},Wc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},Oc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},Nc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${n}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${n}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},$c=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <path fill="${t}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${n}"/>
</svg>`},Gc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},Xc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},Kc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},Yc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},_c=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},Vc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},Uc=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${yt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},qc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},jc=e=>{const t=e.fgColor,n=e.bgColor;return`${yt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},Zc=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},Jc=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},Qc=e=>(e.fgColor,`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${e.bgColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" >
 <g transform="scale(0.833) translate(2, 2)">
    <path d="M8 18L12 22L16 18"/>
    <path d="M12 2V22"/>
  </g>
</svg>
  `),ed=e=>(e.fgColor,`
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${e.bgColor}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" >
  <g transform="scale(0.833) translate(-4, 2)">
    <path d="M8 6L12 2L16 6"/>
    <path d="M12 2V22"/>
  </g>
</svg>
`),td={headerRowID:Mc,headerNumber:Ec,headerCode:Rc,headerString:Ic,headerBoolean:Hc,headerAudioUri:Fc,headerVideoUri:Tc,headerEmoji:Ac,headerImage:Pc,headerUri:ks,headerPhone:zc,headerMarkdown:Lc,headerDate:Bc,headerTime:Wc,headerEmail:Oc,headerReference:Nc,headerIfThenElse:$c,headerSingleValue:Gc,headerLookup:Xc,headerTextTemplate:Kc,headerMath:Yc,headerRollup:_c,headerJoinStrings:Vc,headerSplitString:Uc,headerGeoDistance:qc,headerArray:jc,rowOwnerOverlay:Zc,protectedColumnOverlay:Jc,renameIcon:Dc,headerArrowDown:Qc,headerArrowUp:ed};function nd(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}class od{constructor(t,n){Xe(this,"onSettled");Xe(this,"spriteMap",new Map);Xe(this,"headerIcons");Xe(this,"inFlight",0);this.onSettled=n,this.headerIcons=t??{}}drawSprite(t,n,o,r,i,a,l,c=1){const[u,d]=nd(n,l),g=a*Math.ceil(window.devicePixelRatio),h=`${u}_${d}_${g}_${t}`;let m=this.spriteMap.get(h);if(m===void 0){const f=this.headerIcons[t];if(f===void 0)return;m=document.createElement("canvas");const w=m.getContext("2d");if(w===null)return;const y=new Image;y.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(f({fgColor:d,bgColor:u}))}`,this.spriteMap.set(h,m);const v=y.decode();if(v===void 0)return;this.inFlight++,v.then(()=>{w.drawImage(y,0,0,g,g)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else c<1&&(o.globalAlpha=c),o.drawImage(m,0,0,g,g,r,i,a,a),c<1&&(o.globalAlpha=1)}}function vs(e){if(e.length===0)return;let t;for(const n of e)t=Math.min(t??n.y,n.y);return t}function Qr(e,t,n,o,r,i,a,l,c){l=l??t;let u=t,d=e;const g=o-i;let h=!1;for(;u<n&&d<g;){const m=r(d);if(u+m>l&&c(u,d,m,!1,a&&d===o-1)===!0){h=!0;break}u+=m,d++}if(!h){u=n;for(let m=0;m<i;m++){d=o-1-m;const f=r(d);u-=f,c(u,d,f,!0,a&&d===o-1)}}}function oo(e,t,n,o,r,i){let a=0,l=0;const c=r+o;for(const u of e){const d=u.sticky?l:a+n;if(i(u,d,c,u.sticky?0:l,t)===!0)break;a+=u.width,l+=u.sticky?u.width:0}}function rd(e,t,n,o,r){let i=0,a=0;for(let l=0;l<e.length;l++){const c=e[l];let u=l+1,d=c.width;for(c.sticky&&(a+=d);u<e.length&&ds(e[u].group,c.group)&&e[u].sticky===e[l].sticky;){const w=e[u];d+=w.width,u++,l++,w.sticky&&(a+=w.width)}const g=c.sticky?0:n,h=i+g,m=c.sticky?0:Math.max(0,a-h),f=Math.min(d-m,t-(h+m));r([c.sourceIndex,e[u-1].sourceIndex],po(c.group),h+m,0,f,o),i+=d}}function id(e,t,n,o,r,i){if(r===0)return;const a=[];let l=0;for(let d=0;d<r;d++)a.push(l),l+=o[d]??0;const c=[];let u=0;for(const d of e)c.push(u),u+=d.width;for(let d=0;d<r;d++){const g=a[d],h=o[d]??0;let m=0,f=0;for(;f<e.length;){const w=e[f],y=Fi(w.group,d,r);if(y===void 0){w.sticky&&(m+=w.width),f++;continue}const v=c[f];let b=f+1,C=w.width;for(w.sticky&&(m+=w.width);b<e.length;){const R=e[b],S=Ur(R.group,w.group,d,r),A=R.sticky===w.sticky;if(!S||!A)break;C+=R.width,R.sticky&&(m+=R.width),b++}const I=w.sticky?0:n,L=v+I,x=w.sticky?0:Math.max(0,m-L),H=Math.min(C-x,t-(L+x));H>0&&i([w.sourceIndex,e[b-1].sourceIndex],y,L+x,g,H,h,d),f=b}}}function xs(e,t,n,o,r,i,a){var h;const[l,c]=e;let u,d;const g=((h=a.find(m=>!m.sticky))==null?void 0:h.sourceIndex)??0;if(c>g){const m=Math.max(l,g);let f=t,w=o;for(let y=i.sourceIndex-1;y>=m;y--)f-=a[y].width,w+=a[y].width;for(let y=i.sourceIndex+1;y<=c;y++)w+=a[y].width;d={x:f,y:n,width:w,height:r}}if(g>l){const m=Math.min(c,g-1);let f=t,w=o;for(let y=i.sourceIndex-1;y>=l;y--)f-=a[y].width,w+=a[y].width;for(let y=i.sourceIndex+1;y<=m;y++)w+=a[y].width;u={x:f,y:n,width:w,height:r}}return[u,d]}function ld(e,t,n,o){if(o==="any")return Ss(e,{x:t,y:n,width:1,height:1});if(o==="vertical"&&(t=e.x),o==="horizontal"&&(n=e.y),us([t,n],e))return;const r=t-e.x,i=e.x+e.width-t,a=n-e.y+1,l=e.y+e.height-n,c=Math.min(o==="vertical"?Number.MAX_SAFE_INTEGER:r,o==="vertical"?Number.MAX_SAFE_INTEGER:i,o==="horizontal"?Number.MAX_SAFE_INTEGER:a,o==="horizontal"?Number.MAX_SAFE_INTEGER:l);return c===l?{x:e.x,y:e.y+e.height,width:e.width,height:n-e.y-e.height+1}:c===a?{x:e.x,y:n,width:e.width,height:e.y-n}:c===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function ur(e,t,n,o,r,i,a,l){return e<=r+a&&r<=e+n&&t<=i+l&&i<=t+o}function eo(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function Ss(e,t){const n=Math.min(e.x,t.x),o=Math.min(e.y,t.y),r=Math.max(e.x+e.width,t.x+t.width)-n,i=Math.max(e.y+e.height,t.y+t.height)-o;return{x:n,y:o,width:r,height:i}}function sd(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function ad(e,t,n,o){if(e.x>t||e.y>n||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>n)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=n)return e;const r=-4,i=-4,a=t+4,l=n+4,c=r-e.x,u=e.x+e.width-a,d=i-e.y,g=e.y+e.height-l,h=c>0?e.x+Math.floor(c/o)*o:e.x,m=u>0?e.x+e.width-Math.floor(u/o)*o:e.x+e.width,f=d>0?e.y+Math.floor(d/o)*o:e.y,w=g>0?e.y+e.height-Math.floor(g/o)*o:e.y+e.height;return{x:h,y:f,width:m-h,height:w-f}}function cd(e,t,n,o,r){const[i,a,l,c]=t,[u,d,g,h]=r,{x:m,y:f,width:w,height:y}=e,v=[];if(w<=0||y<=0)return v;const b=m+w,C=f+y,I=m<i,L=f<a,x=m+w>l,H=f+y>c,R=m>=i&&m<l||b>i&&b<=l||m<i&&b>l,S=f>=a&&f<c||C>a&&C<=c||f<a&&C>c;if(R&&S){const F=Math.max(m,i),D=Math.max(f,a),E=Math.min(b,l),k=Math.min(C,c);v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:u,y:d,width:g-u+1,height:h-d+1}})}if(I&&L){const F=m,D=f,E=Math.min(b,i),k=Math.min(C,a);v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:0,y:0,width:u+1,height:d+1}})}if(L&&R){const F=Math.max(m,i),D=f,E=Math.min(b,l),k=Math.min(C,a);v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:u,y:0,width:g-u+1,height:d+1}})}if(L&&x){const F=Math.max(m,l),D=f,E=b,k=Math.min(C,a);v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:g,y:0,width:n-g+1,height:d+1}})}if(I&&S){const F=m,D=Math.max(f,a),E=Math.min(b,i),k=Math.min(C,c);v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:0,y:d,width:u+1,height:h-d+1}})}if(x&&S){const F=Math.max(m,l),D=Math.max(f,a),E=b,k=Math.min(C,c);v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:g,y:d,width:n-g+1,height:h-d+1}})}if(I&&H){const F=m,D=Math.max(f,c),E=Math.min(b,i),k=C;v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:0,y:h,width:u+1,height:o-h+1}})}if(H&&R){const F=Math.max(m,i),D=Math.max(f,c),E=Math.min(b,l),k=C;v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:u,y:h,width:g-u+1,height:o-h+1}})}if(x&&H){const F=Math.max(m,l),D=Math.max(f,c),E=b,k=C;v.push({rect:{x:F,y:D,width:E-F,height:k-D},clip:{x:g,y:h,width:n-g+1,height:o-h+1}})}return v}const dd={kind:te.Loading,allowOverlay:!1};function Pl(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y,v,b,C,I,L,x,H,R,S,A,F,D,E,k,$,_,se,Z){let j=(C==null?void 0:C.size)??Number.MAX_SAFE_INTEGER;const G=performance.now();let X=E.baseFontFull;e.font=X;const ne={ctx:e},de=[0,0],me=y>0?bo(c,y,u):0;let le,re;const P=new Xo,Y=new Set,K=vs(b);if(oo(t,l,i,a,r,(Q,Re,Te,W,ee)=>{const we=Math.max(0,W-Re),qe=Re+we,Pe=r+1,Et=Q.width-we,B=o-r-1;if(b.length>0){let oe=!1;for(let ve=0;ve<b.length;ve++){const ke=b[ve];if(ur(qe,Pe,Et,B,ke.x,ke.y,ke.width,ke.height)){oe=!0;break}}if(!oe)return}const pe=()=>{e.save(),e.beginPath(),e.rect(qe,Pe,Et,B),e.clip()},q=I.columns.hasIndex(Q.sourceIndex),ae=g(po(Q.group)).overrideTheme,ye=Q.themeOverride===void 0&&ae===void 0?E:Dn(E,ae,Q.themeOverride),We=ye.baseFontFull;We!==X&&(X=We,e.font=We),pe();let Fe;return Qr(ee,Te,o,c,u,y,v,K,(oe,ve,ke,Ct,V)=>{var tn,gn,Tn;if(ve<0)return;if(de[0]=Q.sourceIndex,de[1]=ve,P.has(de)){j--;return}if(C!==void 0&&!C.has(de))return;if(b.length>0){let ue=!1;for(let Ve=0;Ve<b.length;Ve++){const tt=b[Ve];if(ur(Re,oe,Q.width,ke,tt.x,tt.y,tt.width,tt.height)){ue=!0;break}}if(!ue)return}const He=I.rows.hasIndex(ve),je=m.hasIndex(ve),Ce=ve<c?d(de):dd;let ut=Re,at=Q.width,Le=oe,_e=ke,gt=!1,kt=!1;if(Ce.rowspan!==void 0){const[ue,Ve]=Ce.rowspan,tt=`${Q.sourceIndex}|${ue}`;if(Y.has(tt)){j--;return}else{let Nt=oe;for(let Oe=ue;Oe<ve;Oe++)Nt-=u(Oe);let $t=0;for(let Oe=ue;Oe<Ve;Oe++)$t+=u(Oe);if(Nt<Pe+B&&Nt+$t>Pe){Le=Nt,_e=$t,Y.add(tt);for(let Oe=ue;Oe<Ve;Oe++)Oe!==ve&&P.add([Q.sourceIndex,Oe]);gt=!0}else{Y.add(tt);for(let Oe=ue;Oe<Ve;Oe++)P.add([Q.sourceIndex,Oe]);j--;return}}}if(Ce.span!==void 0){const[ue,Ve]=Ce.span,tt=`${ve},${ue},${Ve},${Q.sticky}`;if(re===void 0&&(re=new Set),re.has(tt)){j--;return}else{const Nt=xs(Ce.span,Re,oe,Q.width,ke,Q,n),$t=Q.sticky?Nt[0]:Nt[1];!Q.sticky&&Nt[0]!==void 0&&(kt=!0),$t!==void 0&&(ut=$t.x,at=$t.width,re.add(tt),gt=!0)}}if(gt){e.restore(),Fe=void 0,e.save(),e.beginPath();const ue=Math.max(0,W-ut);e.rect(ut+ue,Le,at-ue,_e),le===void 0&&(le=[]),le.push({x:ut+ue,y:Le,width:at-ue,height:_e}),e.clip()}const St=h==null?void 0:h(ve),Lt=V&&((tn=Q.trailingRowOptions)==null?void 0:tn.themeOverride)!==void 0?(gn=Q.trailingRowOptions)==null?void 0:gn.themeOverride:void 0,vt=Ce.themeOverride===void 0&&St===void 0&&Lt===void 0?ye:Dn(ye,St,Lt,Ce.themeOverride);e.beginPath();const Ft=dc(de,Ce,I);let Bt=uc(de,Ce,I,w);const dn=Ce.span!==void 0&&I.columns.some(ue=>Ce.span!==void 0&&ue>=Ce.span[0]&&ue<=Ce.span[1]);Ft&&!f&&w?Bt=0:Ft&&w&&(Bt=Math.max(Bt,1)),dn&&Bt++,Ft||(He&&Bt++,q&&!V&&Bt++);const Qt=Ce.kind===te.Protected?vt.bgCellMedium:vt.bgCell;let pt;if((Ct||Qt!==E.bgCell)&&(pt=an(Qt,pt)),Bt>0||je){je&&(pt=an(vt.bgHeader,pt));for(let ue=0;ue<Bt;ue++)pt=an(vt.accentLight,pt)}else if(L!==void 0){for(const ue of L)if(ue[0]===Q.sourceIndex&&ue[1]===ve){pt=an(vt.bgSearchResult,pt);break}}if(x!==void 0)for(let ue=0;ue<x.length;ue++){const Ve=x[ue],tt=Ve.range;Ve.style!=="solid-outline"&&tt.x<=Q.sourceIndex&&Q.sourceIndex<tt.x+tt.width&&tt.y<=ve&&ve<tt.y+tt.height&&(pt=an(Ve.color,pt))}let un=!1;if(C!==void 0){const ue=oe+1,tt=(Ct?ue+ke-1:Math.min(ue+ke-1,o-me))-ue;(tt!==ke-1||ut+1<=W)&&(un=!0,e.save(),e.beginPath(),e.rect(ut+1,ue,at-1,tt),e.clip()),pt=pt===void 0?vt.bgCell:an(pt,vt.bgCell)}const Je=Q.sourceIndex===n.length-1,Wt=ve===c-1;pt!==void 0&&(e.fillStyle=pt,Fe!==void 0&&(Fe.fillStyle=pt),C!==void 0?e.fillRect(ut+1,Le+1,at-(Je?2:1),_e-(Wt?2:1)):e.fillRect(ut,Le,at,_e)),Ce.style==="faded"&&(e.globalAlpha=.6);let en;for(let ue=0;ue<S.length;ue++){const Ve=S[ue];if(Ve.item[0]===Q.sourceIndex&&Ve.item[1]===ve){en=Ve;break}}if(at>Z&&!kt){const ue=vt.baseFontFull;ue!==X&&(e.font=ue,X=ue);let Ve=0;if(Ce.rowspan!==void 0){const tt=Ce.rowSpanPosition??"top";if(tt==="top")Ve=ke/2-_e/2;else if(tt==="bottom"){const[Nt,$t]=Ce.rowspan,Oe=u($t-1);Ve=_e/2-Oe/2}}Fe=Ms(e,Ce,Q.sourceIndex,ve,Je,Wt,ut,Le,at,_e,Bt>0,vt,pt??vt.bgCell,H,R,(en==null?void 0:en.hoverAmount)??0,A,D,G,F,Fe,k,$,_,se,Ve)}return un&&e.restore(),Ce.style==="faded"&&(e.globalAlpha=1),j--,gt&&(e.restore(),(Tn=Fe==null?void 0:Fe.deprep)==null||Tn.call(Fe,ne),Fe=void 0,pe(),X=We,e.font=We),j<=0}),e.restore(),j<=0}),le!==void 0)return le}const rr=[0,0],ir={x:0,y:0,width:0,height:0},xi=[void 0,()=>{}];let zi=!1;function ud(){zi=!0}function Ms(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y,v,b,C,I,L,x,H,R,S){var _,se;let A,F;y!==void 0&&y[0][0]===n&&y[0][1]===o&&(A=y[1][0],F=y[1][1]);let D;rr[0]=n,rr[1]=o,ir.x=a,ir.y=l,ir.width=c,ir.height=u,xi[0]=x.getValue(rr),xi[1]=Z=>x.setValue(rr,Z),zi=!1;const E={ctx:e,theme:g,col:n,row:o,cell:t,rect:ir,highlighted:d,cellFillColor:h,hoverAmount:w,frameTime:b,hoverX:A,drawState:xi,hoverY:F,imageLoader:m,spriteManager:f,hyperWrapping:v,overrideCursor:A!==void 0?R:void 0,requestAnimationFrame:ud},k=pc(E,t.lastUpdated,b,I,r,i),$=H(t);if($!==void 0){(I==null?void 0:I.renderer)!==$&&((_=I==null?void 0:I.deprep)==null||_.call(I,E),I=void 0);const Z=(se=$.drawPrep)==null?void 0:se.call($,E,I);e.save(),e.translate(0,S),C!==void 0&&!wo(E.cell)?C(E,()=>$.draw(E,t)):$.draw(E,t),e.restore(),D=Z===void 0?void 0:{deprep:Z==null?void 0:Z.deprep,fillStyle:Z==null?void 0:Z.fillStyle,font:Z==null?void 0:Z.font,renderer:$}}return(k||zi)&&(L==null||L(rr)),D}function qr(e,t,n,o,r,i,a,l,c=-20,u=-20,d=void 0,g="center",h="square",m=!1){const f=Math.floor(r+a/2),w=h==="circle"?1e4:t.roundingRadius??4;let y=os(d??t.checkboxMaxSize,a,t.cellVerticalPadding),v=y/2;const b=ns(g,o,i,t.cellHorizontalPadding,y),C=ts(b,f,y),I=rs(o+c,r+u,C);switch(n){case!0:{e.beginPath(),Fn(e,b-y/2,f-y/2,y,y,w),h==="circle"&&(v*=.8,y*=.8),e.fillStyle=m?t.bgCellMedium:l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(b-v+y/4.23,f-v+y/1.97),e.lineTo(b-v+y/2.42,f-v+y/1.44),e.lineTo(b-v+y/1.29,f-v+y/3.25),e.strokeStyle=m?t.textLight:t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break}case Yr:case!1:{e.beginPath(),Fn(e,b-y/2+.5,f-y/2+.5,y-1,y-1,w),e.lineWidth=1,e.strokeStyle=m?t.textLight:I?t.textDark:t.textMedium,e.stroke();break}case Bi:{e.beginPath(),Fn(e,b-y/2,f-y/2,y,y,w),e.fillStyle=m?t.bgCellMedium:I?t.textMedium:t.textLight,e.fill(),h==="circle"&&(v*=.8,y*=.8),e.beginPath(),e.moveTo(b-y/3,f),e.lineTo(b+y/3,f),e.strokeStyle=m?t.textLight:t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break}default:dr()}}function fd(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y,v,b,C,I,L){var $,_,se,Z;const x=I??(o?1:0),H=L??(o?[c]:[]),R=H.reduce((j,G)=>j+G,0),S=l+R;if(S<=0)return;e.fillStyle=h.bgHeader,v!==void 0&&o&&(I??1)>1?e.fillRect(0,R,i,l):e.fillRect(0,0,i,S);const A=($=r==null?void 0:r[0])==null?void 0:$[0],F=(_=r==null?void 0:r[0])==null?void 0:_[1],D=(se=r==null?void 0:r[1])==null?void 0:se[0],E=(Z=r==null?void 0:r[1])==null?void 0:Z[1],k=h.headerFontFull;e.font=k,oo(t,0,a,0,S,(j,G,X,ne)=>{var ee;if(v!==void 0&&!v.has([j.sourceIndex,-1]))return;const de=Math.max(0,ne-G);e.save(),e.beginPath(),e.rect(G+de,R,j.width-de,l),e.clip();const me=y(po(j.group)).overrideTheme,le=j.themeOverride===void 0&&me===void 0?h:Dn(h,me,j.themeOverride);le.bgHeader!==h.bgHeader&&(e.fillStyle=le.bgHeader,e.fill()),le!==h&&(e.font=le.headerFontFull);const re=g.columns.hasIndex(j.sourceIndex),P=u!==void 0||d||j.headerRowMarkerDisabled===!0,Y=!P&&F===-1&&A===j.sourceIndex,K=P?0:((ee=f.find(we=>we.item[0]===j.sourceIndex&&we.item[1]===-1))==null?void 0:ee.hoverAmount)??0,Q=(g==null?void 0:g.current)!==void 0&&g.current.cell[0]===j.sourceIndex,Re=re?le.accentColor:Q?le.bgHeaderHasFocus:le.bgHeader,Te=o?R:0,W=j.sourceIndex===0?0:1;re?(e.fillStyle=Re,e.fillRect(G+W,Te,j.width-W,l)):(Q||K>0)&&(e.beginPath(),e.rect(G+W,Te,j.width-W,l),Q&&(e.fillStyle=le.bgHeaderHasFocus,e.fill()),K>0&&(e.globalAlpha=K,e.fillStyle=le.bgHeaderHovered,e.fill(),e.globalAlpha=1)),Es(e,G,Te,j.width,l,j,re,le,Y,Y?D:void 0,Y?E:void 0,Q,K,m,b,C),e.restore()}),o&&(x>1?gd(e,t,i,a,H,x,r,h,m,f,w,y,v):hd(e,t,i,a,c,r,h,m,f,w,y,v)),o&&(I??1)>1&&(e.beginPath(),e.moveTo(0,R+.5),e.lineTo(i,R+.5),e.strokeStyle=h.borderColor,e.lineWidth=1,e.stroke())}function hd(e,t,n,o,r,i,a,l,c,u,d,g){const[m,f]=(i==null?void 0:i[0])??[];let w=0;rd(t,n,o,r,(y,v,b,C,I,L)=>{if(g!==void 0&&!g.hasItemInRectangle({x:y[0],y:-2,width:y[1]-y[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(b,C,I,L),e.clip();const x=d(v),H=(x==null?void 0:x.overrideTheme)===void 0?a:Dn(a,x.overrideTheme),R=f===-2&&m!==void 0&&m>=y[0]&&m<=y[1],S=R?H.bgGroupHeaderHovered??H.bgHeaderHovered:H.bgGroupHeader??H.bgHeader;if(S!==a.bgHeader&&(e.fillStyle=S,e.fill()),e.fillStyle=H.textGroupHeader??H.textHeader,x!==void 0){let A=b;if(x.icon!==void 0&&(l.drawSprite(x.icon,"normal",e,A+8,(r-20)/2,20,H),A+=26),e.fillText(x.name,A+8,r/2+cn(e,a.headerFontFull)),x.actions!==void 0&&R){const F=_i({x:b,y:C,width:I,height:L},x.actions);e.beginPath();const D=F[0].x-10,E=b+I-D;e.rect(D,0,E,r);const k=e.createLinearGradient(D,0,D+E,0),$=no(S,0);k.addColorStop(0,$),k.addColorStop(10/E,S),k.addColorStop(1,S),e.fillStyle=k,e.fill(),e.globalAlpha=.6;const[_,se]=(i==null?void 0:i[1])??[-1,-1];for(let Z=0;Z<x.actions.length;Z++){const j=x.actions[Z],G=F[Z],X=eo(G,_+b,se);X&&(e.globalAlpha=1),l.drawSprite(j.icon,"normal",e,G.x+G.width/2-10,G.y+G.height/2-10,20,H),X&&(e.globalAlpha=.6)}e.globalAlpha=1}}b!==0&&u(y[0])&&(e.beginPath(),e.moveTo(b+.5,0),e.lineTo(b+.5,r),e.strokeStyle=a.borderColor,e.lineWidth=1,e.stroke()),e.restore(),w=b+I}),e.beginPath(),e.moveTo(w+.5,0),e.lineTo(w+.5,r),e.moveTo(0,r+.5),e.lineTo(n,r+.5),e.strokeStyle=a.borderColor,e.lineWidth=1,e.stroke()}function gd(e,t,n,o,r,i,a,l,c,u,d,g,h){const[m,f]=(a==null?void 0:a[0])??[];e.font=l.headerFontFull;const w=r.reduce((v,b)=>v+b,0);h===void 0&&(e.fillStyle=l.bgHeader,e.fillRect(0,0,n,w));let y=0;if(id(t,n,o,r,i,(v,b,C,I,L,x,H)=>{const R=-(H+2);if(h!==void 0&&!h.hasItemInRectangle({x:v[0],y:R,width:v[1]-v[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(C,I,L,x),e.clip();const S=g(b),A=(S==null?void 0:S.overrideTheme)===void 0?l:Dn(l,S.overrideTheme),F=f===R&&m!==void 0&&m>=v[0]&&m<=v[1],D=F?A.bgGroupHeaderHovered??A.bgHeaderHovered:A.bgGroupHeader??A.bgHeader;e.fillStyle=D,e.fillRect(C,I,L,x),e.fillStyle=A.textGroupHeader??A.textHeader;const E=(S==null?void 0:S.name)??b,$=e.measureText(E).width,_=(S==null?void 0:S.icon)!==void 0?26:0,se=_+$,Z=C+(L-se)/2;if((S==null?void 0:S.icon)!==void 0&&c.drawSprite(S.icon,"normal",e,Z,I+(x-20)/2,20,A),e.fillText(E,Z+_,I+x/2+cn(e,l.headerFontFull)),S!==void 0&&S.actions!==void 0&&F){const j=_i({x:C,y:I,width:L,height:x},S.actions);e.beginPath();const G=j[0].x-10,X=C+L-G;e.rect(G,I,X,x);const ne=e.createLinearGradient(G,0,G+X,0),de=no(D,0);ne.addColorStop(0,de),ne.addColorStop(10/X,D),ne.addColorStop(1,D),e.fillStyle=ne,e.fill(),e.globalAlpha=.6;const[me,le]=(a==null?void 0:a[1])??[-1,-1];for(let re=0;re<S.actions.length;re++){const P=S.actions[re],Y=j[re],K=eo(Y,me+C,le);K&&(e.globalAlpha=1),c.drawSprite(P.icon,"normal",e,Y.x+Y.width/2-10,Y.y+Y.height/2-10,20,A),K&&(e.globalAlpha=.6)}e.globalAlpha=1}e.strokeStyle=l.borderColor,e.lineWidth=1,C!==0&&d(v[0])&&(e.beginPath(),e.moveTo(C+.5,I),e.lineTo(C+.5,I+x),e.stroke()),(H<i-1||h===void 0)&&(e.beginPath(),e.moveTo(C,I+x+.5),e.lineTo(C+L,I+x+.5),e.stroke()),e.restore(),y=Math.max(y,C+L)}),h===void 0){e.beginPath(),e.moveTo(y+.5,0),e.lineTo(y+.5,w);let v=0;for(let b=0;b<i-1;b++)v+=r[b],e.moveTo(0,v+.5),e.lineTo(n,v+.5);e.strokeStyle=l.borderColor,e.lineWidth=1,e.stroke()}}const Gr=30;function md(e,t,n,o,r){return{x:e+n-Gr,y:Math.max(t,t+o/2-Gr/2),width:Gr,height:Math.min(Gr,o)}}function _i(e,t){const n=[];let o=e.x+e.width-26*t.length;const r=e.y+e.height/2-13,i=26,a=26;for(let l=0;l<t.length;l++)n.push({x:o,y:r,width:a,height:i}),o+=26;return n}function lr(e,t,n){return!n||e===void 0||(e.x=t-(e.x-t)-e.width),e}function Rs(e,t,n,o,r,i,a,l){var H;const c=a.cellHorizontalPadding,u=a.headerIconSize,d=md(n,o,r,i);let g=n+c;const h=t.icon===void 0?void 0:{x:g,y:o+(i-u)/2,width:u,height:u},m=h===void 0||t.overlayIcon===void 0?void 0:{x:h.x+9,y:h.y+6,width:18,height:18};h!==void 0&&(g+=Math.ceil(u*1.3));const f=e===void 0?((H=ms(t.title,a.headerFontFull))==null?void 0:H.width)??0:yo(t.title,e,a.headerFontFull).width,w=t.hasMenu===!0?35:0,y=t.indicatorIcon!==void 0?u+c:0,v=f+y,b=r-(h!==void 0?Math.ceil(u*1.3)+c:c)-w-c,C=n+(h!==void 0?Math.ceil(u*1.3)+c:c)+(b-v)/2,I={x:Math.max(g,C),y:o,width:f,height:i};let L;t.indicatorIcon!==void 0&&(L={x:I.x+f+c,y:o+(i-u)/2,width:u,height:u});const x=n+r/2;return{menuBounds:lr(d,x,l),iconBounds:lr(h,x,l),iconOverlayBounds:lr(m,x,l),textBounds:lr(I,x,l),indicatorIconBounds:lr(L,x,l)}}function zl(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w){if(i.rowMarker!==void 0&&i.headerRowMarkerDisabled!==!0){const b=i.rowMarkerChecked;b!==!0&&i.headerRowMarkerAlwaysVisible!==!0&&(e.globalAlpha=g);const C=i.headerRowMarkerTheme!==void 0?Dn(l,i.headerRowMarkerTheme):l;qr(e,C,b,t,n,o,r,!1,void 0,void 0,l.checkboxMaxSize,"center",i.rowMarker),b!==!0&&i.headerRowMarkerAlwaysVisible!==!0&&(e.globalAlpha=1);return}const y=a?l.textHeaderSelected:l.textHeader,v=i.hasMenu===!0&&(c||m&&a)&&w.menuBounds!==void 0;if(i.icon!==void 0&&w.iconBounds!==void 0){let b=a?"selected":"normal";i.style==="highlight"&&(b=a?"selected":"special"),h.drawSprite(i.icon,b,e,w.iconBounds.x,w.iconBounds.y,w.iconBounds.width,l),i.overlayIcon!==void 0&&w.iconOverlayBounds!==void 0&&h.drawSprite(i.overlayIcon,a?"selected":"special",e,w.iconOverlayBounds.x,w.iconOverlayBounds.y,w.iconOverlayBounds.width,l)}if(v&&o>35){const C=f?35:o-35,I=f?35*.7:o-35*.7,L=C/o,x=I/o,H=e.createLinearGradient(t,0,t+o,0),R=no(y,0);H.addColorStop(f?1:0,y),H.addColorStop(L,y),H.addColorStop(x,R),H.addColorStop(f?0:1,R),e.fillStyle=H}else e.fillStyle=y;if(f&&(e.textAlign="right"),w.textBounds!==void 0&&e.fillText(i.title,f?w.textBounds.x+w.textBounds.width:w.textBounds.x,n+r/2+cn(e,l.headerFontFull)),f&&(e.textAlign="left"),i.indicatorIcon!==void 0&&w.indicatorIconBounds!==void 0&&(!v||!ur(w.menuBounds.x,w.menuBounds.y,w.menuBounds.width,w.menuBounds.height,w.indicatorIconBounds.x,w.indicatorIconBounds.y,w.indicatorIconBounds.width,w.indicatorIconBounds.height))){let b=a?"selected":"normal";i.style==="highlight"&&(b=a?"selected":"special"),h.drawSprite(i.indicatorIcon,b,e,w.indicatorIconBounds.x,w.indicatorIconBounds.y,w.indicatorIconBounds.width,l)}if(v&&w.menuBounds!==void 0){const b=w.menuBounds,C=u!==void 0&&d!==void 0&&eo(b,u+t,d+n);if(C||(e.globalAlpha=.7),i.menuIcon===void 0||i.menuIcon===_r.Triangle){e.beginPath();const I=b.x+b.width/2-5.5,L=b.y+b.height/2-3;kc(e,[{x:I,y:L},{x:I+11,y:L},{x:I+5.5,y:L+6}],1),e.fillStyle=y,e.fill()}else if(i.menuIcon===_r.Dots){e.beginPath();const I=b.x+b.width/2,L=b.y+b.height/2;Cc(e,I,L),e.fillStyle=y,e.fill()}else{const I=b.x+(b.width-l.headerIconSize)/2,L=b.y+(b.height-l.headerIconSize)/2;h.drawSprite(i.menuIcon,"normal",e,I,L,l.headerIconSize,l)}C||(e.globalAlpha=1)}}function Es(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w){const y=Ni(i.title)==="rtl",v=Rs(e,i,t,n,o,r,l,y);f!==void 0?f({ctx:e,theme:l,rect:{x:t,y:n,width:o,height:r},column:i,columnIndex:i.sourceIndex,isSelected:a,hoverAmount:h,isHovered:c,hasSelectedCell:g,spriteManager:m,menuBounds:(v==null?void 0:v.menuBounds)??{x:0,y:0,height:0,width:0},hoverX:u,hoverY:d},()=>zl(e,t,n,o,r,i,a,l,c,u,d,h,m,w,y,v)):zl(e,t,n,o,r,i,a,l,c,u,d,h,m,w,y,v)}function wd(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y,v,b){if(v!==void 0||t[t.length-1]!==n[t.length-1])return;const C=vs(y);oo(t,c,a,l,i,(I,L,x,H,R)=>{if(I!==t[t.length-1])return;L+=I.width;const S=Math.max(L,H);S>o||(e.save(),e.beginPath(),e.rect(S,i+1,1e4,r-i-1),e.clip(),Qr(R,x,r,u,d,f,w,C,(A,F,D,E)=>{if(!E&&y.length>0&&!y.some(Z=>ur(L,A,1e4,D,Z.x,Z.y,Z.width,Z.height)))return;const k=h.hasIndex(F),$=m.hasIndex(F);e.beginPath();const _=g==null?void 0:g(F),se=_===void 0?b:Dn(b,_);se.bgCell!==b.bgCell&&(e.fillStyle=se.bgCell,e.fillRect(L,A,1e4,D)),$&&(e.fillStyle=se.bgHeader,e.fillRect(L,A,1e4,D)),k&&(e.fillStyle=se.accentLight,e.fillRect(L,A,1e4,D))}),e.restore())})}function pd(e,t,n,o,r,i,a,l,c){let u=!1;for(const f of t)if(!f.sticky){u=a(f.sourceIndex);break}const d=c.horizontalBorderColor??c.borderColor,g=c.borderColor,h=u?_o(t):0;let m;if(h!==0&&(m=Hl(g,c.bgCell),e.beginPath(),e.moveTo(h+.5,0),e.lineTo(h+.5,o),e.strokeStyle=m,e.stroke()),r>0){const f=g===d&&m!==void 0?m:Hl(d,c.bgCell),w=bo(i,r,l);e.beginPath(),e.moveTo(0,o-w+.5),e.lineTo(n,o-w+.5),e.strokeStyle=f,e.stroke()}}const Is=(e,t,n)=>{let o=0,r=t,i=0,a=n;if(e!==void 0&&e.length>0){o=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;for(const l of e)o=Math.min(o,l.x-1),r=Math.max(r,l.x+l.width+1),i=Math.min(i,l.y-1),a=Math.max(a,l.y+l.height+1)}return{minX:o,maxX:r,minY:i,maxY:a}};function bd(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f){var D;const w=f.bgCell,{minX:y,maxX:v,minY:b,maxY:C}=Is(l,i,a),I=[],L=a-bo(m,h,u);let x=c,H=n,R=0;for(;x+r<L;){const E=x+r,k=u(H);if(E>=b&&E<=C-1){const $=d==null?void 0:d(H),_=$==null?void 0:$.bgCell;_!==void 0&&_!==w&&H>=m-h&&I.push({x:y,y:E,w:v-y,h:k,color:_})}x+=k,H<m-h&&(R=x),H++}let S=0;const A=Math.min(L,C)-R;if(A>0)for(let E=0;E<t.length;E++){const k=t[E];if(k.width===0)continue;const $=k.sticky?S:S+o,_=(D=k.themeOverride)==null?void 0:D.bgCell;_!==void 0&&_!==w&&$>=y&&$<=v&&g(E+1)&&I.push({x:$,y:R,w:k.width,h:A,color:_}),S+=k.width}if(I.length===0)return;let F;e.beginPath();for(let E=I.length-1;E>=0;E--){const k=I[E];F===void 0?F=k.color:k.color!==F&&(e.fillStyle=F,e.fill(),e.beginPath(),F=k.color),e.rect(k.x,k.y,k.w,k.h)}F!==void 0&&(e.fillStyle=F,e.fill()),e.beginPath()}function Ll(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y,v=!1){if(c!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,a);for(const D of c)e.rect(D.x+1,D.y+1,D.width-1,D.height-1);e.clip("evenodd")}const b=y.horizontalBorderColor??y.borderColor,C=y.borderColor,{minX:I,maxX:L,minY:x,maxY:H}=Is(l,i,a),R=[];e.beginPath();let S=.5;for(let D=0;D<t.length;D++){const E=t[D];if(E.width===0)continue;S+=E.width;const k=E.sticky?S:S+o;k>=I&&k<=L&&m(D+1)&&R.push({x1:k,y1:Math.max(u,x),x2:k,y2:Math.min(a,H),color:C})}let A=a+.5;for(let D=w-f;D<w;D++){const E=g(D);A-=E,R.push({x1:I,y1:A,x2:L,y2:A,color:b})}if(v!==!0){let D=d+.5,E=n;const k=A;for(;D+r<k;){const $=D+r;if($>=x&&$<=H-1){const _=h==null?void 0:h(E);R.push({x1:I,y1:$,x2:L,y2:$,color:(_==null?void 0:_.horizontalBorderColor)??(_==null?void 0:_.borderColor)??b})}D+=g(E),E++}}const F=Da(R,D=>D.color);for(const D of Object.keys(F)){e.strokeStyle=D;for(const E of F[D])e.moveTo(E.x1,E.y1),e.lineTo(E.x2,E.y2);e.stroke(),e.beginPath()}c!==void 0&&e.restore()}function yd(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y,v,b){const C=[];e.imageSmoothingEnabled=!1;const I=Math.min(r.cellYOffset,a),L=Math.max(r.cellYOffset,a);let x=0;if(typeof v=="number")x+=(L-I)*v;else for(let k=I;k<L;k++)x+=v(k);a>r.cellYOffset&&(x=-x),x+=c-r.translateY;const H=Math.min(r.cellXOffset,i),R=Math.max(r.cellXOffset,i);let S=0;for(let k=H;k<R;k++)S+=w[k].width;i>r.cellXOffset&&(S=-S),S+=l-r.translateX;const A=_o(y);if(S!==0&&x!==0)return{regions:[]};const F=u>0?bo(h,u,v):0,D=d-A-Math.abs(S),E=g-m-F-Math.abs(x)-1;if(D>150&&E>150){const k={sx:0,sy:0,sw:d*f,sh:g*f,dx:0,dy:0,dw:d*f,dh:g*f};if(x>0?(k.sy=(m+1)*f,k.sh=E*f,k.dy=(x+m+1)*f,k.dh=E*f,C.push({x:0,y:m,width:d,height:x+1})):x<0&&(k.sy=(-x+m+1)*f,k.sh=E*f,k.dy=(m+1)*f,k.dh=E*f,C.push({x:0,y:g+x-F,width:d,height:-x+F})),S>0?(k.sx=A*f,k.sw=D*f,k.dx=(S+A)*f,k.dw=D*f,C.push({x:A-1,y:0,width:S+2,height:g})):S<0&&(k.sx=(A-S)*f,k.sw=D*f,k.dx=A*f,k.dw=D*f,C.push({x:d+S,y:0,width:-S,height:g})),e.setTransform(1,0,0,1,0,0),b){if(A>0&&S!==0&&x===0&&(o===void 0||(n==null?void 0:n[1])!==!1)){const $=A*f,_=g*f;e.drawImage(t,0,0,$,_,0,0,$,_)}if(F>0&&S===0&&x!==0&&(o===void 0||(n==null?void 0:n[0])!==!1)){const $=(g-F)*f,_=d*f,se=F*f;e.drawImage(t,0,$,_,se,0,$,_,se)}}e.drawImage(t,k.sx,k.sy,k.sw,k.sh,k.dx,k.dy,k.dw,k.dh),e.scale(f,f)}return e.imageSmoothingEnabled=!0,{regions:C}}function Cd(e,t,n,o,r,i,a,l,c,u){const d=[];return t!==e.cellXOffset||n!==e.cellYOffset||o!==e.translateX||r!==e.translateY||oo(c,n,o,r,l,(g,h,m,f)=>{if(g.sourceIndex===u){const w=Math.max(h,f)+1;return d.push({x:w,y:0,width:i-w,height:a}),!0}}),d}function kd(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let n;for(let o=0;o<e.mappedColumns.length;o++){const r=e.mappedColumns[o],i=t.mappedColumns[o];if(Ko(r,i))continue;if(n!==void 0||r.width===i.width)return!1;const{width:a,...l}=r,{width:c,...u}=i;if(!Ko(l,u))return!1;n=o}return n===void 0?!0:n}return!0}function Bl(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w){const y=f==null?void 0:f.filter(H=>H.style!=="no-outline");if(y===void 0||y.length===0)return;const v=_o(l),b=bo(m,h,g),C=[c,0,l.length,m-h],I=[v,0,t,n-b],L=y.map(H=>{const R=H.range,S=H.style??"dashed";return cd(R,C,t,n,I).map(A=>{const F=A.rect,D=Ai(F.x,F.y,t,n,d,u+d,o,r,i,a,m,c,h,l,g),E=F.width===1&&F.height===1?D:Ai(F.x+F.width-1,F.y+F.height-1,t,n,d,u+d,o,r,i,a,m,c,h,l,g);return F.x+F.width>=l.length&&(E.width-=1),F.y+F.height>=m&&(E.height-=1),{color:H.color,style:S,clip:A.clip,rect:ad({x:D.x,y:D.y,width:E.x+E.width-D.x,height:E.y+E.height-D.y},t,n,8)}})}),x=()=>{e.lineWidth=1;let H=!1;for(const R of L)for(const S of R)if((S==null?void 0:S.rect)!==void 0&&ur(0,0,t,n,S.rect.x,S.rect.y,S.rect.width,S.rect.height)){const A=H,F=!sd(S.clip,S.rect);e.beginPath(),F&&(e.save(),e.rect(S.clip.x,S.clip.y,S.clip.width,S.clip.height),e.clip()),S.style==="dashed"&&!H?(e.setLineDash([5,3]),H=!0):(S.style==="solid"||S.style==="solid-outline")&&H&&(e.setLineDash([]),H=!1),e.strokeStyle=S.style==="solid-outline"?an(an(S.color,w.borderColor),w.bgCell):no(S.color,1),e.closePath(),e.strokeRect(S.rect.x+.5,S.rect.y+.5,S.rect.width-1,S.rect.height-1),F&&(e.restore(),H=A)}H&&e.setLineDash([])};return x(),x}function Wl(e,t,n,o,r){e.beginPath(),e.moveTo(t,n),e.lineTo(t,o),e.lineWidth=2,e.strokeStyle=r,e.stroke(),e.globalAlpha=1}function Si(e,t,n,o,r,i,a,l,c,u,d,g,h,m,f,w,y){if(d.current===void 0)return;const v=w!==!1&&w!==void 0;if(!v)return;const b=typeof w=="object"?{...Vr,...w}:Vr,C=d.current.range,I=d.current.cell,L=[C.x+C.width-1,C.y+C.height-1];if(I[1]>=y&&L[1]>=y||!a.some(_=>_.sourceIndex===I[0]||_.sourceIndex===L[0]))return;const[H,R]=d.current.cell,S=h(d.current.cell),A=S.span??[H,H],F=R>=y-m,D=m>0&&!F?bo(y,m,g)-1:0,E=L[1];let k;if(oo(a,o,r,i,u,(_,se,Z,j,G)=>{if(_.sticky&&H>_.sourceIndex)return;const X=_.sourceIndex<A[0],ne=_.sourceIndex>A[1],de=_.sourceIndex===L[0];if(!(!de&&(X||ne)))return Qr(G,Z,n,y,g,m,f,void 0,(me,le,re)=>{if(le!==R&&le!==E)return;let P=se,Y=_.width;if(S.span!==void 0){const Q=xs(S.span,se,me,_.width,re,_,l),Re=_.sticky?Q[0]:Q[1];Re!==void 0&&(P=Re.x,Y=Re.width)}return le===E&&de&&v&&(k=()=>{var ee;j>P&&!_.sticky&&(e.beginPath(),e.rect(j,0,t-j,n),e.clip());const Q=b.size,Re=Q/2,Te=P+Y+b.offsetX-Re+.5,W=me+re+b.offsetY-Re+.5;e.beginPath(),b.shape==="circle"?e.arc(Te+Re,W+Re,Re,0,Math.PI*2):e.rect(Te,W,Q,Q),e.fillStyle=((ee=_.themeOverride)==null?void 0:ee.accentColor)??c.accentColor,e.fill(),b.outline>0&&(e.lineWidth=b.outline,e.strokeStyle=c.bgCell,b.shape==="circle"?(e.beginPath(),e.arc(Te+Re,W+Re,Re+b.outline/2,0,Math.PI*2),e.stroke()):e.strokeRect(Te-b.outline/2,W-b.outline/2,Q+b.outline,Q+b.outline))}),k!==void 0}),k!==void 0}),k===void 0)return;const $=()=>{e.save(),e.beginPath(),e.rect(0,u,t,n-u-D),e.clip(),k==null||k(),e.restore()};return $(),$}function vd(e,t,n,o,r,i,a,l,c){c===void 0||c.size===0||(e.beginPath(),oo(t,l,i,a,r,(u,d,g,h)=>{const m=Math.max(0,h-d),f=d+m+1,w=u.width-m-1;c.has([u.sourceIndex,-1])&&e.rect(f,o,w,r-o)}),e.clip())}function xd(e,t,n,o,r,i,a,l,c,u){let d=0;return oo(e,i,o,r,n,(g,h,m,f,w)=>(Qr(w,m,t,a,l,c,u,void 0,(y,v,b,C)=>{C||(d=Math.max(v,d))}),!0)),d}function Ol(e,t){var un;const{canvasCtx:n,headerCanvasCtx:o,width:r,height:i,cellXOffset:a,cellYOffset:l,translateX:c,translateY:u,mappedColumns:d,enableGroups:g,freezeColumns:h,dragAndDropState:m,theme:f,drawFocus:w,headerHeight:y,groupHeaderHeight:v,groupLevels:b,groupHeaderHeights:C,disabledRows:I,rowHeight:L,verticalBorder:x,overrideCursor:H,isResizing:R,selection:S,fillHandle:A,freezeTrailingRows:F,rows:D,getCellContent:E,getGroupDetails:k,getRowThemeOverride:$,isFocused:_,drawHeaderCallback:se,prelightCells:Z,drawCellCallback:j,highlightRegions:G,resizeCol:X,imageLoader:ne,lastBlitData:de,hoverValues:me,hyperWrapping:le,hoverInfo:re,spriteManager:P,maxScaleFactor:Y,hasAppendRow:K,touchMode:Q,enqueue:Re,renderStateProvider:Te,getCellRenderer:W,renderStrategy:ee,bufferACtx:we,bufferBCtx:qe,damage:Pe,minimumCellWidth:Et,resizeIndicator:B}=e;if(r===0||i===0)return;const pe=ee==="double-buffer",q=Math.min(Y,Math.ceil(window.devicePixelRatio??1)),ae=ee!=="direct"&&kd(e,t),ye=n.canvas;(ye.width!==r*q||ye.height!==i*q)&&(ye.width=r*q,ye.height=i*q,ye.style.width=r+"px",ye.style.height=i+"px");const We=o.canvas,Fe=C.reduce((Je,Wt)=>Je+Wt,0),oe=y+Fe,ve=oe+1;(We.width!==r*q||We.height!==ve*q)&&(We.width=r*q,We.height=ve*q,We.style.width=r+"px",We.style.height=ve+"px");const ke=we.canvas,Ct=qe.canvas;pe&&(ke.width!==r*q||ke.height!==i*q)&&(ke.width=r*q,ke.height=i*q,de.current!==void 0&&(de.current.aBufferScroll=void 0)),pe&&(Ct.width!==r*q||Ct.height!==i*q)&&(Ct.width=r*q,Ct.height=i*q,de.current!==void 0&&(de.current.bBufferScroll=void 0));const V=de.current;if(ae===!0&&a===(V==null?void 0:V.cellXOffset)&&l===(V==null?void 0:V.cellYOffset)&&c===(V==null?void 0:V.translateX)&&u===(V==null?void 0:V.translateY))return;let He=null;pe&&(He=n);const je=o;let Ce;pe?Pe!==void 0?Ce=(V==null?void 0:V.lastBuffer)==="b"?qe:we:Ce=(V==null?void 0:V.lastBuffer)==="b"?we:qe:Ce=n;const ut=Ce.canvas,at=pe?ut===ke?Ct:ke:ye,Le=typeof L=="number"?()=>L:L;je.save(),Ce.save(),je.beginPath(),Ce.beginPath(),je.textBaseline="middle",Ce.textBaseline="middle",q!==1&&(je.scale(q,q),Ce.scale(q,q));const _e=Ti(d,a,r,m,c);let gt=[];const kt=w&&((un=S.current)==null?void 0:un.cell[1])===l&&u===0;let St=!1;if(G!==void 0){for(const Je of G)if(Je.style!=="no-outline"&&Je.range.y===l&&u===0){St=!0;break}}const Lt=()=>{je.fillStyle=f.bgHeader,je.fillRect(0,0,r,oe+1),fd(je,_e,d,g,re,r,c,y,v,m,R,S,f,P,me,x,k,Pe,se,Q,b,C),Ll(je,_e,l,c,u,r,i,void 0,void 0,Fe,oe,Le,$,x,F,D,f,!0),je.beginPath(),je.moveTo(0,ve-.5),je.lineTo(r,ve-.5),je.strokeStyle=an(f.headerBottomBorderColor??f.horizontalBorderColor??f.borderColor,f.bgHeader),je.stroke(),St&&Bl(je,r,i,a,l,c,u,d,h,y,Fe,L,F,D,G,f),kt&&Si(je,r,i,l,c,u,_e,d,f,oe,S,Le,E,F,K,A,D)};if(Pe!==void 0){const Je=_e[_e.length-1].sourceIndex+1,Wt=Pe.hasItemInRegion([{x:a,y:-2,width:Je,height:2},{x:a,y:l,width:Je,height:300},{x:0,y:l,width:h,height:300},{x:0,y:-2,width:h,height:2},{x:a,y:D-F,width:Je,height:F,when:F>0}]),en=tn=>{Pl(tn,_e,d,i,oe,c,u,l,D,Le,E,k,$,I,_,w,F,K,gt,Pe,S,Z,G,ne,P,me,re,j,le,f,Re,Te,W,H,Et);const gn=S.current;A!==!1&&A!==void 0&&w&&gn!==void 0&&Pe.has(fs(gn.range))&&Si(tn,r,i,l,c,u,_e,d,f,oe,S,Le,E,F,K,A,D)};Wt&&(en(Ce),He!==null&&(He.save(),He.scale(q,q),He.textBaseline="middle",en(He),He.restore()),Pe.hasHeader()&&(vd(je,_e,r,Fe,oe,c,u,l,Pe),Lt())),Ce.restore(),je.restore();return}if((ae!==!0||a!==(V==null?void 0:V.cellXOffset)||l!==(V==null?void 0:V.cellYOffset)||c!==(V==null?void 0:V.translateX)||u!==(V==null?void 0:V.translateY)||kt!==(V==null?void 0:V.mustDrawFocusOnHeader)||St!==(V==null?void 0:V.mustDrawHighlightRingsOnHeader))&&Lt(),ae===!0){sn(at!==void 0&&V!==void 0);const{regions:Je}=yd(Ce,at,at===ke?V.aBufferScroll:V.bBufferScroll,at===ke?V.bBufferScroll:V.aBufferScroll,V,a,l,c,u,F,r,i,D,oe,q,d,_e,L,pe);gt=Je}else ae!==!1&&(sn(V!==void 0),gt=Cd(V,a,l,c,u,r,i,oe,_e,ae));pd(Ce,_e,r,i,F,D,x,Le,f);const vt=Bl(Ce,r,i,a,l,c,u,d,h,y,Fe,L,F,D,G,f),Ft=w?Si(Ce,r,i,l,c,u,_e,d,f,oe,S,Le,E,F,K,A,D):void 0;if(Ce.fillStyle=f.bgCell,gt.length>0){Ce.beginPath();for(const Je of gt)Ce.rect(Je.x,Je.y,Je.width,Je.height);Ce.clip(),Ce.fill(),Ce.beginPath()}else Ce.fillRect(0,0,r,i);const Bt=Pl(Ce,_e,d,i,oe,c,u,l,D,Le,E,k,$,I,_,w,F,K,gt,Pe,S,Z,G,ne,P,me,re,j,le,f,Re,Te,W,H,Et);wd(Ce,_e,d,r,i,oe,c,u,l,D,Le,$,S.rows,I,F,K,gt,Pe,f),bd(Ce,_e,l,c,u,r,i,gt,oe,Le,$,x,F,D,f),Ll(Ce,_e,l,c,u,r,i,gt,Bt,Fe,oe,Le,$,x,F,D,f),vt==null||vt(),Ft==null||Ft(),R&&B!=="none"&&oo(_e,0,c,0,oe,(Je,Wt)=>Je.sourceIndex===X?(Wl(je,Wt+Je.width,0,oe+1,an(f.resizeIndicatorColor??f.accentLight,f.bgHeader)),B==="full"&&Wl(Ce,Wt+Je.width,oe,i,an(f.resizeIndicatorColor??f.accentLight,f.bgCell)),!0):!1),He!==null&&(He.fillStyle=f.bgCell,He.fillRect(0,0,r,i),He.drawImage(Ce.canvas,0,0));const dn=xd(_e,i,oe,c,u,l,D,Le,F,K);ne==null||ne.setWindow({x:a,y:l,width:_e.length,height:dn-l},h,Array.from({length:F},(Je,Wt)=>D-1-Wt));const Qt=V!==void 0&&(a!==V.cellXOffset||c!==V.translateX),pt=V!==void 0&&(l!==V.cellYOffset||u!==V.translateY);de.current={cellXOffset:a,cellYOffset:l,translateX:c,translateY:u,mustDrawFocusOnHeader:kt,mustDrawHighlightRingsOnHeader:St,lastBuffer:pe?ut===ke?"a":"b":void 0,aBufferScroll:ut===ke?[Qt,pt]:V==null?void 0:V.aBufferScroll,bBufferScroll:ut===Ct?[Qt,pt]:V==null?void 0:V.bBufferScroll},Ce.restore(),je.restore()}const Sd=80;function Md(e){const t=e-1;return t*t*t+1}class Rd{constructor(t){Xe(this,"callback");Xe(this,"currentHoveredItem");Xe(this,"leavingItems",[]);Xe(this,"lastAnimationTime");Xe(this,"addToLeavingItems",t=>{this.leavingItems.some(o=>ar(o.item,t.item))||this.leavingItems.push(t)});Xe(this,"removeFromLeavingItems",t=>{const n=this.leavingItems.find(o=>ar(o.item,t));return this.leavingItems=this.leavingItems.filter(o=>o!==n),(n==null?void 0:n.hoverAmount)??0});Xe(this,"cleanUpLeavingElements",()=>{this.leavingItems=this.leavingItems.filter(t=>t.hoverAmount>0)});Xe(this,"shouldStep",()=>{const t=this.leavingItems.length>0,n=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return t||n});Xe(this,"getAnimatingItems",()=>this.currentHoveredItem!==void 0?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map(t=>({...t,hoverAmount:Md(t.hoverAmount)})));Xe(this,"step",t=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=t;else{const o=(t-this.lastAnimationTime)/Sd;for(const i of this.leavingItems)i.hoverAmount=hn(i.hoverAmount-o,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=hn(this.currentHoveredItem.hoverAmount+o,0,1));const r=this.getAnimatingItems();this.callback(r),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=t,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0});Xe(this,"setHovered",t=>{var n;if(!ar((n=this.currentHoveredItem)==null?void 0:n.item,t)){if(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),t!==void 0){const o=this.removeFromLeavingItems(t);this.currentHoveredItem={item:t,hoverAmount:o}}else this.currentHoveredItem=void 0;this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step)}});this.callback=t}}class Ed{constructor(t){Xe(this,"fn");Xe(this,"val");this.fn=t}get value(){return this.val??(this.val=this.fn())}}function Vi(e){return new Ed(e)}const Id=Vi(()=>window.navigator.userAgent.includes("Firefox")),jr=Vi(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),ei=Vi(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function Hd(e){const t=s.useRef([]),n=s.useRef(0),o=s.useRef(e);o.current=e;const r=s.useCallback(()=>{const i=()=>window.requestAnimationFrame(a),a=()=>{const l=t.current.map(Yi);t.current=[],o.current(new Xo(l)),t.current.length>0?n.current++:n.current=0};window.requestAnimationFrame(n.current>600?i:a)},[]);return s.useCallback(i=>{t.current.length===0&&r();const a=Cn(i[0],i[1]);t.current.includes(a)||t.current.push(a)},[r])}const Qn="header",kn="group-header",Zr="out-of-bounds";var Go;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(Go||(Go={}));function Hs(e,t){return e===t?!0:(e==null?void 0:e.kind)==="out-of-bounds"?(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])&&(e==null?void 0:e.region[0])===(t==null?void 0:t.region[0])&&(e==null?void 0:e.region[1])===(t==null?void 0:t.region[1]):(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])}const Dd=(e,t)=>{if(e.kind===te.Custom)return e.copyData;const n=t==null?void 0:t(e);return(n==null?void 0:n.getAccessibilityString(e))??""},Fd=(e,t)=>{const{width:n,height:o,accessibilityHeight:r,columns:i,cellXOffset:a,cellYOffset:l,headerHeight:c,fillHandle:u=!1,groupHeaderHeight:d,groupLevels:g,groupHeaderHeights:h,rowHeight:m,rows:f,getCellContent:w,getRowThemeOverride:y,onHeaderMenuClick:v,onHeaderIndicatorClick:b,enableGroups:C,isFilling:I,onCanvasFocused:L,onCanvasBlur:x,isFocused:H,selection:R,freezeColumns:S,onContextMenu:A,freezeTrailingRows:F,fixedShadowX:D=!0,fixedShadowY:E=!0,drawFocusRing:k,onMouseDown:$,onMouseUp:_,onMouseMoveRaw:se,onMouseMove:Z,onItemHovered:j,dragAndDropState:G,firstColAccessible:X,onKeyDown:ne,onKeyUp:de,highlightRegions:me,canvasRef:le,onDragStart:re,onDragEnd:P,eventTargetRef:Y,isResizing:K,resizeColumn:Q,isDragging:Re,isDraggable:Te=!1,allowResize:W,disabledRows:ee,hasAppendRow:we,getGroupDetails:qe,theme:Pe,prelightCells:Et,headerIcons:B,verticalBorder:pe,drawCell:q,drawHeader:ae,onCellFocused:ye,onDragOverCell:We,onDrop:Fe,onDragLeave:oe,imageWindowLoader:ve,smoothScrollX:ke=!1,smoothScrollY:Ct=!1,experimental:V,getCellRenderer:He,resizeIndicator:je="full"}=e,Ce=e.translateX??0,ut=e.translateY??0,at=Math.max(S,Math.min(i.length-1,a)),Le=s.useRef(null),_e=s.useRef((V==null?void 0:V.eventTarget)??window),gt=_e.current,kt=ve,St=s.useRef(),[Lt,vt]=s.useState(!1),Ft=s.useRef([]),Bt=s.useRef(),[dn,Qt]=s.useState(),[pt,un]=s.useState(),Je=s.useRef(null),[Wt,en]=s.useState(),[tn,gn]=s.useState(!1),Tn=s.useRef(tn);Tn.current=tn;const ue=s.useMemo(()=>new od(B,()=>{ko.current=void 0,wn.current()}),[B]),Ve=C?d+c:c,tt=s.useRef(-1),Nt=((V==null?void 0:V.enableFirefoxRescaling)??!1)&&Id.value,$t=((V==null?void 0:V.enableSafariRescaling)??!1)&&jr.value;s.useLayoutEffect(()=>{window.devicePixelRatio===1||!Nt&&!$t||(tt.current!==-1&&vt(!0),window.clearTimeout(tt.current),tt.current=window.setTimeout(()=>{vt(!1),tt.current=-1},200))},[l,at,Ce,ut,Nt,$t]);const Oe=ac(i,S),Uo=s.useMemo(()=>D?_o(Oe,G):0,[Oe,G,D]),Tt=s.useCallback((z,J,Se)=>{const Me=z.getBoundingClientRect();if(J>=Oe.length||Se>=f)return;const fe=Me.width/n,be=Ai(J,Se,n,o,d,Ve,at,l,Ce,ut,f,S,F,Oe,m,g,h);return fe!==1&&(be.x*=fe,be.y*=fe,be.width*=fe,be.height*=fe),be.x+=Me.x,be.y+=Me.y,be},[n,o,d,Ve,at,l,Ce,ut,f,S,F,Oe,m,g,h]),xt=s.useCallback((z,J,Se,Me)=>{const fe=z.getBoundingClientRect(),be=fe.width/n,Ae=(J-fe.left)/be,Ge=(Se-fe.top)/be,xe=5,N=Ti(Oe,at,n,void 0,Ce);let De=0,Be=0;const rt=typeof PointerEvent<"u"&&Me instanceof PointerEvent&&Me.pointerType==="mouse"||typeof MouseEvent<"u"&&Me instanceof MouseEvent,ft=typeof PointerEvent<"u"&&Me instanceof PointerEvent&&Me.pointerType==="touch"||typeof TouchEvent<"u"&&Me instanceof TouchEvent;rt&&(De=Me.button,Be=Me.buttons);const ht=fc(Ae,N,Ce),It=hc(Ge,o,C,c,d,f,m,l,ut,F,g,h),Ht=(Me==null?void 0:Me.shiftKey)===!0,Sn=(Me==null?void 0:Me.ctrlKey)===!0,ge=(Me==null?void 0:Me.metaKey)===!0,At=[Ae<0?-1:n<Ae?1:0,Ge<Ve?-1:o<Ge?1:0];let Ot;if(ht===-1||Ge<0||Ae<0||It===void 0||Ae>n||Ge>o){const ct=Ae>n?1:Ae<0?-1:0,Mn=Ge>o?1:Ge<0?-1:0;let Vt=ct*2,Gt=Mn*2;ct===0&&(Vt=ht===-1?Go.EndPadding:Go.Center),Mn===0&&(Gt=It===void 0?Go.EndPadding:Go.Center);let Ut=!1;if(ht===-1&&It===-1){const Yn=Tt(z,Oe.length-1,-1);sn(Yn!==void 0),Ut=J<Yn.x+Yn.width+xe}const so=Ae>n&&Ae<n+Di()||Ge>o&&Ge<o+Di();Ot={kind:Zr,location:[ht!==-1?ht:Ae<0?0:Oe.length-1,It??f-1],region:[Vt,Gt],shiftKey:Ht,ctrlKey:Sn,metaKey:ge,isEdge:Ut,isTouch:ft,button:De,buttons:Be,scrollEdge:At,isMaybeScrollbar:so}}else if(It<=-1){let ct=Tt(z,ht,It);sn(ct!==void 0);let Mn=ct!==void 0&&ct.x+ct.width-J<=xe;const Vt=C&&It<=-2,Gt=Vt?-(It+2):void 0,Ut=ht-1;J-ct.x<=xe&&Ut>=0?(Mn=!0,ct=Tt(z,Ut,It),sn(ct!==void 0),Ot={kind:Vt?kn:Qn,location:[Ut,It],bounds:ct,group:po(Oe[Ut].group,Gt),isEdge:Mn,shiftKey:Ht,ctrlKey:Sn,metaKey:ge,isTouch:ft,localEventX:J-ct.x,localEventY:Se-ct.y,button:De,buttons:Be,scrollEdge:At}):Ot={kind:Vt?kn:Qn,group:po(Oe[ht].group,Gt),location:[ht,It],bounds:ct,isEdge:Mn,shiftKey:Ht,ctrlKey:Sn,metaKey:ge,isTouch:ft,localEventX:J-ct.x,localEventY:Se-ct.y,button:De,buttons:Be,scrollEdge:At}}else{const ct=Tt(z,ht,It);sn(ct!==void 0);const Mn=ct!==void 0&&ct.x+ct.width-J<xe;let Vt=!1;if(u!==!1&&u!==void 0&&R.current!==void 0){const Ut=typeof u=="object"?{...Vr,...u}:Vr,so=Ut.size,Yn=so/2,vr=fs(R.current.range),ao=Tt(z,vr[0],vr[1]);if(ao!==void 0){const xr=ao.x+ao.width+Ut.offsetX-Yn+.5,Pt=ao.y+ao.height+Ut.offsetY-Yn+.5;Vt=Math.abs(xr-J)<so&&Math.abs(Pt-Se)<so}}Ot={kind:"cell",location:[ht,It],bounds:ct,isEdge:Mn,shiftKey:Ht,ctrlKey:Sn,isFillHandle:Vt,metaKey:ge,isTouch:ft,localEventX:J-ct.x,localEventY:Se-ct.y,button:De,buttons:Be,scrollEdge:At}}return Ot},[n,Oe,at,Ce,o,C,c,d,f,m,l,ut,F,Tt,u,R,Ve]),[nn]=dn??[],On=s.useRef(()=>{}),mn=s.useRef(dn);mn.current=dn;const[An,mt]=s.useMemo(()=>{const z=document.createElement("canvas"),J=document.createElement("canvas");return z.style.display="none",z.style.opacity="0",z.style.position="fixed",J.style.display="none",J.style.opacity="0",J.style.position="fixed",[z.getContext("2d",{alpha:!1}),J.getContext("2d",{alpha:!1})]},[]);s.useLayoutEffect(()=>{if(!(An===null||mt===null))return document.documentElement.append(An.canvas),document.documentElement.append(mt.canvas),()=>{An.canvas.remove(),mt.canvas.remove()}},[An,mt]);const Co=s.useMemo(()=>new vc,[]),fr=Nt&&Lt?1:$t&&Lt?2:5,hr=(V==null?void 0:V.disableMinimumCellWidth)===!0?1:10,ko=s.useRef(),vo=s.useRef(null),xo=s.useRef(null),So=s.useCallback(()=>{var Ae;const z=Le.current,J=Je.current;if(z===null||J===null||(vo.current===null&&(vo.current=z.getContext("2d",{alpha:!1}),z.width=0,z.height=0),xo.current===null&&(xo.current=J.getContext("2d",{alpha:!1}),J.width=0,J.height=0),vo.current===null||xo.current===null||An===null||mt===null))return;let Se=!1;const Me=Ge=>{Se=!0,en(Ge)},fe=ko.current,be={headerCanvasCtx:xo.current,canvasCtx:vo.current,bufferACtx:An,bufferBCtx:mt,width:n,height:o,cellXOffset:at,cellYOffset:l,translateX:Math.round(Ce),translateY:Math.round(ut),mappedColumns:Oe,enableGroups:C,freezeColumns:S,dragAndDropState:G,theme:Pe,headerHeight:c,groupHeaderHeight:d,groupLevels:g,groupHeaderHeights:h,disabledRows:ee??ot.empty(),rowHeight:m,verticalBorder:pe,isResizing:K,resizeCol:Q,isFocused:H,selection:R,fillHandle:u,drawCellCallback:q,hasAppendRow:we,overrideCursor:Me,maxScaleFactor:fr,freezeTrailingRows:F,rows:f,drawFocus:k,getCellContent:w,getGroupDetails:qe??(Ge=>({name:Ge})),getRowThemeOverride:y,drawHeaderCallback:ae,prelightCells:Et,highlightRegions:me,imageLoader:kt,lastBlitData:Bt,damage:St.current,hoverValues:Ft.current,hoverInfo:mn.current,spriteManager:ue,scrolling:Lt,hyperWrapping:(V==null?void 0:V.hyperWrapping)??!1,touchMode:tn,enqueue:On.current,renderStateProvider:Co,renderStrategy:(V==null?void 0:V.renderStrategy)??(jr.value?"double-buffer":"single-buffer"),getCellRenderer:He,minimumCellWidth:hr,resizeIndicator:je};be.damage===void 0?(ko.current=be,Ol(be,fe)):Ol(be,void 0),!Se&&(be.damage===void 0||be.damage.has((Ae=mn==null?void 0:mn.current)==null?void 0:Ae[0]))&&en(void 0)},[An,mt,n,o,at,l,Ce,ut,Oe,C,S,G,Pe,c,d,g,h,ee,m,pe,K,we,Q,H,R,u,F,f,k,fr,w,qe,y,q,ae,Et,me,kt,ue,Lt,V==null?void 0:V.hyperWrapping,V==null?void 0:V.renderStrategy,tn,Co,He,hr,je]),wn=s.useRef(So);s.useLayoutEffect(()=>{So(),wn.current=So},[So]),s.useLayoutEffect(()=>{(async()=>{var J;((J=document==null?void 0:document.fonts)==null?void 0:J.ready)!==void 0&&(await document.fonts.ready,ko.current=void 0,wn.current())})()},[]);const Nn=s.useCallback(z=>{St.current=z,wn.current(),St.current=void 0},[]),ti=Hd(Nn);On.current=ti;const gr=s.useCallback(z=>{Nn(new Xo(z.map(J=>J.cell)))},[Nn]);kt.setCallback(Nn);const[ni,oi]=s.useState(!1),[Pn,$n]=nn??[],ri=Pn!==void 0&&$n===-1&&Pn>=0&&Pn<Oe.length&&Oe[Pn].headerRowMarkerDisabled!==!0,ii=Pn!==void 0&&$n===-2;let mr=!1,qo=!1,Mo=Wt;if(Mo===void 0&&Pn!==void 0&&$n!==void 0&&$n>-1&&$n<f){const z=w([Pn,$n],!0);mr=z.kind===zt.NewRow||z.kind===zt.Marker&&z.markerKind!=="number",qo=z.kind===te.Boolean&&Wi(z),Mo=z.cursor}const wr=Re?"grabbing":(pt??!1)||K?"col-resize":ni||I?"crosshair":Mo!==void 0?Mo:ri||mr||qo||ii?"pointer":"default",ro=s.useMemo(()=>({contain:"strict",display:"block",cursor:wr}),[wr]),pr=s.useRef("default"),Ro=Y==null?void 0:Y.current;Ro!=null&&pr.current!==ro.cursor&&(Ro.style.cursor=pr.current=ro.cursor);const io=s.useCallback((z,J,Se,Me)=>{if(qe===void 0)return;const fe=qe(z);if(fe.actions!==void 0){const be=_i(J,fe.actions);for(const[Ae,Ge]of be.entries())if(eo(Ge,Se+J.x,Me+Ge.y))return fe.actions[Ae]}},[qe]),pn=s.useCallback((z,J,Se,Me)=>{const fe=Oe[J];if(!Re&&!K&&!(pt??!1)){const be=Tt(z,J,-1);sn(be!==void 0);const Ae=Rs(void 0,fe,be.x,be.y,be.width,be.height,Pe,Ni(fe.title)==="rtl");if(fe.hasMenu===!0&&Ae.menuBounds!==void 0&&eo(Ae.menuBounds,Se,Me))return{area:"menu",bounds:Ae.menuBounds};if(fe.indicatorIcon!==void 0&&Ae.indicatorIconBounds!==void 0&&eo(Ae.indicatorIconBounds,Se,Me))return{area:"indicator",bounds:Ae.indicatorIconBounds}}},[Oe,Tt,pt,Re,K,Pe]),Gn=s.useRef(0),vn=s.useRef(),Eo=s.useRef(!1),Ne=s.useCallback(z=>{const J=Le.current,Se=Y==null?void 0:Y.current;if(J===null||z.target!==J&&z.target!==Se)return;Eo.current=!0;const Me=z.clientX,fe=z.clientY;if(z.target===Se&&Se!==null){const Ae=Se.getBoundingClientRect();if(Me>Ae.right||fe>Ae.bottom)return}const be=xt(J,Me,fe,z);vn.current=be.location,be.isTouch&&(Gn.current=Date.now()),Tn.current!==be.isTouch&&gn(be.isTouch),!(be.kind===Qn&&pn(J,be.location[0],Me,fe)!==void 0)&&(be.kind===kn&&io(be.group,be.bounds,be.localEventX,be.localEventY)!==void 0||($==null||$(be),!be.isTouch&&Te!==!0&&Te!==be.kind&&be.button<3&&be.button!==1&&z.preventDefault()))},[Y,Te,xt,io,pn,$]);Kt("pointerdown",Ne,gt,!1);const br=s.useRef(0),Io=s.useCallback(z=>{var Be,rt;const J=br.current;br.current=Date.now();const Se=Le.current;if(Eo.current=!1,_===void 0||Se===null)return;const Me=Y==null?void 0:Y.current,fe=z.target!==Se&&z.target!==Me,be=z.clientX,Ae=z.clientY,Ge=z.pointerType==="mouse"?z.button<3:!0;let xe=xt(Se,be,Ae,z);xe.isTouch&&Gn.current!==0&&Date.now()-Gn.current>500&&(xe={...xe,isLongTouch:!0}),J!==0&&Date.now()-J<(xe.isTouch?1e3:500)&&(xe={...xe,isDoubleClick:!0}),Tn.current!==xe.isTouch&&gn(xe.isTouch),!fe&&z.cancelable&&Ge&&z.preventDefault();const[N]=xe.location,De=pn(Se,N,be,Ae);if(xe.kind===Qn&&De!==void 0){(xe.button!==0||((Be=vn.current)==null?void 0:Be[0])!==N||((rt=vn.current)==null?void 0:rt[1])!==-1)&&_(xe,!0);return}else if(xe.kind===kn){const ft=io(xe.group,xe.bounds,xe.localEventX,xe.localEventY);if(ft!==void 0){xe.button===0&&ft.onClick(xe);return}}_(xe,fe)},[_,Y,xt,pn,io]);Kt("pointerup",Io,gt,!1);const _t=s.useCallback(z=>{var N,De;const J=Le.current;if(J===null)return;const Se=Y==null?void 0:Y.current,Me=z.target!==J&&z.target!==Se;let fe,be,Ae=!0;z instanceof MouseEvent?(fe=z.clientX,be=z.clientY,Ae=z.button<3):(fe=z.changedTouches[0].clientX,be=z.changedTouches[0].clientY);const Ge=xt(J,fe,be,z);Tn.current!==Ge.isTouch&&gn(Ge.isTouch),!Me&&z.cancelable&&Ae&&z.preventDefault();const[xe]=Ge.location;if(Ge.kind===Qn){const Be=pn(J,xe,fe,be);Be!==void 0&&Ge.button===0&&((N=vn.current)==null?void 0:N[0])===xe&&((De=vn.current)==null?void 0:De[1])===-1&&(Be.area==="menu"?v==null||v(xe,Be.bounds):Be.area==="indicator"&&(b==null||b(xe,Be.bounds)))}},[Y,xt,pn,v,b]);Kt("click",_t,gt,!1);const on=s.useCallback(z=>{const J=Le.current,Se=Y==null?void 0:Y.current;if(J===null||z.target!==J&&z.target!==Se||A===void 0)return;const Me=xt(J,z.clientX,z.clientY,z);A(Me,()=>{z.cancelable&&z.preventDefault()})},[Y,xt,A]);Kt("contextmenu",on,(Y==null?void 0:Y.current)??null,!1);const yr=s.useCallback(z=>{St.current=new Xo(z.map(J=>J.item)),Ft.current=z,wn.current(),St.current=void 0},[]),Ho=s.useMemo(()=>new Rd(yr),[yr]),Do=s.useRef(Ho);Do.current=Ho,s.useLayoutEffect(()=>{const z=Do.current;if(nn===void 0||nn[1]<0){z.setHovered(nn);return}const J=w(nn,!0),Se=He(J),Me=Se===void 0&&J.kind===te.Custom||(Se==null?void 0:Se.needsHover)!==void 0&&(typeof Se.needsHover=="boolean"?Se.needsHover:Se.needsHover(J));z.setHovered(Me?nn:void 0)},[w,He,nn]);const Fo=s.useRef(),Cr=s.useCallback(z=>{var Ge;const J=Le.current;if(J===null)return;const Se=Y==null?void 0:Y.current,Me=z.target!==J&&z.target!==Se,fe=xt(J,z.clientX,z.clientY,z);if(fe.kind!=="out-of-bounds"&&Me&&!Eo.current&&!fe.isTouch)return;const be=(xe,N)=>{Qt(De=>De===xe||(De==null?void 0:De[0][0])===(xe==null?void 0:xe[0][0])&&(De==null?void 0:De[0][1])===(xe==null?void 0:xe[0][1])&&((De==null?void 0:De[1][0])===(xe==null?void 0:xe[1][0])&&(De==null?void 0:De[1][1])===(xe==null?void 0:xe[1][1])||!N)?De:xe)};if(!Hs(fe,Fo.current))en(void 0),j==null||j(fe),be(fe.kind===Zr?void 0:[fe.location,[fe.localEventX,fe.localEventY]],!0),Fo.current=fe;else if(fe.kind==="cell"||fe.kind===Qn||fe.kind===kn){let xe=!1,N=!0;if(fe.kind==="cell"){const Be=w(fe.location);N=((Ge=He(Be))==null?void 0:Ge.needsHoverPosition)??Be.kind===te.Custom,xe=N}else xe=!0;const De=[fe.location,[fe.localEventX,fe.localEventY]];be(De,N),mn.current=De,xe&&Nn(new Xo([fe.location]))}const Ae=fe.location[0]>=(X?0:1);un(fe.kind===Qn&&fe.isEdge&&Ae&&W===!0),oi(fe.kind==="cell"&&fe.isFillHandle),se==null||se(z),Z(fe)},[Y,xt,X,W,se,Z,j,w,He,Nn]);Kt("pointermove",Cr,gt,!0);const To=s.useCallback(z=>{const J=Le.current;if(J===null)return;let Se,Me;R.current!==void 0&&(Se=Tt(J,R.current.cell[0],R.current.cell[1]),Me=R.current.cell),ne==null||ne({bounds:Se,stopPropagation:()=>z.stopPropagation(),preventDefault:()=>z.preventDefault(),cancel:()=>{},ctrlKey:z.ctrlKey,metaKey:z.metaKey,shiftKey:z.shiftKey,altKey:z.altKey,key:z.key,keyCode:z.keyCode,rawEvent:z,location:Me})},[ne,R,Tt]),Xn=s.useCallback(z=>{const J=Le.current;if(J===null)return;let Se,Me;R.current!==void 0&&(Se=Tt(J,R.current.cell[0],R.current.cell[1]),Me=R.current.cell),de==null||de({bounds:Se,stopPropagation:()=>z.stopPropagation(),preventDefault:()=>z.preventDefault(),cancel:()=>{},ctrlKey:z.ctrlKey,metaKey:z.metaKey,shiftKey:z.shiftKey,altKey:z.altKey,key:z.key,keyCode:z.keyCode,rawEvent:z,location:Me})},[de,R,Tt]),li=s.useCallback(z=>{if(Le.current=z,le!==void 0&&(le.current=z),V!=null&&V.eventTarget)_e.current=V.eventTarget;else if(z===null)_e.current=window;else{const J=z.getRootNode();J===document&&(_e.current=window),_e.current=J}},[le,V==null?void 0:V.eventTarget]),jo=s.useCallback(z=>{const J=Le.current;if(J===null||Te===!1||K){z.preventDefault();return}let Se,Me;const fe=xt(J,z.clientX,z.clientY);if(Te!==!0&&fe.kind!==Te){z.preventDefault();return}const be=(Be,rt)=>{Se=Be,Me=rt};let Ae,Ge,xe;const N=(Be,rt,ft)=>{Ae=Be,Ge=rt,xe=ft};let De=!1;if(re==null||re({...fe,setData:be,setDragImage:N,preventDefault:()=>De=!0,defaultPrevented:()=>De}),!De&&Se!==void 0&&Me!==void 0&&z.dataTransfer!==null)if(z.dataTransfer.setData(Se,Me),z.dataTransfer.effectAllowed="copyLink",Ae!==void 0&&Ge!==void 0&&xe!==void 0)z.dataTransfer.setDragImage(Ae,Ge,xe);else{const[Be,rt]=fe.location;if(rt!==void 0){const ft=document.createElement("canvas"),ht=Tt(J,Be,rt);sn(ht!==void 0);const It=Math.ceil(window.devicePixelRatio??1);ft.width=ht.width*It,ft.height=ht.height*It;const Ht=ft.getContext("2d");Ht!==null&&(Ht.scale(It,It),Ht.textBaseline="middle",rt===-1?(Ht.font=Pe.headerFontFull,Ht.fillStyle=Pe.bgHeader,Ht.fillRect(0,0,ft.width,ft.height),Es(Ht,0,0,ht.width,ht.height,Oe[Be],!1,Pe,!1,void 0,void 0,!1,0,ue,ae,!1)):(Ht.font=Pe.baseFontFull,Ht.fillStyle=Pe.bgCell,Ht.fillRect(0,0,ft.width,ft.height),Ms(Ht,w([Be,rt]),0,rt,!1,!1,0,0,ht.width,ht.height,!1,Pe,Pe.bgCell,kt,ue,1,void 0,!1,0,void 0,void 0,void 0,Co,He,()=>{},0))),ft.style.left="-100%",ft.style.position="absolute",ft.style.width=`${ht.width}px`,ft.style.height=`${ht.height}px`,document.body.append(ft),z.dataTransfer.setDragImage(ft,ht.width/2,ht.height/2),window.setTimeout(()=>{ft.remove()},0)}}else z.preventDefault()},[Te,K,xt,re,Tt,Pe,Oe,ue,ae,w,kt,Co,He]);Kt("dragstart",jo,(Y==null?void 0:Y.current)??null,!1,!1);const Kn=s.useRef(),si=s.useCallback(z=>{const J=Le.current;if(Fe!==void 0&&z.preventDefault(),J===null||We===void 0)return;const Se=xt(J,z.clientX,z.clientY),[Me,fe]=Se.location,be=Me-(X?0:1),[Ae,Ge]=Kn.current??[];(Ae!==be||Ge!==fe)&&(Kn.current=[be,fe],We([be,fe],z.dataTransfer))},[X,xt,We,Fe]);Kt("dragover",si,(Y==null?void 0:Y.current)??null,!1,!1);const Zo=s.useCallback(()=>{Kn.current=void 0,P==null||P()},[P]);Kt("dragend",Zo,(Y==null?void 0:Y.current)??null,!1,!1);const Ao=s.useCallback(z=>{const J=Le.current;if(J===null||Fe===void 0)return;z.preventDefault();const Se=xt(J,z.clientX,z.clientY),[Me,fe]=Se.location,be=Me-(X?0:1);Fe([be,fe],z.dataTransfer)},[X,xt,Fe]);Kt("drop",Ao,(Y==null?void 0:Y.current)??null,!1,!1);const lo=s.useCallback(()=>{oe==null||oe()},[oe]);Kt("dragleave",lo,(Y==null?void 0:Y.current)??null,!1,!1);const Po=s.useRef(R);Po.current=R;const zo=s.useRef(null),Lo=s.useCallback(z=>{var J;Le.current===null||!Le.current.contains(document.activeElement)||(z===null&&Po.current.current!==void 0?(J=le==null?void 0:le.current)==null||J.focus({preventScroll:!0}):z!==null&&z.focus({preventScroll:!0}),zo.current=z)},[le]);s.useImperativeHandle(t,()=>({focus:()=>{var J;const z=zo.current;z===null||!document.contains(z)?(J=le==null?void 0:le.current)==null||J.focus({preventScroll:!0}):z.focus({preventScroll:!0})},getBounds:(z,J)=>{if(!(le===void 0||le.current===null))return Tt(le.current,z??0,J??-1)},damage:gr,getMouseArgsForPosition:(z,J,Se)=>{if(!(le===void 0||le.current===null))return xt(le.current,z,J,Se)}}),[le,gr,Tt,xt]);const Ue=s.useRef(),Jo=Wa(()=>{var Ge,xe,N;if(n<50||(V==null?void 0:V.disableAccessibilityTree)===!0)return null;let z=Ti(Oe,at,n,G,Ce);const J=X?0:-1;!X&&((Ge=z[0])==null?void 0:Ge.sourceIndex)===0&&(z=z.slice(1));const[Se,Me]=((xe=R.current)==null?void 0:xe.cell)??[],fe=(N=R.current)==null?void 0:N.range,be=z.map(De=>De.sourceIndex),Ae=mo(l,Math.min(f,l+r));return Se!==void 0&&Me!==void 0&&!(be.includes(Se)&&Ae.includes(Me))&&Lo(null),s.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":f+1,"aria-multiselectable":"true","aria-colcount":Oe.length+J},s.createElement("thead",{role:"rowgroup"},s.createElement("tr",{role:"row","aria-rowindex":1},z.map(De=>s.createElement("th",{role:"columnheader","aria-selected":R.columns.hasIndex(De.sourceIndex),"aria-colindex":De.sourceIndex+1+J,tabIndex:-1,onFocus:Be=>{if(Be.target!==zo.current)return ye==null?void 0:ye([De.sourceIndex,-1])},key:De.sourceIndex},De.title)))),s.createElement("tbody",{role:"rowgroup"},Ae.map(De=>s.createElement("tr",{role:"row","aria-selected":R.rows.hasIndex(De),key:De,"aria-rowindex":De+2},z.map(Be=>{const rt=Be.sourceIndex,ft=Cn(rt,De),ht=Se===rt&&Me===De,It=fe!==void 0&&rt>=fe.x&&rt<fe.x+fe.width&&De>=fe.y&&De<fe.y+fe.height,Ht=`glide-cell-${rt}-${De}`,Sn=[rt,De],ge=w(Sn,!0);return s.createElement("td",{key:ft,role:"gridcell","aria-colindex":rt+1+J,"aria-selected":It,"aria-readonly":wo(ge)||!to(ge),id:Ht,"data-testid":Ht,onClick:()=>{const At=le==null?void 0:le.current;if(At!=null)return ne==null?void 0:ne({bounds:Tt(At,rt,De),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:Sn})},onFocusCapture:At=>{var Ot,ct;if(!(At.target===zo.current||((Ot=Ue.current)==null?void 0:Ot[0])===rt&&((ct=Ue.current)==null?void 0:ct[1])===De))return Ue.current=Sn,ye==null?void 0:ye(Sn)},ref:ht?Lo:void 0,tabIndex:-1},Dd(ge,He))})))))},[n,Oe,at,G,Ce,f,l,r,R,Lo,w,le,ne,Tt,ye],200),Bo=S===0||!D?0:at>S?1:hn(-Ce/100,0,1),bn=-l*32+ut,Wo=E?hn(-bn/100,0,1):0,xn=s.useMemo(()=>{if(!Bo&&!Wo)return null;const z={position:"absolute",top:0,left:Uo,width:n-Uo,height:o,opacity:Bo,pointerEvents:"none",transition:ke?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},J={position:"absolute",top:Ve,left:0,width:n,height:o,opacity:Wo,pointerEvents:"none",transition:Ct?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return s.createElement(s.Fragment,null,Bo>0&&s.createElement("div",{id:"shadow-x",style:z}),Wo>0&&s.createElement("div",{id:"shadow-y",style:J}))},[Bo,Wo,Uo,n,ke,Ve,o,Ct]),kr=s.useMemo(()=>({position:"absolute",top:0,left:0,zIndex:1,pointerEvents:"none"}),[]);return s.createElement(s.Fragment,null,s.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:-1,onKeyDown:To,onKeyUp:Xn,onFocus:L,onBlur:x,ref:li,style:ro},Jo),s.createElement("canvas",{ref:Je,style:kr}),xn)},Td=s.memo(s.forwardRef(Fd));function sr(e,t,n,o){return hn(Math.round(t-(e.growOffset??0)),Math.ceil(n),Math.floor(o))}const Ad=e=>{const[t,n]=s.useState(),[o,r]=s.useState(),[i,a]=s.useState(),[l,c]=s.useState(),[u,d]=s.useState(!1),[g,h]=s.useState(),[m,f]=s.useState(),[w,y]=s.useState(),[v,b]=s.useState(!1),[C,I]=s.useState(),{onHeaderMenuClick:L,onHeaderIndicatorClick:x,getCellContent:H,onColumnMoved:R,onColumnResize:S,onColumnResizeStart:A,onColumnResizeEnd:F,gridRef:D,maxColumnWidth:E,minColumnWidth:k,onRowMoved:$,lockColumns:_,onColumnProposeMove:se,onMouseDown:Z,onMouseUp:j,onItemHovered:G,onDragStart:X,canvasRef:ne}=e,de=(S??F??A)!==void 0,{columns:me,selection:le}=e,re=le.columns,P=s.useCallback(B=>{const[pe,q]=B.location;i!==void 0&&l!==pe&&pe>=_?(d(!0),c(pe)):m!==void 0&&q!==void 0?(b(!0),y(Math.max(0,q))):o===void 0&&!u&&!v&&(G==null||G(B))},[i,m,l,G,_,o,u,v]),Y=R!==void 0,K=s.useCallback(B=>{var pe;if(B.button===0){const[q,ae]=B.location;if(B.kind==="out-of-bounds"&&B.isEdge&&de){const ye=(pe=D==null?void 0:D.current)==null?void 0:pe.getBounds(me.length-1,-1);ye!==void 0&&(n(ye.x),r(me.length-1))}else if(B.kind==="header"&&q>=_){const ye=ne==null?void 0:ne.current;if(B.isEdge&&de&&ye){n(B.bounds.x),r(q);const Fe=ye.getBoundingClientRect().width/ye.offsetWidth,oe=B.bounds.width/Fe;A==null||A(me[q],oe,q,oe+(me[q].growOffset??0))}else B.kind==="header"&&Y&&(h(B.bounds.x),a(q))}else B.kind==="cell"&&_>0&&q===0&&ae!==void 0&&$!==void 0&&(I(B.bounds.y),f(ae))}Z==null||Z(B)},[Z,de,_,$,D,me,Y,A,ne]),Q=s.useCallback((B,pe)=>{u||v||L==null||L(B,pe)},[u,v,L]),Re=s.useCallback((B,pe)=>{u||v||x==null||x(B,pe)},[u,v,x]),Te=s.useRef(-1),W=s.useCallback(()=>{Te.current=-1,f(void 0),y(void 0),I(void 0),b(!1),a(void 0),c(void 0),h(void 0),d(!1),r(void 0),n(void 0)},[]),ee=s.useCallback((B,pe)=>{if(B.button===0){if(o!==void 0){if((re==null?void 0:re.hasIndex(o))===!0)for(const ae of re){if(ae===o)continue;const ye=me[ae],We=sr(ye,Te.current,k,E);S==null||S(ye,We,ae,We+(ye.growOffset??0))}const q=sr(me[o],Te.current,k,E);if(F==null||F(me[o],q,o,q+(me[o].growOffset??0)),re.hasIndex(o))for(const ae of re){if(ae===o)continue;const ye=me[ae],We=sr(ye,Te.current,k,E);F==null||F(ye,We,ae,We+(ye.growOffset??0))}}W(),i!==void 0&&l!==void 0&&(se==null?void 0:se(i,l))!==!1&&(R==null||R(i,l)),m!==void 0&&w!==void 0&&($==null||$(m,w))}j==null||j(B,pe)},[j,o,i,l,m,w,re,F,me,k,E,S,R,$,W,se]),we=s.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&(se==null?void 0:se(i,l))!==!1)return{src:i,dest:l}},[i,l,se]),qe=s.useCallback(B=>{const pe=ne==null?void 0:ne.current;if(i!==void 0&&g!==void 0)Math.abs(B.clientX-g)>20&&d(!0);else if(m!==void 0&&C!==void 0)Math.abs(B.clientY-C)>20&&b(!0);else if(o!==void 0&&t!==void 0&&pe){const ae=pe.getBoundingClientRect().width/pe.offsetWidth,ye=(B.clientX-t)/ae,We=me[o],Fe=sr(We,ye,k,E);if(S==null||S(We,Fe,o,Fe+(We.growOffset??0)),Te.current=ye,(re==null?void 0:re.first())===o)for(const oe of re){if(oe===o)continue;const ve=me[oe],ke=sr(ve,Te.current,k,E);S==null||S(ve,ke,oe,ke+(ve.growOffset??0))}}},[i,g,m,C,o,t,me,k,E,S,re,ne]),Pe=s.useCallback((B,pe)=>{if(m===void 0||w===void 0)return H(B,pe);let[q,ae]=B;return ae===w?ae=m:(ae>w&&(ae-=1),ae>=m&&(ae+=1)),H([q,ae],pe)},[m,w,H]),Et=s.useCallback(B=>{X==null||X(B),B.defaultPrevented()||W()},[W,X]);return s.createElement(Td,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,groupLevels:e.groupLevels,groupHeaderHeights:e.groupHeaderHeights,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:o,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,resizeIndicator:e.resizeIndicator,verticalBorder:e.verticalBorder,width:e.width,getCellContent:Pe,isResizing:o!==void 0,onHeaderMenuClick:Q,onHeaderIndicatorClick:Re,isDragging:u,onItemHovered:P,onDragStart:Et,onMouseDown:K,allowResize:de,onMouseUp:ee,dragAndDropState:we,onMouseMoveRaw:qe,ref:D})};function Pd(e){const t=s.useRef(null),[n,o]=s.useState({width:e==null?void 0:e[0],height:e==null?void 0:e[1]});return s.useLayoutEffect(()=>{const r=a=>{for(const l of a){const{width:c,height:u}=l&&l.contentRect||{};o(d=>d.width===c&&d.height===u?d:{width:c,height:u})}},i=new window.ResizeObserver(r);return t.current&&i.observe(t.current,void 0),()=>{i.disconnect()}},[t.current]),{ref:t,...n}}const zd=(e,t,n)=>{const o=s.useRef(null),r=s.useRef(null),i=s.useRef(null),a=s.useRef(0),l=s.useRef(t);l.current=t;const c=n.current;s.useEffect(()=>{const u=()=>{var h,m;if(r.current===!1&&c!==null){const f=[c.scrollLeft,c.scrollTop];if(((h=i.current)==null?void 0:h[0])===f[0]&&((m=i.current)==null?void 0:m[1])===f[1])if(a.current>10){i.current=null,r.current=null;return}else a.current++;else a.current=0,l.current(f[0],f[1]),i.current=f;o.current=window.setTimeout(u,8.333333333333334)}},d=()=>{r.current=!0,i.current=null,o.current!==null&&(window.clearTimeout(o.current),o.current=null)},g=h=>{h.touches.length===0&&(r.current=!1,a.current=0,o.current=window.setTimeout(u,8.333333333333334))};if(e&&c!==null){const h=c;return h.addEventListener("touchstart",d),h.addEventListener("touchend",g),()=>{h.removeEventListener("touchstart",d),h.removeEventListener("touchend",g),o.current!==null&&window.clearTimeout(o.current)}}},[e,c])},Ld=()=>e=>e.isSafari?"scroll":"auto",Bd=Yt("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[Ld()]}}),Wd=33554400,Od=5e6;function Nd(e){const[t,n]=s.useState(!1),o=typeof window>"u"?null:window,r=s.useRef(0);return Kt("touchstart",s.useCallback(()=>{window.clearTimeout(r.current),n(!0)},[]),o,!0,!1),Kt("touchend",s.useCallback(i=>{i.touches.length===0&&(r.current=window.setTimeout(()=>n(!1),e))},[e]),o,!0,!1),t}const $d=e=>{var le,re;const{children:t,clientHeight:n,scrollHeight:o,scrollWidth:r,update:i,draggable:a,className:l,preventDiagonalScrolling:c=!1,paddingBottom:u=0,paddingRight:d=0,rightElement:g,rightElementProps:h,kineticScrollPerfHack:m=!1,scrollRef:f,initialSize:w}=e,y=[],v=(h==null?void 0:h.sticky)??!1,b=(h==null?void 0:h.fill)??!1,C=s.useRef(0),I=s.useRef(0),L=s.useRef(null),x=typeof window>"u"?1:window.devicePixelRatio,H=s.useRef(x);s.useEffect(()=>{if(H.current!==x){C.current=0,I.current=0,H.current=x;const P=L.current;P!==null&&$.current(P.scrollLeft,P.scrollTop)}},[x]);const R=s.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),S=s.useRef(null),A=Nd(200),[F,D]=s.useState(!0),E=s.useRef(0);s.useLayoutEffect(()=>{if(!F||A||R.current.lockDirection===void 0)return;const P=L.current;if(P===null)return;const[Y,K]=R.current.lockDirection;Y!==void 0?P.scrollLeft=Y:K!==void 0&&(P.scrollTop=K),R.current.lockDirection=void 0},[A,F]);const k=s.useCallback((P,Y)=>{var q;const K=L.current;if(K===null)return;Y=Y??K.scrollTop,P=P??K.scrollLeft;const Q=R.current.scrollTop,Re=R.current.scrollLeft,Te=P-Re,W=Y-Q;A&&Te!==0&&W!==0&&(Math.abs(Te)>3||Math.abs(W)>3)&&c&&R.current.lockDirection===void 0&&(R.current.lockDirection=Math.abs(Te)<Math.abs(W)?[Re,void 0]:[void 0,Q]);const ee=R.current.lockDirection;P=(ee==null?void 0:ee[0])??P,Y=(ee==null?void 0:ee[1])??Y,R.current.scrollLeft=P,R.current.scrollTop=Y;const we=K.clientWidth,qe=K.clientHeight,Pe=Y,Et=I.current-Pe,B=K.scrollHeight-qe;I.current=Pe;let pe;if(B>0&&o>K.scrollHeight+5)if(Math.abs(Et)>2e3||Pe===0||Pe===B){const ae=Math.max(0,Math.min(1,Pe/B)),ye=o-qe;pe=ae*ye,C.current=pe}else C.current-=Et,pe=C.current;else pe=Pe,C.current=pe;pe=Math.max(0,Math.min(pe,o-qe)),C.current=pe,ee!==void 0&&(window.clearTimeout(E.current),D(!1),E.current=window.setTimeout(()=>D(!0),200)),i({x:P,y:pe,width:we-d,height:qe-u,paddingRight:((q=S.current)==null?void 0:q.clientWidth)??0})},[u,d,o,i,c,A]);zd(m&&jr.value,k,L);const $=s.useRef(k);$.current=k;const _=s.useRef(),se=s.useRef(!1);s.useLayoutEffect(()=>{se.current?k():se.current=!0},[k,u,d]);const Z=s.useCallback(P=>{L.current=P,f!==void 0&&(f.current=P)},[f]);let j=0,G=0;const X=Math.min(o,Wd);for(y.push(s.createElement("div",{key:j++,style:{width:r,height:0}}));G<X;){const P=Math.min(Od,X-G);y.push(s.createElement("div",{key:j++,style:{width:0,height:P}})),G+=P}const{ref:ne,width:de,height:me}=Pd(w);return typeof window<"u"&&(((le=_.current)==null?void 0:le.height)!==me||((re=_.current)==null?void 0:re.width)!==de)&&(window.setTimeout(()=>$.current(),0),_.current={width:de,height:me}),(de??0)===0||(me??0)===0?s.createElement("div",{ref:ne}):s.createElement("div",{ref:ne},s.createElement(Bd,{isSafari:jr.value},s.createElement("div",{className:"dvn-underlay"},t),s.createElement("div",{ref:Z,style:_.current,draggable:a,onDragStart:P=>{a||(P.stopPropagation(),P.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>k()},s.createElement("div",{className:"dvn-scroll-inner"+(g===void 0?" dvn-hidden":"")},s.createElement("div",{className:"dvn-stack"},y),g!==void 0&&s.createElement(s.Fragment,null,!b&&s.createElement("div",{className:"dvn-spacer"}),s.createElement("div",{ref:S,style:{height:me,maxHeight:n-Math.ceil(x%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:d,flexGrow:b?1:void 0,right:v?d??0:void 0,pointerEvents:"auto"}},g))))))},Gd=e=>{const{columns:t,rows:n,rowHeight:o,headerHeight:r,groupHeaderHeight:i,enableGroups:a,freezeColumns:l,experimental:c,nonGrowWidth:u,clientSize:d,className:g,onVisibleRegionChanged:h,scrollRef:m,preventDiagonalScrolling:f,rightElement:w,rightElementProps:y,overscrollX:v,overscrollY:b,initialSize:C,smoothScrollX:I=!1,smoothScrollY:L=!1,isDraggable:x}=e,{paddingRight:H,paddingBottom:R}=c??{},[S,A]=d,F=s.useRef(),D=s.useRef(),E=s.useRef(),k=s.useRef(),$=u+Math.max(0,v??0);let _=a?r+i:r;if(typeof o=="number")_+=n*o;else for(let G=0;G<n;G++)_+=o(G);b!==void 0&&(_+=b);const se=s.useRef(),Z=s.useCallback(()=>{var Re,Te;if(se.current===void 0)return;const G={...se.current};let X=0,ne=G.x<0?-G.x:0,de=0,me=0;G.x=G.x<0?0:G.x;let le=0;for(let W=0;W<l;W++)le+=t[W].width;for(const W of t){const ee=X-le;if(G.x>=ee+W.width)X+=W.width,me++,de++;else if(G.x>ee)X+=W.width,I?ne+=ee-G.x:me++,de++;else if(G.x+G.width>ee)X+=W.width,de++;else break}let re=0,P=0,Y=0;if(typeof o=="number")L?(P=Math.floor(G.y/o),re=P*o-G.y):P=Math.ceil(G.y/o),Y=Math.ceil(G.height/o)+P,re<0&&Y++;else{let W=0;for(let ee=0;ee<n;ee++){const we=o(ee),qe=W+(L?0:we/2);if(G.y>=W+we)W+=we,P++,Y++;else if(G.y>qe)W+=we,L?re+=qe-G.y:P++,Y++;else if(G.y+G.height>we/2+W)W+=we,Y++;else break}}P=Math.max(0,Math.min(P,n-1)),Y=Math.max(P,Math.min(Y,n));const K={x:me,y:P,width:de-me,height:Y-P},Q=F.current;(Q===void 0||Q.y!==K.y||Q.x!==K.x||Q.height!==K.height||Q.width!==K.width||D.current!==ne||E.current!==re||G.width!==((Re=k.current)==null?void 0:Re[0])||G.height!==((Te=k.current)==null?void 0:Te[1]))&&(h==null||h({x:me,y:P,width:de-me,height:Y-P},G.width,G.height,G.paddingRight??0,ne,re),F.current=K,D.current=ne,E.current=re,k.current=[G.width,G.height])},[t,o,n,h,l,I,L]),j=s.useCallback(G=>{se.current=G,Z()},[Z]);return s.useEffect(()=>{Z()},[Z]),s.createElement($d,{scrollRef:m,className:g,kineticScrollPerfHack:c==null?void 0:c.kineticScrollPerfHack,preventDiagonalScrolling:f,draggable:x===!0||typeof x=="string",scrollWidth:$+(H??0),scrollHeight:_+(R??0),clientHeight:A,rightElement:w,paddingBottom:R,paddingRight:H,rightElementProps:y,update:j,initialSize:C},s.createElement(Ad,{eventTargetRef:m,width:S,height:A,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,groupLevels:e.groupLevels,groupHeaderHeights:e.groupHeaderHeights,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onHeaderIndicatorClick:e.onHeaderIndicatorClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,resizeIndicator:e.resizeIndicator}))},Xd=Yt("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1}),Kd=s.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},s.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),Yd=s.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},s.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),_d=s.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},s.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),Vd=10,Ud=e=>{const{canvasRef:t,cellYOffset:n,rows:o,columns:r,searchInputRef:i,searchValue:a,searchResults:l,onSearchValueChange:c,getCellsForSelection:u,onSearchResultsChanged:d,showSearch:g=!1,onSearchClose:h}=e,[m]=s.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[f,w]=s.useState(""),y=a??f,v=s.useCallback(X=>{w(X),c==null||c(X)},[c]),[b,C]=s.useState(),I=s.useRef(b);I.current=b,s.useEffect(()=>{l!==void 0&&(l.length>0?C(X=>({rowsSearched:o,results:l.length,selectedIndex:(X==null?void 0:X.selectedIndex)??-1})):C(void 0))},[o,l]);const L=s.useRef();L.current===void 0&&(L.current=new AbortController);const x=s.useRef(),[H,R]=s.useState([]),S=l??H,A=s.useCallback(()=>{x.current!==void 0&&(window.cancelAnimationFrame(x.current),x.current=void 0),L.current!==void 0&&L.current.abort(),L.current=new AbortController},[]),F=s.useRef(n);F.current=n;const D=s.useCallback(X=>{const ne=new RegExp(X.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i");let de=F.current,me=Math.min(10,o),le=0;C(void 0),R([]);const re=[],P=async()=>{var Pe;if(u===void 0)return;const Y=performance.now(),K=o-le;let Q=u({x:0,y:de,width:r.length,height:Math.min(me,K,o-de)},L.current.signal);typeof Q=="function"&&(Q=await Q());let Re=!1;for(const[Et,B]of Q.entries())for(const[pe,q]of B.entries()){let ae;switch(q.kind){case te.Text:case te.Number:ae=q.displayData;break;case te.Uri:case te.Markdown:ae=q.data;break;case te.Boolean:ae=typeof q.data=="boolean"?q.data.toString():void 0;break;case te.Image:case te.Bubble:ae=q.data.join("🐳");break;case te.Custom:ae=q.copyData;break}ae!==void 0&&ne.test(ae)&&(re.push([pe,Et+de]),Re=!0)}const Te=performance.now();Re&&R([...re]),le+=Q.length,sn(le<=o);const W=((Pe=I.current)==null?void 0:Pe.selectedIndex)??-1;C({results:re.length,rowsSearched:le,selectedIndex:W}),d==null||d(re,W),de+me>=o?de=0:de+=me;const ee=Te-Y,we=Math.max(ee,1),qe=Vd/we;me=Math.ceil(me*qe),le<o&&re.length<1e3&&(x.current=window.requestAnimationFrame(P))};A(),x.current=window.requestAnimationFrame(P)},[A,r.length,u,d,o]),E=s.useCallback(()=>{var X;h==null||h(),C(void 0),R([]),d==null||d([],-1),A(),(X=t==null?void 0:t.current)==null||X.focus()},[A,t,h,d]),k=s.useCallback(X=>{v(X.target.value),l===void 0&&(X.target.value===""?(C(void 0),R([]),A()):D(X.target.value))},[D,A,v,l]);s.useEffect(()=>{i.current!==null&&(v(""),C(void 0),H.length>0&&(R([]),d==null||d([],-1)),g?i.current.focus({preventScroll:!0}):A())},[g,i]);const $=s.useCallback(X=>{var de;if((de=X==null?void 0:X.stopPropagation)==null||de.call(X),b===void 0||b.results===0)return;const ne=(b.selectedIndex+1)%b.results;C({...b,selectedIndex:ne}),d==null||d(S,ne)},[b,d,S]),_=s.useCallback(X=>{var de;if((de=X==null?void 0:X.stopPropagation)==null||de.call(X),b===void 0||b.results===0)return;let ne=(b.selectedIndex-1)%b.results;ne<0&&(ne+=b.results),C({...b,selectedIndex:ne}),d==null||d(S,ne)},[d,S,b]),se=s.useCallback(X=>{(X.ctrlKey||X.metaKey)&&X.nativeEvent.code==="KeyF"||X.key==="Escape"?(E(),X.stopPropagation(),X.preventDefault()):X.key==="Enter"&&(X.shiftKey?_():$())},[E,$,_]);s.useEffect(()=>()=>{A()},[A]);const[Z,j]=s.useState(!1);s.useEffect(()=>{if(g)j(!0);else{const X=setTimeout(()=>j(!1),150);return()=>clearTimeout(X)}},[g]);const G=s.useMemo(()=>{if(!g&&!Z)return null;let X;b!==void 0&&(X=b.results>=1e3?"over 1000":`${b.results} result${b.results!==1?"s":""}`,b.selectedIndex>=0&&(X=`${b.selectedIndex+1} of ${X}`));const ne=le=>{le.stopPropagation()},me={width:`${o>0?Math.floor(((b==null?void 0:b.rowsSearched)??0)/o*100):0}%`};return s.createElement(Xd,{className:"gdg-search-bar"+(g?"":" out"),onMouseDown:ne,onMouseMove:ne,onMouseUp:ne,onClick:ne},s.createElement("div",{className:"gdg-search-bar-inner"},s.createElement("input",{id:m,"aria-hidden":!g,"data-testid":"search-input",ref:i,onChange:k,value:y,tabIndex:g?void 0:-1,onKeyDownCapture:se}),s.createElement("button",{type:"button","aria-label":"Previous Result","aria-hidden":!g,tabIndex:g?void 0:-1,onClick:_,disabled:((b==null?void 0:b.results)??0)===0},Kd),s.createElement("button",{type:"button","aria-label":"Next Result","aria-hidden":!g,tabIndex:g?void 0:-1,onClick:$,disabled:((b==null?void 0:b.results)??0)===0},Yd),h!==void 0&&s.createElement("button",{type:"button","aria-label":"Close Search","aria-hidden":!g,"data-testid":"search-close-button",tabIndex:g?void 0:-1,onClick:E},_d)),b!==void 0?s.createElement(s.Fragment,null,s.createElement("div",{className:"gdg-search-status"},s.createElement("div",{"data-testid":"search-result-area"},X)),s.createElement("div",{className:"gdg-search-progress",style:me})):s.createElement("div",{className:"gdg-search-status"},s.createElement("label",{htmlFor:m},"Type to search")))},[g,Z,b,o,m,i,k,y,se,_,$,h,E]);return s.createElement(s.Fragment,null,s.createElement(Gd,{prelightCells:S,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,groupLevels:e.groupLevels,groupHeaderHeights:e.groupHeaderHeights,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onHeaderIndicatorClick:e.onHeaderIndicatorClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,resizeIndicator:e.resizeIndicator}),G)},qd=()=>e=>Math.max(16,e.targetHeight-10),jd=Yt("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[qd(),"px"]}}),Zd=e=>{const{bounds:t,group:n,onClose:o,canvasBounds:r,onFinish:i}=e,[a,l]=Rt.useState(n);return Rt.createElement(ls,{style:{position:"absolute",left:t.x-r.left+1,top:t.y-r.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:o},Rt.createElement(jd,{targetHeight:t.height,"data-testid":"group-rename-input",value:a,onBlur:o,onFocus:c=>c.target.setSelectionRange(0,a.length),onChange:c=>l(c.target.value),onKeyDown:c=>{c.key==="Enter"?i(a):c.key==="Escape"&&o()},autoFocus:!0}))};function Jd(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Ke(e,t,n){const o=Ds(e,t);return o&&(n.didMatch=!0),o}function Ds(e,t){if(e.length===0)return!1;if(e.includes("|")){const c=e.split("|");for(const u of c)if(Ds(u,t))return!0;return!1}let n=!1,o=!1,r=!1,i=!1;const a=e.split("+"),l=a.pop();if(!Jd(l,t))return!1;if(a[0]==="any")return!0;for(const c of a)switch(c){case"ctrl":n=!0;break;case"shift":o=!0;break;case"alt":r=!0;break;case"meta":i=!0;break;case"primary":ei.value?i=!0:n=!0;break}return t.altKey===r&&t.ctrlKey===n&&t.shiftKey===o&&t.metaKey===i}function Qd(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string",doNotEscape:!0};switch(e.kind){case te.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===Bi?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case te.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case te.Image:case te.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case te.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case te.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case te.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case te.Markdown:case te.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case te.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case te.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case te.Protected:return{formatted:"************",rawValue:"",format:"string"};default:dr()}}function eu(e,t){return e.map((o,r)=>{const i=t[r];return o.map(a=>a.span!==void 0&&a.span[0]!==i?{formatted:"",rawValue:"",format:"string"}:Qd(a))})}function Nl(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function tu(e){var n;const t=[];for(const o of e){const r=[];for(const i of o)i.format==="url"?r.push(((n=i.rawValue)==null?void 0:n.toString())??""):i.format==="string-array"?r.push(i.formatted.map(a=>Nl(a,!0)).join(",")):r.push(i.doNotEscape===!0?i.formatted:Nl(i.formatted,!1));t.push(r.join("	"))}return t.join(`
`)}function Mi(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function $l(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function nu(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function ou(e){var n;const t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(const o of e){t.push("<tr>");for(const r of o){const i=`gdg-format="${r.format}"`;r.format==="url"?t.push(`<td ${i}><a href="${r.rawValue}">${Mi(r.formatted)}</a></td>`):r.format==="string-array"?t.push(`<td ${i}><ol>${r.formatted.map((a,l)=>`<li gdg-raw-value=${$l(r.rawValue[l])}>`+Mi(a)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${$l(((n=r.rawValue)==null?void 0:n.toString())??"")} ${i}>${Mi(r.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function ru(e,t){const n=eu(e,t),o=tu(n),r=ou(n);return{textPlain:o,textHtml:r}}function Gl(e){var a;const t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");const n=t.querySelector("table");if(n===null)return;const o=[n],r=[];let i;for(;o.length>0;){const l=o.pop();if(l===void 0)break;if(l instanceof HTMLTableElement||l.nodeName==="TBODY")o.push(...[...l.children].reverse());else if(l instanceof HTMLTableRowElement)i!==void 0&&r.push(i),i=[],o.push(...[...l.children].reverse());else if(l instanceof HTMLTableCellElement){const c=l.cloneNode(!0),d=c.children.length===1&&c.children[0].nodeName==="P"?c.children[0]:null,g=(d==null?void 0:d.children.length)===1&&d.children[0].nodeName==="FONT",h=c.querySelectorAll("br");for(const w of h)w.replaceWith(`
`);const m=c.getAttribute("gdg-raw-value"),f=c.getAttribute("gdg-format")??"string";if(c.querySelector("a")!==null)i==null||i.push({rawValue:((a=c.querySelector("a"))==null?void 0:a.getAttribute("href"))??"",formatted:c.textContent??"",format:f});else if(c.querySelector("ol")!==null){const w=c.querySelectorAll("li");i==null||i.push({rawValue:[...w].map(y=>y.getAttribute("gdg-raw-value")??""),formatted:[...w].map(y=>y.textContent??""),format:"string-array"})}else if(m!==null)i==null||i.push({rawValue:nu(m),formatted:c.textContent??"",format:f});else{let w=c.textContent??"";g&&(w=w.replace(/\n(?!\n)/g,"")),i==null||i.push({rawValue:w??"",formatted:w??"",format:f})}}}return i!==void 0&&r.push(i),r}function iu(e,t,n,o,r){var l;const i=e;if(o==="allowPartial"||e.current===void 0||t===void 0)return e;let a=!1;do{if((e==null?void 0:e.current)===void 0)break;const c=(l=e.current)==null?void 0:l.range,u=[];if(c.width>2){const h=t({x:c.x,y:c.y,width:1,height:c.height},r.signal);if(typeof h=="function")return i;u.push(...h);const m=t({x:c.x+c.width-1,y:c.y,width:1,height:c.height},r.signal);if(typeof m=="function")return i;u.push(...m)}else{const h=t({x:c.x,y:c.y,width:c.width,height:c.height},r.signal);if(typeof h=="function")return i;u.push(...h)}let d=c.x-n,g=c.x+c.width-1-n;for(const h of u)for(const m of h)m.span!==void 0&&(d=Math.min(m.span[0],d),g=Math.max(m.span[1],g));d===c.x-n&&g===c.x+c.width-1-n?a=!0:e={current:{cell:e.current.cell??[0,0],range:{x:d+n,y:c.y,width:g-d+1,height:c.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!a);return e}function Xl(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function lu(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));const n=[];let o=[],r=0,i=t.None;e=e.replace(/\r\n/g,`
`);let a=0;for(const l of e){switch(i){case t.None:l==="	"||l===`
`?(o.push(e.slice(r,a)),r=a+1,l===`
`&&(n.push(o),o=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(o.push(Xl(e.slice(r,a))),r=a+1,l===`
`&&(n.push(o),o=[])),i=t.None);break}a++}return r<e.length&&o.push(Xl(e.slice(r,e.length))),n.push(o),n.map(l=>l.map(c=>({rawValue:c,formatted:c,format:"string"})))}function Kl(e,t,n){var l;const o=ru(e,t),r=c=>{var u;(u=window.navigator.clipboard)==null||u.writeText(c)},i=(c,u)=>{var d;return((d=window.navigator.clipboard)==null?void 0:d.write)===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([c],{type:"text/plain"}),"text/html":new Blob([u],{type:"text/html"})})]),!0)},a=(c,u)=>{var d,g;try{if(n===void 0||n.clipboardData===null)throw new Error("No clipboard data");(d=n==null?void 0:n.clipboardData)==null||d.setData("text/plain",c),(g=n==null?void 0:n.clipboardData)==null||g.setData("text/html",u)}catch{i(c,u)||r(c)}};((l=window.navigator.clipboard)==null?void 0:l.write)!==void 0||(n==null?void 0:n.clipboardData)!==void 0?a(o.textPlain,o.textHtml):r(o.textPlain),n==null||n.preventDefault()}function Ui(e){return e!==!0}function su(e){const{state:t,keybindings:n,overlayOpen:o,columnSelect:r,rowSelect:i,rangeSelect:a,editOnType:l,trapFocus:c,showTrailingBlankRow:u,columnsInLength:d,rowGroupingNavBehavior:g,mapper:h,onKeyDownIn:m,onSelectionCleared:f,onCellActivated:w,onDelete:y,getCellContent:v,setSelectedColumns:b,setSelectedRows:C,setShowSearchInner:I,searchInputRef:L,adjustSelection:x,updateSelectedCell:H,deleteRange:R,fillDown:S,fillRight:A,appendRow:F,getCustomNewRowTargetColumn:D,scrollToRef:E}=e,{gridSelection:k,gridRef:$,visibleRegionRef:_,rowMarkerOffset:se,rows:Z,setGridSelection:j,getMangledCellContent:G,mangledOnCellsEdited:X,setOverlay:ne,reselect:de,focus:me}=t,le=s.useCallback(P=>{var ae,ye,We,Fe;const Y=()=>{P.stopPropagation(),P.preventDefault()},K={didMatch:!1},{bounds:Q}=P,Re=k.columns,Te=k.rows,W=n;if(!o&&Ke(W.clear,P,K)){const oe=((ae=k.current)==null?void 0:ae.cell)??[se,0];j({columns:ot.empty(),rows:ot.empty(),current:{cell:oe,range:{x:oe[0],y:oe[1],width:1,height:1},rangeStack:[]}},!1),f==null||f(),me()}else if(!o&&Ke(W.selectAll,P,K))j({columns:ot.empty(),rows:ot.empty(),current:{cell:((ye=k.current)==null?void 0:ye.cell)??[se,0],range:{x:se,y:0,width:d,height:Z},rangeStack:[]}},!1);else if(Ke(W.search,P,K))(We=L==null?void 0:L.current)==null||We.focus({preventScroll:!0}),I(!0);else if(Ke(W.delete,P,K)){const oe=(y==null?void 0:y(k))??!0;if(oe!==!1){const ve=oe===!0?k:oe;if(ve.current!==void 0){R(ve.current.range);for(const ke of ve.current.rangeStack)R(ke)}for(const ke of ve.rows)R({x:se,y:ke,width:d,height:1});for(const ke of ve.columns)R({x:ke,y:0,width:1,height:Z})}}if(K.didMatch)return Y(),!0;if(k.current===void 0)return!1;let[ee,we]=k.current.cell;const[,qe]=k.current.cell;let Pe=!1,Et=!1;if(Ke(W.scrollToSelectedCell,P,K))E.current(ee-se,we);else if(r!=="none"&&Ke(W.selectColumn,P,K))Re.hasIndex(ee)?b(Re.remove(ee),void 0,!0):r==="single"?b(ot.fromSingleSelection(ee),void 0,!0):b(void 0,ee,!0);else if(i!=="none"&&Ke(W.selectRow,P,K))Te.hasIndex(we)?C(Te.remove(we),void 0,!0):i==="single"?C(ot.fromSingleSelection(we),void 0,!0):C(void 0,we,!0);else if(!o&&Q!==void 0&&Ke(W.activateCell,P,K))if(we===Z&&u)window.setTimeout(()=>{const oe=D(ee);F(oe??ee)},0);else{const oe={inputType:"keyboard",key:P.key},ve=G([ee,we]);ve.kind===te.Boolean&&ve.readonly!==!0?(w==null||w([ee-se,we],oe),X([{location:[ee,we],value:{...ve,data:Ui(ve.data)}}]),(Fe=$.current)==null||Fe.damage([{cell:[ee,we]}])):(w==null||w([ee-se,we],oe),de(Q,oe))}else k.current.range.height>1&&Ke(W.downFill,P,K)?S():k.current.range.width>1&&Ke(W.rightFill,P,K)?A():Ke(W.goToNextPage,P,K)?we+=Math.max(1,_.current.height-4):Ke(W.goToPreviousPage,P,K)?we-=Math.max(1,_.current.height-4):Ke(W.goToFirstCell,P,K)?(ne(void 0),we=0,ee=0):Ke(W.goToLastCell,P,K)?(ne(void 0),we=Number.MAX_SAFE_INTEGER,ee=Number.MAX_SAFE_INTEGER):Ke(W.selectToFirstCell,P,K)?(ne(void 0),x([-2,-2])):Ke(W.selectToLastCell,P,K)?(ne(void 0),x([2,2])):o?(Ke(W.closeOverlay,P,K)&&ne(void 0),Ke(W.acceptOverlayDown,P,K)&&(ne(void 0),we++),Ke(W.acceptOverlayUp,P,K)&&(ne(void 0),we--),Ke(W.acceptOverlayLeft,P,K)&&(ne(void 0),ee--),Ke(W.acceptOverlayRight,P,K)&&(ne(void 0),ee++)):(Ke(W.goDownCell,P,K)?we+=1:Ke(W.goUpCell,P,K)?we-=1:Ke(W.goRightCell,P,K)?ee+=1:Ke(W.goLeftCell,P,K)?ee-=1:Ke(W.goDownCellRetainSelection,P,K)?(we+=1,Pe=!0):Ke(W.goUpCellRetainSelection,P,K)?(we-=1,Pe=!0):Ke(W.goRightCellRetainSelection,P,K)?(ee+=1,Pe=!0):Ke(W.goLeftCellRetainSelection,P,K)?(ee-=1,Pe=!0):Ke(W.goToLastRow,P,K)?we=Z-1:Ke(W.goToFirstRow,P,K)?we=Number.MIN_SAFE_INTEGER:Ke(W.goToLastColumn,P,K)?ee=Number.MAX_SAFE_INTEGER:Ke(W.goToFirstColumn,P,K)?ee=Number.MIN_SAFE_INTEGER:(a==="rect"||a==="multi-rect")&&(Ke(W.selectGrowDown,P,K)?x([0,1]):Ke(W.selectGrowUp,P,K)?x([0,-1]):Ke(W.selectGrowRight,P,K)?x([1,0]):Ke(W.selectGrowLeft,P,K)?x([-1,0]):Ke(W.selectToLastRow,P,K)?x([0,2]):Ke(W.selectToFirstRow,P,K)?x([0,-2]):Ke(W.selectToLastColumn,P,K)?x([2,0]):Ke(W.selectToFirstColumn,P,K)&&x([-2,0])),Et=K.didMatch);if(g!==void 0&&g!=="normal"&&we!==qe){const oe=g==="skip-up"||g==="skip"||g==="block",ve=g==="skip-down"||g==="skip"||g==="block",ke=we<qe;if(ke&&oe){for(;we>=0&&h(we).isGroupHeader;)we--;we<0&&(we=qe)}else if(!ke&&ve){for(;we<Z&&h(we).isGroupHeader;)we++;we>=Z&&(we=qe)}}const pe=H(ee,we,!1,Pe),q=K.didMatch;return q&&(pe||!Et||c)&&Y(),q},[g,o,k,n,r,i,a,se,h,Z,H,j,f,d,y,c,R,b,C,u,D,F,w,de,S,A,x,G,X,$,ne,me,_,L,I,E]),re=s.useCallback(P=>{let Y=!1;if(m!==void 0&&m({...P,...P.location&&{location:[P.location[0]-se,P.location[1]]},cancel:()=>{Y=!0}}),Y||le(P)||k.current===void 0)return;const[K,Q]=k.current.cell,Re=_.current,Te=P.keyCode===229,W=l&&!P.metaKey&&!P.ctrlKey&&P.key.length===1&&/[\p{L}\p{M}\p{N}\p{S}\p{P}]/u.test(P.key);if((Te||W)&&P.bounds!==void 0&&to(v([K-se,Math.max(0,Math.min(Q,Z-1))]))){if((!u||Q!==Z)&&(Re.y>Q||Q>Re.y+Re.height||Re.x>K||K>Re.x+Re.width))return;if(P.stopPropagation(),P.preventDefault(),Te){const ee={inputType:"keyboard",key:""};w==null||w([K-se,Q],ee),de(P.bounds,ee,"")}else{const ee={inputType:"keyboard",key:P.key};w==null||w([K-se,Q],ee),de(P.bounds,ee,P.key)}}},[l,m,le,k,v,se,Z,u,w,de,_]);return{handleFixedKeybindings:le,onKeyDown:re}}function au(e,t,n,o,r,i,a){const l=Rt.useCallback((d,g,h,m)=>{var C;(i==="cell"||i==="multi-cell")&&d!==void 0&&(d={...d,range:{x:d.cell[0],y:d.cell[1],width:1,height:1}}),!a&&d!==void 0&&d.range.width>1&&(d={...d,range:{...d.range,width:1,x:d.cell[0]}});const f=n==="mixed"&&(h||m==="drag")||n==="additive",w=(o==="mixed"||o==="additive")&&f,y=h||(r==="mixed"||r==="additive")&&f;let v={current:d===void 0?void 0:{...d,rangeStack:m==="drag"?((C=e.current)==null?void 0:C.rangeStack)??[]:[]},columns:w?e.columns:ot.empty(),rows:y?e.rows:ot.empty()};h&&(i==="multi-rect"||i==="multi-cell")&&v.current!==void 0&&e.current!==void 0&&(v={...v,current:{...v.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(v,g)},[o,e,n,i,a,r,t]),c=Rt.useCallback((d,g,h)=>{d=d??e.rows,g!==void 0&&(d=d.add(g));let m;if(r==="exclusive"&&d.length>0)m={current:void 0,columns:ot.empty(),rows:d};else{const f=h&&n==="mixed"||n==="additive",w=h&&o==="mixed"||o==="additive";m={current:f?e.current:void 0,columns:w?e.columns:ot.empty(),rows:d}}t(m,!1)},[o,e,n,r,t]),u=Rt.useCallback((d,g,h)=>{d=d??e.columns,g!==void 0&&(d=d.add(g));let m;if(o==="exclusive"&&d.length>0)m={current:void 0,rows:ot.empty(),columns:d};else{const f=h&&n==="mixed"||n==="additive",w=h&&r==="mixed"||r==="additive";m={current:f?e.current:void 0,rows:w?e.rows:ot.empty(),columns:d}}t(m,!1)},[o,e,n,r,t]);return[l,c,u]}function cu(e,t,n,o,r){const i=s.useCallback(u=>{if(e===!0){const d=[];for(let g=u.y;g<u.y+u.height;g++){const h=[];for(let m=u.x;m<u.x+u.width;m++)m<0||g>=r?h.push({kind:te.Loading,allowOverlay:!1}):h.push(t([m,g]));d.push(h)}return d}return(e==null?void 0:e(u,o.signal))??[]},[o.signal,t,e,r]),a=e!==void 0?i:void 0,l=s.useCallback(u=>{if(a===void 0)return[];const d={...u,x:u.x-n};if(d.x<0){d.x=0,d.width--;const g=a(d,o.signal);return typeof g=="function"?async()=>(await g()).map(h=>[{kind:te.Loading,allowOverlay:!1},...h]):g.map(h=>[{kind:te.Loading,allowOverlay:!1},...h])}return a(d,o.signal)},[o.signal,a,n]);return[e!==void 0?l:void 0,a]}function Yl(e){return typeof e=="string"?e:`${e}px`}const du=()=>e=>e.innerWidth,uu=()=>e=>e.innerHeight,fu=Yt("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[du()],"wmyidgi-1":[uu()]}}),hu=e=>{const{inWidth:t,inHeight:n,children:o,...r}=e;return s.createElement(fu,{innerHeight:Yl(n),innerWidth:Yl(t),...r},o)},gu=2,mu=1300;function wu(e,t,n){const o=Rt.useRef(0),[r,i]=e??[0,0];Rt.useEffect(()=>{if(r===0&&i===0){o.current=0;return}let a=!1,l=0;const c=u=>{var d;if(!a){if(l===0)l=u;else{const g=u-l;o.current=Math.min(1,o.current+g/mu);const h=o.current**1.618*g*gu;(d=t.current)==null||d.scrollBy(r*h,i*h),l=u,n==null||n()}window.requestAnimationFrame(c)}};return window.requestAnimationFrame(c),()=>{a=!0}},[t,r,i,n])}function pu(e){const{state:t,keybindings:n,getCellsForSelection:o,coercePasteValue:r,onPaste:i,copyHeaders:a,columnsIn:l,onDelete:c,deleteRange:u,safeWindow:d}=e,{gridSelection:g,gridRef:h,scrollRef:m,canvasRef:f,abortControllerRef:w,rowMarkerOffset:y,mangledCols:v,mangledRows:b,rows:C,getMangledCellContent:I,mangledOnCellsEdited:L,getCellRenderer:x}=t,H=s.useCallback(async A=>{var _,se,Z;if(!n.paste)return;function F(j,G,X,ne){var me,le;const de=typeof X=="object"?(X==null?void 0:X.join(`
`))??"":(X==null?void 0:X.toString())??"";if(!wo(j)&&to(j)&&j.readonly!==!0){const re=r==null?void 0:r(de,j);if(re!==void 0&&Wn(re))return{location:G,value:re};const P=x(j);if(P===void 0)return;if(P.kind===te.Custom){sn(j.kind===te.Custom);const Y=(me=P.onPaste)==null?void 0:me.call(P,de,j.data);return Y===void 0?void 0:{location:G,value:{...j,data:Y}}}else{const Y=(le=P.onPaste)==null?void 0:le.call(P,de,j,{formatted:ne,formattedString:typeof ne=="string"?ne:ne==null?void 0:ne.join(`
`),rawValue:X});return Y===void 0?void 0:(sn(Y.kind===j.kind),{location:G,value:Y})}}}const D=g.columns,E=g.rows,k=((_=m.current)==null?void 0:_.contains(document.activeElement))===!0||((se=f.current)==null?void 0:se.contains(document.activeElement))===!0;let $;if(g.current!==void 0?$=[g.current.range.x,g.current.range.y]:D.length===1?$=[D.first()??0,0]:E.length===1&&($=[y,E.first()??0]),k&&$!==void 0){let j,G;const X="text/plain",ne="text/html";if(navigator.clipboard.read!==void 0){const re=await navigator.clipboard.read();for(const P of re){if(P.types.includes(ne)){const K=await(await P.getType(ne)).text(),Q=Gl(K);if(Q!==void 0){j=Q;break}}P.types.includes(X)&&(G=await(await P.getType(X)).text())}}else if(navigator.clipboard.readText!==void 0)G=await navigator.clipboard.readText();else if(A!==void 0&&(A==null?void 0:A.clipboardData)!==null){if(A.clipboardData.types.includes(ne)){const re=A.clipboardData.getData(ne);j=Gl(re)}j===void 0&&A.clipboardData.types.includes(X)&&(G=A.clipboardData.getData(X))}else return;const[de,me]=$,le=[];do{if(i===void 0){const re=I($),P=G??(j==null?void 0:j.map(K=>K.map(Q=>Q.rawValue).join("	")).join("	"))??"",Y=F(re,$,P,void 0);Y!==void 0&&le.push(Y);break}if(j===void 0){if(G===void 0)return;j=lu(G)}if(i===!1||typeof i=="function"&&(i==null?void 0:i([$[0]-y,$[1]],j.map(re=>re.map(P=>{var Y;return((Y=P.rawValue)==null?void 0:Y.toString())??""}))))!==!0)return;for(const[re,P]of j.entries()){if(re+me>=C)break;for(const[Y,K]of P.entries()){const Q=[Y+de,re+me],[Re,Te]=Q;if(Re>=v.length||Te>=b)continue;const W=I(Q),ee=F(W,Q,K.rawValue,K.formatted);ee!==void 0&&le.push(ee)}}}while(!1);L(le),(Z=h.current)==null||Z.damage(le.map(re=>({cell:re.location})))}},[r,x,I,g,n.paste,m,f,v.length,L,b,i,y,C,h]);Kt("paste",H,d,!1,!0);const R=s.useCallback(async(A,F)=>{var _,se;if(!n.copy)return;const D=F===!0||((_=m.current)==null?void 0:_.contains(document.activeElement))===!0||((se=f.current)==null?void 0:se.contains(document.activeElement))===!0,E=g.columns,k=g.rows,$=(Z,j)=>{if(!a)Kl(Z,j,A);else{const G=j.map(X=>({kind:te.Text,data:l[X].title,displayData:l[X].title,allowOverlay:!1}));Kl([G,...Z],j,A)}};if(D&&o!==void 0){if(g.current!==void 0){let Z=o(g.current.range,w.current.signal);typeof Z!="object"&&(Z=await Z()),$(Z,mo(g.current.range.x-y,g.current.range.x+g.current.range.width-y))}else if(k!==void 0&&k.length>0){const j=[...k].map(G=>{const X=o({x:y,y:G,width:l.length,height:1},w.current.signal);return typeof X=="object"?X[0]:X().then(ne=>ne[0])});if(j.some(G=>G instanceof Promise)){const G=await Promise.all(j);$(G,mo(l.length))}else $(j,mo(l.length))}else if(E.length>0){const Z=[],j=[];for(const G of E){let X=o({x:G,y:0,width:1,height:C},w.current.signal);typeof X!="object"&&(X=await X()),Z.push(X),j.push(G-y)}if(Z.length===1)$(Z[0],j);else{const G=Z.reduce((X,ne)=>X.map((de,me)=>[...de,...ne[me]]));$(G,j)}}}},[l,o,g,n.copy,y,m,f,w,C,a]);Kt("copy",R,d,!1,!1);const S=s.useCallback(async A=>{var D,E;if(!(!n.cut||!(((D=m.current)==null?void 0:D.contains(document.activeElement))===!0||((E=f.current)==null?void 0:E.contains(document.activeElement))===!0))&&(await R(A),g.current!==void 0)){let k={current:{cell:g.current.cell,range:g.current.range,rangeStack:[]},rows:ot.empty(),columns:ot.empty()};const $=c==null?void 0:c(k);if($===!1||(k=$===void 0||$===!0?k:$,k.current===void 0))return;u(k.current.range)}},[u,g,n.cut,R,m,f,c]);return Kt("cut",S,d,!1,!1),{onCopy:R,onCut:S,onPasteInternal:H}}function bu({rowHeight:e,headerHeight:t,groupHeaderHeight:n,theme:o,overscrollX:r,overscrollY:i,scaleToRem:a,remSize:l}){const[c,u,d,g,h,m]=Rt.useMemo(()=>{if(!a||l===16)return[e,t,n,o,r,i];const f=l/16,w=e,y=cs();return[typeof w=="number"?w*f:v=>Math.ceil(w(v)*f),Math.ceil(t*f),Math.ceil(n*f),{...o,headerIconSize:((o==null?void 0:o.headerIconSize)??y.headerIconSize)*f,cellHorizontalPadding:((o==null?void 0:o.cellHorizontalPadding)??y.cellHorizontalPadding)*f,cellVerticalPadding:((o==null?void 0:o.cellVerticalPadding)??y.cellVerticalPadding)*f},Math.ceil((r??0)*f),Math.ceil((i??0)*f)]},[n,t,r,i,l,e,a,o]);return{rowHeight:c,headerHeight:u,groupHeaderHeight:d,theme:g,overscrollX:h,overscrollY:m}}const jn={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function Ye(e,t){return e===!0?t:e===!1?"":e}function _l(e){const t=ei.value;return{activateCell:Ye(e.activateCell," |Enter|shift+Enter"),clear:Ye(e.clear,"any+Escape"),closeOverlay:Ye(e.closeOverlay,"any+Escape"),acceptOverlayDown:Ye(e.acceptOverlayDown,"Enter"),acceptOverlayUp:Ye(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:Ye(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:Ye(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:Ye(e.delete,t?"Backspace|Delete":"Delete"),downFill:Ye(e.downFill,"primary+_68"),scrollToSelectedCell:Ye(e.scrollToSelectedCell,"primary+Enter"),goDownCell:Ye(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:Ye(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:Ye(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:Ye(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:Ye(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:Ye(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:Ye(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:Ye(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:Ye(e.goToFirstCell,"primary+Home"),goToFirstColumn:Ye(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:Ye(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:Ye(e.goToLastCell,"primary+End"),goToLastColumn:Ye(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:Ye(e.goToLastRow,"primary+ArrowDown"),goToNextPage:Ye(e.goToNextPage,"PageDown"),goToPreviousPage:Ye(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:Ye(e.rightFill,"primary+_82"),search:Ye(e.search,"primary+f"),selectAll:Ye(e.selectAll,"primary+a"),selectColumn:Ye(e.selectColumn,"ctrl+ "),selectGrowDown:Ye(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:Ye(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:Ye(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:Ye(e.selectGrowUp,"shift+ArrowUp"),selectRow:Ye(e.selectRow,"shift+ "),selectToFirstCell:Ye(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:Ye(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:Ye(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:Ye(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:Ye(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:Ye(e.selectToLastRow,"primary+shift+ArrowDown")}}function yu(e){const t=Xa(e);return Rt.useMemo(()=>{if(t===void 0)return _l(jn);const n={...t,goToNextPage:(t==null?void 0:t.goToNextPage)??(t==null?void 0:t.pageDown)??jn.goToNextPage,goToPreviousPage:(t==null?void 0:t.goToPreviousPage)??(t==null?void 0:t.pageUp)??jn.goToPreviousPage,goToFirstCell:(t==null?void 0:t.goToFirstCell)??(t==null?void 0:t.first)??jn.goToFirstCell,goToLastCell:(t==null?void 0:t.goToLastCell)??(t==null?void 0:t.last)??jn.goToLastCell,selectToFirstCell:(t==null?void 0:t.selectToFirstCell)??(t==null?void 0:t.first)??jn.selectToFirstCell,selectToLastCell:(t==null?void 0:t.selectToLastCell)??(t==null?void 0:t.last)??jn.selectToLastCell};return _l({...jn,...n})},[t])}function Cu(e){function t(o,r,i){if(typeof o=="number")return{headerIndex:o,isCollapsed:!1,depth:r,path:i};const a={headerIndex:o.headerIndex,isCollapsed:o.isCollapsed,depth:r,path:i};return o.subGroups!==void 0&&(a.subGroups=o.subGroups.map((l,c)=>t(l,r+1,[...i,c])).sort((l,c)=>l.headerIndex-c.headerIndex)),a}return e.map((o,r)=>t(o,0,[r])).sort((o,r)=>o.headerIndex-r.headerIndex)}function qi(e,t){const n=[];function o(l,c,u=!1){let d=c!==null?c-l.headerIndex:t-l.headerIndex;if(l.subGroups!==void 0&&(d=l.subGroups[0].headerIndex-l.headerIndex),d--,n.push({rowIndex:-1,headerIndex:l.headerIndex,contentIndex:-1,skip:u,isCollapsed:l.isCollapsed,depth:l.depth,path:l.path,rows:d}),l.subGroups)for(let g=0;g<l.subGroups.length;g++){const h=g<l.subGroups.length-1?l.subGroups[g+1].headerIndex:c;o(l.subGroups[g],h,u||l.isCollapsed)}}const r=Cu(e.groups);for(let l=0;l<r.length;l++){const c=l<r.length-1?r[l+1].headerIndex:null;o(r[l],c)}let i=0,a=0;for(const l of n)l.contentIndex=a,a+=l.rows,l.rowIndex=i,i+=l.isCollapsed?1:l.rows+1;return n.filter(l=>l.skip===!1).map(l=>{const{skip:c,...u}=l;return u})}function Li(e,t){if(t===void 0||qi.length===0)return{path:[e],originalIndex:e,isGroupHeader:!1,groupIndex:e,contentIndex:e,groupRows:-1};let n=e;for(const o of t){if(n===0)return{path:[...o.path,-1],originalIndex:o.headerIndex,isGroupHeader:!0,groupIndex:-1,contentIndex:-1,groupRows:o.rows};if(o.isCollapsed)n--;else{if(n<=o.rows)return{path:[...o.path,n-1],originalIndex:o.headerIndex+n,isGroupHeader:!1,groupIndex:n-1,contentIndex:o.contentIndex+n-1,groupRows:o.rows};n=n-o.rows-1}}return{path:[e],originalIndex:e,isGroupHeader:!1,groupIndex:e,contentIndex:e,groupRows:-1}}function ku(e,t,n,o){const r=Rt.useMemo(()=>e===void 0?void 0:qi(e,t),[e,t]),i=Rt.useMemo(()=>r==null?void 0:r.reduce((d,g)=>(d[g.rowIndex]=g,d),{}),[r]),a=Rt.useMemo(()=>r===void 0?t:r.reduce((d,g)=>d+(g.isCollapsed?1:g.rows+1),0),[r,t]),l=Rt.useMemo(()=>e===void 0||typeof n=="number"&&e.height===n?n:d=>i!=null&&i[d]?e.height:typeof n=="number"?n:n(d),[i,e,n]),c=Rt.useCallback(d=>{if(r===void 0)return d;let g=d;for(const h of r){if(g===0)return;if(g--,!h.isCollapsed){if(g<h.rows)return h.contentIndex+g;g-=h.rows}}return d},[r]),u=Jn(o??(e==null?void 0:e.themeOverride),Rt.useCallback(d=>{if(e===void 0)return o==null?void 0:o(d,d,d);if(o===void 0&&(e==null?void 0:e.themeOverride)===void 0)return;const{isGroupHeader:g,contentIndex:h,groupIndex:m}=Li(d,r);return g?e.themeOverride:o==null?void 0:o(d,m,h)},[r,o,e]));return e===void 0?{rowHeight:l,rows:t,rowNumberMapper:c,getRowThemeOverride:u}:{rowHeight:l,rows:a,rowNumberMapper:c,getRowThemeOverride:u}}function vu(e,t){const n=Rt.useMemo(()=>e===void 0?void 0:qi(e,t),[e,t]);return{getRowGroupingForPath:Ts,updateRowGroupingByPath:Fs,mapper:Rt.useCallback(o=>{if(typeof o=="number")return Li(o,n);const r=Li(o[1],n);return{...r,originalIndex:[o[0],r.originalIndex]}},[n])}}function Fs(e,t,n){const[o,...r]=t;return r[0]===-1?e.map((i,a)=>a===o?{...i,...n}:i):e.map((i,a)=>a===o?{...i,subGroups:Fs(i.subGroups??[],r,n)}:i)}function Ts(e,t){const[n,...o]=t;return o[0]===-1?e[n]:Ts(e[n].subGroups??[],o)}function xu(e,t){const[n]=s.useState(()=>({value:e,callback:t,facade:{get current(){return n.value},set current(o){const r=n.value;r!==o&&(n.value=o,n.callback(o,r))}}}));return n.callback=t,n.facade}function Su(e,t,n,o,r){const[i,a]=s.useMemo(()=>[t!==void 0&&typeof n=="number"?Math.floor(t/n):0,t!==void 0&&typeof n=="number"?-(t%n):0],[t,n]),l=s.useMemo(()=>({x:o.current.x,y:i,width:o.current.width??1,height:o.current.height??1,ty:a}),[o,a,i]),[c,u,d]=Ga(l),g=s.useRef(r);g.current=r;const h=xu(null,w=>{w!==null&&t!==void 0?w.scrollTop=t:w!==null&&e!==void 0&&(w.scrollLeft=e)}),m=(c.height??1)>1;s.useLayoutEffect(()=>{if(t!==void 0&&h.current!==null&&m){if(h.current.scrollTop===t)return;h.current.scrollTop=t,h.current.scrollTop!==t&&d(),g.current()}},[t,m,d,h]);const f=(c.width??1)>1;return s.useLayoutEffect(()=>{if(e!==void 0&&h.current!==null&&f){if(h.current.scrollLeft===e)return;h.current.scrollLeft=e,h.current.scrollLeft!==e&&d(),g.current()}},[e,f,d,h]),{visibleRegion:c,setVisibleRegion:u,scrollRef:h}}const Mu=Yt("textarea")({name:"GhostInputBox",class:"gdg-g1wsindo",propsAsIs:!1}),Ru=(e,t)=>{const{onInput:n,onCompositionStart:o,onCompositionEnd:r,onKeyDown:i,onKeyUp:a,onFocus:l,onBlur:c,disabled:u=!1}=e,d=s.useRef(null),g=s.useRef(!1),h=s.useRef({width:0,height:0}),m=s.useCallback(()=>{const C=d.current;if(!C||C.style.opacity==="0")return;const I=h.current.width,L=h.current.height;C.style.width=`${I}px`,C.style.height=`${L}px`;const x=Math.max(I,C.scrollWidth+2),H=Math.max(L,C.scrollHeight+2);C.style.width=`${x}px`,C.style.height=`${H}px`},[]);s.useImperativeHandle(t,()=>({focus:()=>{var C;(C=d.current)==null||C.focus({preventScroll:!0})},blur:()=>{var C;(C=d.current)==null||C.blur()},clear:()=>{d.current&&(d.current.value="",d.current.setSelectionRange(0,0))},getValue:()=>{var C;return((C=d.current)==null?void 0:C.value)??""},setValue:C=>{if(d.current){d.current.value=C;const I=C.length;d.current.setSelectionRange(I,I)}},setPosition:(C,I,L,x)=>{const H=d.current;H&&(h.current={width:L,height:x},H.style.left=`${C}px`,H.style.top=`${I}px`,H.style.width=`${L}px`,H.style.height=`${x}px`)},setVisible:C=>{const I=d.current;I&&(C?(I.style.opacity="1",I.style.pointerEvents="auto",I.style.zIndex="10000"):(I.style.left="-9999px",I.style.top="0",I.style.width="1px",I.style.height="1px",I.style.opacity="0",I.style.pointerEvents="none",I.style.zIndex="0"))}}));const f=s.useCallback(C=>{const I=C.currentTarget;n(I.value,g.current),m()},[n,m]),w=s.useCallback(()=>{g.current=!0,o()},[o]),y=s.useCallback(C=>{g.current=!1,r(C.currentTarget.value)},[r]),v=s.useCallback(C=>{i(C)},[i]),b=s.useCallback(C=>{a==null||a(C)},[a]);return s.createElement(Mu,{ref:d,defaultValue:"",tabIndex:u?-1:0,disabled:u,onInput:f,onCompositionStart:w,onCompositionEnd:y,onKeyDown:v,onKeyUp:b,onFocus:l,onBlur:c,"aria-label":"Grid input",wrap:"off",rows:1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})},Eu=s.memo(s.forwardRef(Ru));function Iu(e){const{state:t,onKeyDown:n,onFinishEditing:o,onKeyUpIn:r,onCellActivated:i,setIsFocused:a}=e,{gridSelection:l,overlayRef:c,ghostInputRef:u,ghostInputVisibleRef:d,gridRef:g,rowMarkerOffset:h,getMangledCellContent:m,reselect:f}=t,w=s.useCallback((x,H)=>{var R;if(c.current===void 0&&!H&&x.length>0&&x.trim().length>0&&l.current!==void 0){const[S,A]=l.current.cell,F=m([S,A]);if(F.kind===te.Custom){const D=F.data,E=D==null?void 0:D.kind;if(E!=="number-cell"&&E!=="date-picker-cell")return}if(F.allowOverlay&&to(F)&&F.readonly!==!0){const D=(R=g.current)==null?void 0:R.getBounds(S,A);if(D!==void 0){const E={inputType:"keyboard",key:x};i==null||i([S-h,A],E),f(D,E,x)}}}},[l,m,h,i,f,g,c]),y=s.useCallback(()=>{var S,A,F,D,E;if(l.current===void 0)return;const[x,H]=l.current.cell,R=(S=c.current)==null?void 0:S.cell;if(R!==void 0&&(R[0]!==x||R[1]!==H)&&((A=u.current)==null||A.clear(),(F=u.current)==null||F.setVisible(!1),t.setGhostInputVisible(!1),c.current=void 0,t.setOverlay(void 0)),c.current===void 0){const k=m([x,H]);if(k.kind===te.Custom){const $=k.data,_=$==null?void 0:$.kind;if(_!=="number-cell"&&_!=="date-picker-cell")return}if(k.allowOverlay&&to(k)&&k.readonly!==!0){const $=(D=g.current)==null?void 0:D.getBounds(x,H);if($!==void 0){(E=u.current)==null||E.clear();const _={inputType:"keyboard",key:""};i==null||i([x-h,H],_),f($,_,"")}}}},[l,m,h,i,f,u,g,c,t]),v=s.useCallback(x=>{},[]),b=s.useCallback(x=>{var F,D;if(x.nativeEvent.isComposing)return;if(c.current!==void 0&&d.current){const E=x.key;if(c.current.content.kind===te.Custom){const $=x.key;($==="Enter"||$==="Tab"||$==="Escape")&&(x.preventDefault(),x.stopPropagation());return}if(E==="Escape"){x.preventDefault(),x.stopPropagation(),o(void 0,[0,0]);return}if(E==="Enter"&&!x.shiftKey){x.preventDefault(),x.stopPropagation(),o(void 0,[0,1]);return}if(E==="Tab"){x.preventDefault(),x.stopPropagation(),o(void 0,x.shiftKey?[-1,0]:[1,0]);return}}{const E=x.key;if(E.length===1&&!x.ctrlKey&&!x.metaKey&&!x.altKey)if(E===" "&&l.current!==void 0){const $=l.current.cell,_=m($);if(!(_.kind===te.Boolean&&_.readonly!==!0))return}else return}if(c.current!==void 0&&d.current){const E=x.key;if(E==="Backspace"||E==="Delete"||(E==="ArrowLeft"||E==="ArrowRight"||E==="ArrowUp"||E==="ArrowDown"||E==="Home"||E==="End"))return}const H=(F=l.current)==null?void 0:F.cell,R=H!==void 0?(D=g.current)==null?void 0:D.getBounds(H[0],H[1]):void 0;let S=!1;const A={bounds:R,cancel:()=>{S=!0},stopPropagation:()=>x.stopPropagation(),preventDefault:()=>x.preventDefault(),ctrlKey:x.ctrlKey,metaKey:x.metaKey,shiftKey:x.shiftKey,altKey:x.altKey,key:x.key,keyCode:x.keyCode,rawEvent:x,location:H};n(A),S&&(x.preventDefault(),x.stopPropagation())},[l,n,o,m,c,d,g]),C=s.useCallback(x=>{var A,F;const H=(A=l.current)==null?void 0:A.cell,S={bounds:H!==void 0?(F=g.current)==null?void 0:F.getBounds(H[0],H[1]):void 0,cancel:()=>{},stopPropagation:()=>x.stopPropagation(),preventDefault:()=>x.preventDefault(),ctrlKey:x.ctrlKey,metaKey:x.metaKey,shiftKey:x.shiftKey,altKey:x.altKey,key:x.key,keyCode:x.keyCode,rawEvent:x,location:H};r==null||r(S)},[l,r,g]),I=s.useCallback(()=>{a(!0)},[a]),L=s.useCallback(()=>{a(!1)},[a]);return{onGhostInput:w,onGhostCompositionStart:y,onGhostCompositionEnd:v,onGhostKeyDown:b,onGhostKeyUp:C,onGhostFocus:I,onGhostBlur:L}}function Hu(e){const{state:t,mouseState:n,setMouseState:o,fillHighlightRegion:r,setFillHighlightRegion:i,setScrollDir:a,handleSelect:l,onMouseMove:c,onCellClicked:u,onCellActivated:d,onCellContextMenu:g,onHeaderContextMenu:h,onGroupHeaderContextMenu:m,onHeaderClicked:f,onGroupHeaderClicked:w,onColumnResize:y,onFillPattern:v,cellActivationBehavior:b,columnSelect:C,columnSelectionMode:I,columns:L,mergedTheme:x,minColumnWidth:H,maxColumnWidth:R,themeForCell:S,getCellsForSelection:A,setSelectedColumns:F,visibleRegion:D,lastMouseSelectLocation:E}=e,{gridSelection:k,gridRef:$,visibleRegionRef:_,abortControllerRef:se,rowMarkerOffset:Z,mangledCols:j,rows:G,setGridSelection:X,getMangledCellContent:ne,mangledOnCellsEdited:de,reselect:me,focus:le,getCellRenderer:re}=t,P=s.useRef(!1),Y=s.useRef(D),K=s.useRef(void 0),Q=s.useRef(!1),Re=s.useCallback(B=>{if(Q.current=!1,Y.current=_.current,B.button!==0&&B.button!==1){K.current=void 0;return}const pe=performance.now();K.current={button:B.button,time:pe,location:B.location},(B==null?void 0:B.kind)==="header"&&(P.current=!0);const q=B.kind==="cell"&&B.isFillHandle;!q&&B.kind!=="cell"&&B.isEdge||(o({previousSelection:k,fillHandle:q}),E.current=void 0,!B.isTouch&&B.button===0&&!q?l(B):!B.isTouch&&B.button===1&&(E.current=B.location))},[k,l]),Te=s.useCallback(B=>{if(B.kind!==kn||C!=="multi")return;const pe=ei.value?B.metaKey:B.ctrlKey,[q,ae]=B.location,ye=k.columns;if(q<Z)return;const We=j[q];let Fe=q,oe=q;const ve=ae<=-2?-(ae+2):0,ke=Array.isArray(We.group)?We.group.length:1,Ct=(V,He)=>ke>1?Ur(V,He,ve,ke):ds(V,He);for(let V=q-1;V>=Z&&Ct(We.group,j[V].group);V--)Fe--;for(let V=q+1;V<j.length&&Ct(We.group,j[V].group);V++)oe++;if(le(),pe||B.isTouch||I==="multi")if(ye.hasAll([Fe,oe+1])){let V=ye;for(let He=Fe;He<=oe;He++)V=V.remove(He);F(V,void 0,pe)}else F(void 0,[Fe,oe+1],pe);else F(ot.fromSingleSelection([Fe,oe+1]),void 0,pe)},[C,le,k.columns,j,Z,F,I]),W=s.useCallback(async B=>{if(A!==void 0&&y!==void 0){const pe=_.current.y,q=_.current.height;let ae=A({x:B,y:pe,width:1,height:Math.min(q,G-pe)},se.current.signal);typeof ae!="object"&&(ae=await ae());const ye=L[B-Z],Fe=document.createElement("canvas").getContext("2d",{alpha:!1});if(Fe!==null){Fe.font=x.baseFontFull;const oe=Cs(Fe,x,ye,0,ae,H,R,!1,re);y==null||y(ye,oe.width,B,oe.width)}}},[L,A,R,x,H,y,Z,G,re]),ee=s.useCallback(async(B,pe)=>{var oe,ve;const q=(oe=B.current)==null?void 0:oe.range;if(q===void 0||A===void 0||pe.current===void 0)return;const ae=pe.current.range;if(v!==void 0){let ke=!1;if(v({fillDestination:{...ae,x:ae.x-Z},patternSource:{...q,x:q.x-Z},preventDefault:()=>ke=!0}),ke)return}let ye=A(q,se.current.signal);typeof ye!="object"&&(ye=await ye());const We=ye,Fe=[];for(let ke=0;ke<ae.width;ke++)for(let Ct=0;Ct<ae.height;Ct++){const V=[ae.x+ke,ae.y+Ct];if(us(V,q))continue;const He=We[Ct%q.height][ke%q.width];wo(He)||!to(He)||Fe.push({location:V,value:{...He}})}de(Fe),(ve=$.current)==null||ve.damage(Fe.map(ke=>({cell:ke.location})))},[A,de,v,Z]),we=s.useCallback(()=>{if(k.current===void 0||k.current.range.width<=1)return;const B={...k,current:{...k.current,range:{...k.current.range,width:1}}};ee(B,k)},[ee,k]),qe=s.useCallback(()=>{if(k.current===void 0||k.current.range.height<=1)return;const B={...k,current:{...k.current,range:{...k.current.range,height:1}}};ee(B,k)},[ee,k]),Pe=s.useCallback((B,pe)=>{var Ct,V;const q=n;if(o(void 0),i(void 0),a(void 0),P.current=!1,pe)return;if((q==null?void 0:q.fillHandle)===!0&&k.current!==void 0&&((Ct=q.previousSelection)==null?void 0:Ct.current)!==void 0){if(r===void 0)return;const He={...k,current:{...k.current,range:Ss(q.previousSelection.current.range,r)}};ee(q.previousSelection,He),X(He,!0);return}const[ae,ye]=B.location,[We,Fe]=E.current??[],oe=()=>{Q.current=!0},ve=He=>{var Ce,ut,at;const je=He.isTouch||We===ae&&Fe===ye;if(je&&(u==null||u([ae-Z,ye],{...He,preventDefault:oe})),He.button===1)return!Q.current;if(!Q.current){const Le=ne(B.location),_e=re(Le);if(_e!==void 0&&_e.onClick!==void 0&&je){const kt=_e.onClick({...He,cell:Le,posX:He.localEventX,posY:He.localEventY,bounds:He.bounds,theme:S(Le,B.location),preventDefault:oe});kt!==void 0&&!wo(kt)&&Wn(kt)&&(de([{location:He.location,value:kt}]),(Ce=$.current)==null||Ce.damage([{cell:He.location}]))}if(Q.current||k.current===void 0)return!1;let gt=!1;switch(Le.activationBehaviorOverride??b){case"double-click":case"second-click":{if(((at=(ut=q==null?void 0:q.previousSelection)==null?void 0:ut.current)==null?void 0:at.cell)===void 0)break;const[kt,St]=k.current.cell,[Lt,vt]=q.previousSelection.current.cell;gt=ae===kt&&ae===Lt&&ye===St&&ye===vt&&(He.isDoubleClick===!0||b==="second-click");break}case"single-click":{gt=!0;break}}if(gt){const St={inputType:"pointer",pointerActivation:He.isDoubleClick===!0?"double-click":Le.activationBehaviorOverride??b,pointerType:He.isTouch?"touch":"mouse"};return d==null||d([ae-Z,ye],St),me(He.bounds,St),!0}}return!1},ke=B.location[0]-Z;if(B.isTouch){const He=_.current,je=Y.current;if(He.x!==je.x||He.y!==je.y)return;if(B.isLongTouch===!0){if(B.kind==="cell"&&ar((V=k.current)==null?void 0:V.cell,B.location)){g==null||g([ke,B.location[1]],{...B,preventDefault:oe});return}else if(B.kind==="header"&&k.columns.hasIndex(ae)){h==null||h(ke,{...B,preventDefault:oe});return}else if(B.kind===kn){if(ke<0)return;m==null||m(ke,{...B,preventDefault:oe});return}}B.kind==="cell"?ve(B)||l(B):B.kind===kn?w==null||w(ke,{...B,preventDefault:oe}):(B.kind===Qn&&(f==null||f(ke,{...B,preventDefault:oe})),l(B));return}if(B.kind==="header"){if(ke<0)return;B.isEdge?B.isDoubleClick===!0&&W(ae):B.button===0&&ae===We&&ye===Fe&&(f==null||f(ke,{...B,preventDefault:oe}))}if(B.kind===kn){if(ke<0)return;B.button===0&&ae===We&&ye===Fe&&(w==null||w(ke,{...B,preventDefault:oe}),Q.current||Te(B))}B.kind==="cell"&&(B.button===0||B.button===1)&&ve(B),E.current=void 0},[n,k,Z,r,ee,X,u,ne,re,b,S,de,d,me,g,h,m,l,w,f,W,Te]),Et=s.useCallback(B=>{const pe={...B,location:[B.location[0]-Z,B.location[1]]};c==null||c(pe),n!==void 0&&B.buttons===0&&(o(void 0),i(void 0),a(void 0),P.current=!1),a(q=>{var ae;return P.current?[B.scrollEdge[0],0]:B.scrollEdge[0]===(q==null?void 0:q[0])&&B.scrollEdge[1]===q[1]?q:n===void 0||(((ae=K.current)==null?void 0:ae.location[0])??0)<Z?void 0:B.scrollEdge})},[n,c,Z]);return{onMouseDown:Re,onMouseUp:Pe,onMouseMoveImpl:Et,handleGroupHeaderSelection:Te,normalSizeColumn:W,fillDown:qe,fillRight:we,mouseDownData:K,isActivelyDraggingHeader:P}}const Du=s.lazy(async()=>await jl(()=>Promise.resolve().then(()=>sc),void 0,import.meta.url));let Fu=0;function Tu(e){return Ta(vl(vl(e).filter(t=>t.span!==void 0).map(t=>{var n,o;return mo((((n=t.span)==null?void 0:n[0])??0)+1,(((o=t.span)==null?void 0:o[1])??0)+1)})))}function Xr(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(n=>({...n,x:n.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}const Zn={kind:te.Loading,allowOverlay:!1},Ri={columns:ot.empty(),rows:ot.empty(),current:void 0},Au=(e,t)=>{var yl,Cl,kl;const[n,o]=s.useState(Ri),[r,i]=s.useState(),a=s.useRef(null),l=s.useRef(null),[c,u]=s.useState(),[d,g]=s.useState(),h=s.useRef(void 0),m=s.useRef(null),[f,w]=s.useState(!1),y=s.useRef(f);y.current=f;const v=s.useRef(r);v.current=r;const b=typeof window>"u"?null:window,{imageEditorOverride:C,getRowThemeOverride:I,markdownDivCreateNode:L,width:x,height:H,columns:R,rows:S,getCellContent:A,onCellClicked:F,onCellActivated:D,onFillPattern:E,onFinishedEditing:k,coercePasteValue:$,drawHeader:_,drawCell:se,editorBloom:Z,onHeaderClicked:j,onColumnProposeMove:G,rangeSelectionColumnSpanning:X=!0,spanRangeBehavior:ne="default",onGroupHeaderClicked:de,onCellContextMenu:me,className:le,onHeaderContextMenu:re,getCellsForSelection:P,onGroupHeaderContextMenu:Y,onGroupHeaderRenamed:K,onCellEdited:Q,onCellsEdited:Re,onSearchResultsChanged:Te,searchResults:W,onSearchValueChange:ee,searchValue:we,onKeyDown:qe,onKeyUp:Pe,keybindings:Et,editOnType:B=!0,onRowAppended:pe,onColumnAppended:q,onColumnMoved:ae,validateCell:ye,highlightRegions:We,rangeSelect:Fe="rect",columnSelect:oe="multi",rowSelect:ve="multi",rangeSelectionBlending:ke="exclusive",columnSelectionBlending:Ct="exclusive",rowSelectionBlending:V="exclusive",onDelete:He,onDragStart:je,onMouseMove:Ce,onPaste:ut,copyHeaders:at=!1,freezeColumns:Le=0,cellActivationBehavior:_e="second-click",rowSelectionMode:gt="auto",columnSelectionMode:kt="auto",onHeaderMenuClick:St,onHeaderIndicatorClick:Lt,getGroupDetails:vt,rowGrouping:Ft,onSearchClose:Bt,onItemHovered:dn,onSelectionCleared:Qt,showSearch:pt,onVisibleRegionChanged:un,gridSelection:Je,onGridSelectionChange:Wt,minColumnWidth:en=50,maxColumnWidth:tn=500,maxColumnAutoWidth:gn,provideEditor:Tn,trailingRowOptions:ue,freezeTrailingRows:Ve=0,allowedFillDirections:tt="orthogonal",scrollOffsetX:Nt,scrollOffsetY:$t,verticalBorder:Oe,onDragOverCell:Uo,onDrop:Tt,onColumnResize:xt,onColumnResizeEnd:nn,onColumnResizeStart:On,customRenderers:mn,fillHandle:An,experimental:mt,fixedShadowX:Co,fixedShadowY:fr,headerIcons:hr,imageWindowLoader:ko,initialSize:vo,isDraggable:xo,onDragLeave:So,onRowMoved:wn,overscrollX:Nn,overscrollY:ti,preventDiagonalScrolling:gr,rightElement:ni,rightElementProps:oi,trapFocus:Pn=!1,smoothScrollX:$n,smoothScrollY:ri,scaleToRem:ii=!1,rowHeight:mr=34,headerHeight:qo=36,groupHeaderHeight:Mo=qo,theme:ji,isOutsideClick:wr,renderers:ro,resizeIndicator:pr,scrollToActiveCell:Ro=!0,drawFocusRing:io=!0,portalElementRef:pn,onRowStatus:Gn,onRowId:vn}=e,Eo=io==="no-editor"?r===void 0:io,Ne=typeof e.rowMarkers=="string"?void 0:e.rowMarkers,br=(Ne==null?void 0:Ne.rowNumber)??!1;let Io=(Ne==null?void 0:Ne.kind)??e.rowMarkers??"none",_t=br;(Io==="both"||Io==="checkbox-and-number")&&(Io="checkbox",_t=!0);const on=Io,yr=(Ne==null?void 0:Ne.width)??e.rowMarkerWidth,Ho=(Ne==null?void 0:Ne.startIndex)??e.rowMarkerStartIndex??1,Do=(Ne==null?void 0:Ne.theme)??e.rowMarkerTheme,Fo=Ne==null?void 0:Ne.headerTheme,Cr=Ne==null?void 0:Ne.headerAlwaysVisible,To=ve!=="multi"||(Ne==null?void 0:Ne.headerDisabled)===!0,Xn=(Ne==null?void 0:Ne.checkboxStyle)??"square",li=(Ne==null?void 0:Ne.rowStatus)??!1,jo=(Ne==null?void 0:Ne.rowStatusWidth)??40,Kn=Ne==null?void 0:Ne.rowStatusTheme,si=(Ne==null?void 0:Ne.rowId)??!1,Zo=(Ne==null?void 0:Ne.rowIdWidth)??80,Ao=Ne==null?void 0:Ne.rowIdTheme,lo=Math.max(en,20),Po=Math.max(tn,lo),zo=Math.max(gn??Po,lo),Lo=s.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]),{rows:Ue,rowNumberMapper:Jo,rowHeight:Bo,getRowThemeOverride:bn}=ku(Ft,S,mr,I),Wo=s.useMemo(()=>Number.parseFloat(Lo.fontSize),[Lo]),{rowHeight:xn,headerHeight:kr,groupHeaderHeight:z,theme:J,overscrollX:Se,overscrollY:Me}=bu({groupHeaderHeight:Mo,headerHeight:qo,overscrollX:Nn,overscrollY:ti,remSize:Wo,rowHeight:Bo,scaleToRem:ii,theme:ji}),fe=yu(Et),be=yr??(S>1e4?48:S>1e3?44:S>100?36:32),Ae=on!=="none",Ge=li===!0,xe=si===!0,N=(Ae?_t?2:1:0)+(Ge?1:0)+(xe?1:0),De=(Ae?(_t?2:1)*be:0)+(Ge?jo:0)+(xe?Zo:0),Be=ue!==void 0,rt=(ue==null?void 0:ue.sticky)===!0,[ft,ht]=s.useState(!1),It=pt??ft,Ht=s.useCallback(()=>{Bt!==void 0?Bt():ht(!1)},[Bt]),ge=s.useMemo(()=>Je===void 0?void 0:Xr(Je,N),[Je,N])??n,At=s.useRef(new AbortController);s.useEffect(()=>()=>At==null?void 0:At.current.abort(),[]);const[Ot,ct]=cu(P,A,N,At.current,Ue),Mn=s.useCallback((p,M,O)=>{if(ye===void 0)return!0;const T=[p[0]-N,p[1]];return ye==null?void 0:ye(T,M,O)},[N,ye]),Vt=s.useRef(Je),Gt=s.useCallback((p,M)=>{M&&(p=iu(p,Ot,N,ne,At.current)),Wt!==void 0?(Vt.current=Xr(p,-N),Wt(Vt.current)):o(p)},[Wt,Ot,N,ne]),Ut=Jn(xt,s.useCallback((p,M,O,T)=>{xt==null||xt(R[O-N],M,O-N,T)},[xt,N,R])),so=Jn(nn,s.useCallback((p,M,O,T)=>{nn==null||nn(R[O-N],M,O-N,T)},[nn,N,R])),Yn=Jn(On,s.useCallback((p,M,O,T)=>{On==null||On(R[O-N],M,O-N,T)},[On,N,R])),vr=Jn(_,s.useCallback((p,M)=>(_==null?void 0:_({...p,columnIndex:p.columnIndex-N},M))??!1,[_,N])),ao=Jn(se,s.useCallback((p,M)=>(se==null?void 0:se({...p,col:p.col-N},M))??!1,[se,N])),xr=s.useCallback(p=>{if(He!==void 0){const M=He(Xr(p,-N));return typeof M=="boolean"?M:Xr(M,N)}return!0},[He,N]),[Pt,fn,rn]=au(ge,Gt,ke,Ct,V,Fe,X),qt=s.useMemo(()=>Dn(cs(),J),[J]),[ai,zs]=s.useState([0,0,0]),Zi=s.useMemo(()=>{if(ro===void 0)return{};const p={};for(const M of ro)p[M.kind]=M;return p},[ro]),Rn=s.useCallback(p=>p.kind!==te.Custom?Zi[p.kind]:mn==null?void 0:mn.find(M=>M.isMatch(p)),[mn,Zi]);let{sizedColumns:yn,nonGrowWidth:Ji}=Sc(R,Ue,ct,ai[0]-De-ai[2],lo,zo,qt,Rn,At.current);Ji+=De;const Qo=s.useMemo(()=>{let p=0;for(const M of yn)M.group!==void 0&&(typeof M.group=="string"?p=Math.max(p,1):p=Math.max(p,M.group.length));return p},[yn]),Qi=Qo>0,el=s.useMemo(()=>Qo===0?[]:Array(Qo).fill(z),[Qo,z]),Ls=el.reduce((p,M)=>p+M,0),er=kr+Ls,tl=ge.rows.length,nl=on==="none"?void 0:tl===0?!1:tl===Ue?!0:void 0,dt=s.useMemo(()=>{const p=[];return on!=="none"&&(_t&&p.push({title:"",width:be,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Do,rowMarker:Xn,rowMarkerChecked:!1,headerRowMarkerTheme:Fo,headerRowMarkerAlwaysVisible:!1,headerRowMarkerDisabled:!0}),p.push({title:"",width:be,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Do,rowMarker:Xn,rowMarkerChecked:nl,headerRowMarkerTheme:Fo,headerRowMarkerAlwaysVisible:Cr,headerRowMarkerDisabled:To})),Ge&&p.push({title:"",width:jo,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Kn}),xe&&p.push({title:"ID",width:Zo,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Ao}),[...p,...yn]},[Ge,jo,Kn,xe,Zo,Ao,on,yn,be,Do,Xn,nl,Fo,Cr,To,_t]),_n=s.useRef({height:1,width:1,x:0,y:0}),Sr=s.useRef(!1),{setVisibleRegion:ol,visibleRegion:co,scrollRef:bt}=Su(Nt,$t,xn,_n,()=>Sr.current=!0);_n.current=co;const Bs=co.x+N,Mr=co.y,jt=s.useRef(null),Zt=s.useCallback(p=>{var M;p===!0?(M=m.current)==null||M.focus():window.requestAnimationFrame(()=>{var O;(O=m.current)==null||O.focus()})},[]),Xt=Be?Ue+1:Ue,uo=s.useCallback(p=>{const M=N===0?p:p.map(T=>({...T,location:[T.location[0]-N,T.location[1]]})),O=Re==null?void 0:Re(M);if(O!==!0)for(const T of M)Q==null||Q(T.location,T.value);return O},[Q,Re,N]),[tr,rl]=s.useState(),Rr=ge.current!==void 0&&ge.current.range.width*ge.current.range.height>1?ge.current.range:void 0,Oo=Eo?(yl=ge.current)==null?void 0:yl.cell:void 0,Er=Oo==null?void 0:Oo[0],Ir=Oo==null?void 0:Oo[1],Ws=s.useMemo(()=>{if((We===void 0||We.length===0)&&(Rr??Er??Ir??tr)===void 0)return;const p=[];if(We!==void 0)for(const M of We){const O=dt.length-M.range.x-N;O>0&&p.push({color:M.color,range:{...M.range,x:M.range.x+N,width:Math.min(O,M.range.width)},style:M.style})}return tr!==void 0&&p.push({color:no(qt.accentColor,0),range:tr,style:"dashed"}),Rr!==void 0&&p.push({color:no(qt.accentColor,.5),range:Rr,style:"solid-outline"}),Er!==void 0&&Ir!==void 0&&p.push({color:qt.accentColor,range:{x:Er,y:Ir,width:1,height:1},style:"solid-outline"}),p.length>0?p:void 0},[tr,Rr,Er,Ir,We,dt.length,qt.accentColor,N]),il=s.useRef(dt);il.current=dt;const zn=s.useCallback(([p,M],O=!1)=>{var ze,$e,it,nt,Qe,Ie,st,lt,Ze;const T=Be&&M===Xt-1;let U=0,ie=-1,ce=-1,he=-1,Ee=-1;if(Ae&&_t&&(ie=U++),Ae&&(ce=U++),Ge&&(he=U++),xe&&(Ee=U++),p===ie){if(T)return Zn;const et=Jo(M);return et===void 0?Zn:{kind:zt.Marker,allowOverlay:!1,checkboxStyle:Xn,checked:!1,markerKind:"number",row:Ho+et,drawHandle:!1,cursor:void 0,disabled:((ze=e.disabledRows)==null?void 0:ze.call(e,M))===!0}}if(p===ce){if(T)return Zn;const et=Jo(M);if(et===void 0)return Zn;let Dt;return _t?Dt=on==="checkbox-visible"?"checkbox-visible":"checkbox":on==="clickable-number"?Dt="number":Dt=on,{kind:zt.Marker,allowOverlay:!1,checkboxStyle:Xn,checked:(ge==null?void 0:ge.rows.hasIndex(M))===!0,markerKind:Dt,row:Ho+et,drawHandle:wn!==void 0,cursor:_t?void 0:on==="clickable-number"?"pointer":void 0,disabled:(($e=e.disabledRows)==null?void 0:$e.call(e,M))===!0}}if(p===he){if(T)return Zn;const et=Gn==null?void 0:Gn(M);return{kind:zt.RowStatus,allowOverlay:!1,status:et,themeOverride:Kn}}if(p===Ee){if(T)return Zn;const et=vn==null?void 0:vn(M);return{kind:zt.RowId,allowOverlay:!1,rowId:et,themeOverride:Ao}}if(T){const Dt=p===N?(ue==null?void 0:ue.hint)??"":"",wt=il.current[p];if(((it=wt==null?void 0:wt.trailingRowOptions)==null?void 0:it.disabled)===!0)return Zn;{const ln=((nt=wt==null?void 0:wt.trailingRowOptions)==null?void 0:nt.hint)??Dt,In=((Qe=wt==null?void 0:wt.trailingRowOptions)==null?void 0:Qe.addIcon)??(ue==null?void 0:ue.addIcon);return{kind:zt.NewRow,hint:ln,allowOverlay:!1,icon:In}}}else{const et=p-N;if(O||(mt==null?void 0:mt.strict)===!0){const wt=_n.current,ln=wt.x>et||et>wt.x+wt.width||wt.y>M||M>wt.y+wt.height||M>=fi.current,In=et===((st=(Ie=wt.extras)==null?void 0:Ie.selected)==null?void 0:st[0])&&M===((lt=wt.extras)==null?void 0:lt.selected[1]);let Hn=!1;if(((Ze=wt.extras)==null?void 0:Ze.freezeRegions)!==void 0){for(const Un of wt.extras.freezeRegions)if(eo(Un,et,M)){Hn=!0;break}}if(ln&&!In&&!Hn)return Zn}let Dt=A([et,M]);return N!==0&&Dt.span!==void 0&&(Dt={...Dt,span:[Dt.span[0]+N,Dt.span[1]+N]}),Dt}},[Be,Xt,Ge,Gn,Kn,xe,vn,Ao,Ae,Jo,Xn,ge==null?void 0:ge.rows,on,Ho,wn,N,ue==null?void 0:ue.hint,ue==null?void 0:ue.addIcon,mt==null?void 0:mt.strict,A,_t]),ci=s.useCallback(p=>{let M=(vt==null?void 0:vt(p))??{name:p};return K!==void 0&&p!==""&&(M={icon:M.icon,name:M.name,overrideTheme:M.overrideTheme,actions:[...M.actions??[],{title:"Rename",icon:"renameIcon",onClick:O=>mi({group:M.name,bounds:O.bounds})}]}),M},[vt,K]),Hr=s.useCallback(p=>{var he;const[M,O]=p.cell,T=dt[M],U=(T==null?void 0:T.group)!==void 0?(he=ci(T.group))==null?void 0:he.overrideTheme:void 0,ie=T==null?void 0:T.themeOverride,ce=bn==null?void 0:bn(O);i({...p,theme:Dn(qt,U,ie,ce,p.content.themeOverride)})},[bn,dt,ci,qt]),Os=s.useCallback((p,M,O)=>{var ce,he,Ee,ze,$e,it,nt;if(ge.current===void 0)return;const[T,U]=ge.current.cell,ie=zn([T,U]);if(ie.kind!==te.Boolean&&ie.allowOverlay){let Qe=ie;if(O!==void 0)switch(Qe.kind){case te.Number:{const lt=Pa(()=>O==="-"?-0:Number.parseFloat(O),0);Qe={...Qe,data:Number.isNaN(lt)?0:lt};break}case te.Text:case te.Markdown:case te.Uri:Qe={...Qe,data:O};break}Hr({target:p,content:Qe,initialValue:O,cell:[T,U],highlight:O===void 0,forceEditMode:O!==void 0,activation:M});const Ie=Qe.kind===te.Custom;O!==void 0&&!Ie?((ce=m.current)==null||ce.setPosition(p.x,p.y,p.width,p.height),O.length>0&&((he=m.current)==null||he.setValue(O)),(Ee=m.current)==null||Ee.setVisible(!0),w(!0)):Ie&&O!==void 0&&((ze=m.current)==null||ze.clear(),($e=m.current)==null||$e.setVisible(!1),(it=m.current)==null||it.blur(),w(!1))}else ie.kind===te.Boolean&&M.inputType==="keyboard"&&ie.readonly!==!0&&(uo([{location:ge.current.cell,value:{...ie,data:Ui(ie.data)}}]),(nt=jt.current)==null||nt.damage([{cell:ge.current.cell}]))},[zn,ge,uo,Hr]),ll=s.useCallback((p,M)=>{var U;const O=(U=jt.current)==null?void 0:U.getBounds(p,M);if(O===void 0||bt.current===null)return;const T=zn([p,M]);T.allowOverlay&&Hr({target:O,content:T,initialValue:void 0,highlight:!0,cell:[p,M],forceEditMode:!0,activation:{inputType:"keyboard",key:"Enter"}})},[zn,bt,Hr]),Mt=s.useCallback((p,M,O="both",T=0,U=0,ie=void 0)=>{if(bt.current!==null){const ce=jt.current,he=l.current,Ee=typeof p!="number"?p.unit==="cell"?p.amount:void 0:p,ze=typeof M!="number"?M.unit==="cell"?M.amount:void 0:M,$e=typeof p!="number"&&p.unit==="px"?p.amount:void 0,it=typeof M!="number"&&M.unit==="px"?M.amount:void 0;if(ce!==null&&he!==null){let nt={x:0,y:0,width:0,height:0},Qe=0,Ie=0;if((Ee!==void 0||ze!==void 0)&&(nt=ce.getBounds((Ee??0)+N,ze??0)??nt,nt.width===0||nt.height===0))return;const st=he.getBoundingClientRect(),lt=st.width/he.offsetWidth;if($e!==void 0&&(nt={...nt,x:$e-st.left-bt.current.scrollLeft,width:1}),it!==void 0&&(nt={...nt,y:it+st.top-bt.current.scrollTop,height:1}),nt!==void 0){const Ze={x:nt.x-T,y:nt.y-U,width:nt.width+2*T,height:nt.height+2*U};let et=0;for(let Ci=0;Ci<Le;Ci++)et+=yn[Ci].width;let Dt=0;const wt=Ve+(rt?1:0);wt>0&&(Dt=bo(Xt,wt,xn));let ln=et*lt+st.left+De*lt,In=st.right,Hn=st.top+er*lt,Un=st.bottom-Dt*lt;const Wr=nt.width+T*2;switch(ie==null?void 0:ie.hAlign){case"start":In=ln+Wr;break;case"end":ln=In-Wr;break;case"center":ln=Math.floor((ln+In)/2)-Wr/2,In=ln+Wr;break}const Or=nt.height+U*2;switch(ie==null?void 0:ie.vAlign){case"start":Un=Hn+Or;break;case"end":Hn=Un-Or;break;case"center":Hn=Math.floor((Hn+Un)/2)-Or/2,Un=Hn+Or;break}ln>Ze.x?Qe=Ze.x-ln:In<Ze.x+Ze.width&&(Qe=Ze.x+Ze.width-In),Hn>Ze.y?Ie=Ze.y-Hn:Un<Ze.y+Ze.height&&(Ie=Ze.y+Ze.height-Un),O==="vertical"||typeof p=="number"&&p<Le?Qe=0:(O==="horizontal"||typeof M=="number"&&M>=Xt-wt)&&(Ie=0),(Qe!==0||Ie!==0)&&(lt!==1&&(Qe/=lt,Ie/=lt),bt.current.scrollTo({left:Qe+bt.current.scrollLeft,top:Ie+bt.current.scrollTop,behavior:(ie==null?void 0:ie.behavior)??"auto"}))}}}},[N,Ve,be,bt,er,Le,yn,Xt,rt,xn]),Dr=s.useRef(Mt);Dr.current=Mt;const di=s.useRef(ll),ui=s.useRef(A);di.current=ll,ui.current=A;const fi=s.useRef(Ue);fi.current=Ue;const sl=s.useRef(dt.length);sl.current=dt.length;const fo=s.useCallback(async(p,M=!0,O)=>{var ze;const T=dt[p];if(((ze=T==null?void 0:T.trailingRowOptions)==null?void 0:ze.disabled)===!0)return;const U=pe==null?void 0:pe();let ie,ce=!0;U!==void 0&&(ie=await U,ie==="top"&&(ce=!1),typeof ie=="number"&&(ce=!1));let he=0;const Ee=()=>{if(fi.current<=Ue){he<500&&window.setTimeout(Ee,he),he=50+he*2;return}const $e=typeof ie=="number"?ie:ce?Ue:0;Dr.current(p-N,$e,"both",0,20,O?{behavior:O}:void 0),Pt({cell:[p,$e],range:{x:p,y:$e,width:1,height:1}},!1,!1,"edit");const it=ui.current([p-N,$e]);it.allowOverlay&&to(it)&&it.readonly!==!0&&M&&window.setTimeout(()=>{di.current(p,$e)},0)};Ee()},[dt,pe,N,Ue,Pt]),Fr=s.useCallback(async(p,M=!0)=>{const O=q==null?void 0:q();let T,U=!0;O!==void 0&&(T=await O,T==="left"&&(U=!1),typeof T=="number"&&(U=!1));let ie=0;const ce=()=>{if(sl.current<=dt.length){ie<500&&window.setTimeout(ce,ie),ie=50+ie*2;return}const he=typeof T=="number"?T:U?dt.length:0;Mt(he-N,p),Pt({cell:[he,p],range:{x:he,y:p,width:1,height:1}},!1,!1,"edit");const Ee=ui.current([he-N,p]);Ee.allowOverlay&&to(Ee)&&Ee.readonly!==!0&&M&&window.setTimeout(()=>{di.current(he,p)},0)};ce()},[dt,q,N,Mt,Pt]),nr=s.useCallback(p=>{var O,T;const M=((T=(O=yn[p])==null?void 0:O.trailingRowOptions)==null?void 0:T.targetColumn)??(ue==null?void 0:ue.targetColumn);if(typeof M=="number")return M+(Ae?1:0);if(typeof M=="object"){const U=R.indexOf(M);if(U>=0)return U+(Ae?1:0)}},[yn,R,Ae,ue==null?void 0:ue.targetColumn]),Vn=s.useRef(void 0),No=s.useRef(void 0),Tr=s.useCallback((p,M)=>{var U;const[O,T]=M;return Dn(qt,(U=dt[O])==null?void 0:U.themeOverride,bn==null?void 0:bn(T),p.themeOverride)},[bn,dt,qt]),{mapper:or}=vu(Ft,S),hi=Ft==null?void 0:Ft.navigationBehavior,Ar=s.useRef(void 0),Ns=s.useCallback(p=>{var ze,$e,it;const M=ei.value?p.metaKey:p.ctrlKey,O=M&&ve==="multi",[T,U]=p.location,ie=ge.columns,ce=ge.rows,[he,Ee]=((ze=ge.current)==null?void 0:ze.cell)??[];if(p.kind==="cell"){if(No.current=void 0,Ar.current=[T,U],T===(_t?1:0)&&Ae){if(Be===!0&&U===Ue||on==="number"||ve==="none")return;const Ie=zn(p.location);if(Ie.kind!==zt.Marker||Ie.disabled===!0)return;if(wn!==void 0){const Ze=Rn(Ie);sn((Ze==null?void 0:Ze.kind)===zt.Marker);const et=($e=Ze==null?void 0:Ze.onClick)==null?void 0:$e.call(Ze,{...p,cell:Ie,posX:p.localEventX,posY:p.localEventY,bounds:p.bounds,theme:Tr(Ie,p.location),preventDefault:()=>{}});if(et===void 0||et.checked===Ie.checked)return}i(void 0),Zt();const st=ce.hasIndex(U),lt=Vn.current;if(ve==="multi"&&(p.shiftKey||p.isLongTouch===!0)&&lt!==void 0&&ce.hasIndex(lt)){const Ze=[Math.min(lt,U),Math.max(lt,U)+1];O||gt==="multi"?fn(void 0,Ze,!0):fn(ot.fromSingleSelection(Ze),void 0,O)}else ve==="multi"&&(O||p.isTouch||gt==="multi")?st?fn(ce.remove(U),void 0,!0):(fn(void 0,U,!0),Vn.current=U):st&&ce.length===1?fn(ot.empty(),void 0,M):(fn(ot.fromSingleSelection(U),void 0,M),Vn.current=U)}else if(T>=N&&Be&&U===Ue){const Ie=nr(T);fo(Ie??T)}else if(he!==T||Ee!==U){const Ie=zn(p.location),st=Rn(Ie);if((st==null?void 0:st.onSelect)!==void 0){let et=!1;if(st.onSelect({...p,cell:Ie,posX:p.localEventX,posY:p.localEventY,bounds:p.bounds,preventDefault:()=>et=!0,theme:Tr(Ie,p.location)}),et)return}if(hi==="block"&&or(U).isGroupHeader)return;const lt=rt&&U===Ue,Ze=rt&&ge!==void 0&&((it=ge.current)==null?void 0:it.cell[1])===Ue;if((p.shiftKey||p.isLongTouch===!0)&&he!==void 0&&Ee!==void 0&&ge.current!==void 0&&!Ze){if(lt)return;const et=Math.min(T,he),Dt=Math.max(T,he),wt=Math.min(U,Ee),ln=Math.max(U,Ee);Pt({...ge.current,range:{x:et,y:wt,width:Dt-et+1,height:ln-wt+1}},!0,M,"click"),Vn.current=void 0,Zt()}else{const et=ge.rows.length>0;Pt({cell:[T,U],range:{x:T,y:U,width:1,height:1}},!0,M||et,"click"),Vn.current=void 0,i(void 0),Zt()}}}else if(p.kind==="header")if(Ar.current=[T,U],i(void 0),Ae&&T===(_t?1:0))Vn.current=void 0,No.current=void 0,!To&&ve==="multi"&&(ce.length!==Ue?fn(ot.fromSingleSelection([0,Ue]),void 0,M):fn(ot.empty(),void 0,M),Zt());else{const Qe=No.current;if(oe==="multi"&&(p.shiftKey||p.isLongTouch===!0)&&Qe!==void 0&&ie.hasIndex(Qe)){const Ie=[Math.min(Qe,T),Math.max(Qe,T)+1];M||p.isTouch||kt==="multi"?rn(void 0,Ie,M):rn(ot.fromSingleSelection(Ie),void 0,M)}else oe==="multi"&&(M||p.isTouch||kt==="multi")?(ie.hasIndex(T)?rn(ie.remove(T),void 0,M):rn(void 0,T,M),No.current=T):oe!=="none"&&(ie.hasIndex(T)?rn(ie.remove(T),void 0,M):rn(ot.fromSingleSelection(T),void 0,M),No.current=T);Vn.current=void 0,Zt()}else p.kind===kn?Ar.current=[T,U]:p.kind===Zr&&!p.isMaybeScrollbar&&(Gt(Ri,!1),i(void 0),Zt(),Qt==null||Qt(),Vn.current=void 0,No.current=void 0)},[ve,oe,ge,Ae,N,Be,_t,Ue,on,zn,wn,Zt,gt,kt,Rn,Tr,fn,nr,fo,hi,or,rt,Pt,To,rn,Gt,Qt]),Pr={gridSelection:ge,overlay:r,gridRef:jt,ghostInputRef:m,overlayRef:v,ghostInputVisibleRef:y,scrollRef:bt,canvasRef:l,visibleRegionRef:_n,abortControllerRef:At,rowMarkerOffset:N,mangledCols:dt,mangledRows:Xt,rows:Ue,setGridSelection:Gt,getMangledCellContent:zn,mangledOnCellsEdited:uo,setOverlay:i,focus:Zt,setGhostInputVisible:w,reselect:Os,getCellRenderer:Rn},{onMouseDown:$s,onMouseUp:Gs,onMouseMoveImpl:Xs,normalSizeColumn:al,fillDown:Ks,fillRight:Ys,mouseDownData:Ln,isActivelyDraggingHeader:_s}=Hu({state:Pr,mouseState:c,setMouseState:u,fillHighlightRegion:tr,setFillHighlightRegion:rl,setScrollDir:g,handleSelect:Ns,onMouseMove:Ce,onCellClicked:F,onCellActivated:D,onCellContextMenu:me,onHeaderContextMenu:re,onGroupHeaderContextMenu:Y,onHeaderClicked:j,onGroupHeaderClicked:de,onColumnResize:Ut,onFillPattern:E,cellActivationBehavior:_e,columnSelect:oe,columnSelectionMode:kt,columns:yn,mergedTheme:qt,minColumnWidth:lo,maxColumnWidth:Po,themeForCell:Tr,getCellsForSelection:Ot,setSelectedColumns:rn,visibleRegion:co,lastMouseSelectLocation:Ar}),[gi,mi]=s.useState(),Vs=s.useCallback((p,M)=>{St==null||St(p-N,M)},[St,N]),Us=s.useCallback((p,M)=>{Lt==null||Lt(p-N,M)},[Lt,N]);s.useEffect(()=>{if(r===void 0)return;const p=T=>{const U=[];let ie=T.parentElement;for(;ie&&ie!==document.documentElement;){const ce=window.getComputedStyle(ie),he=ce.overflow+ce.overflowY+ce.overflowX;(he.includes("scroll")||he.includes("auto"))&&U.push(ie),ie=ie.parentElement}return U},M=T=>{const U=T.target;bt.current&&!bt.current.contains(U)&&i(void 0)},O=[];if(bt.current){const T=p(bt.current);O.push(...T)}return O.forEach(T=>{T.addEventListener("scroll",M)}),window.addEventListener("scroll",M),document.addEventListener("scroll",M,!0),()=>{O.forEach(T=>{T.removeEventListener("scroll",M)}),window.removeEventListener("scroll",M),document.removeEventListener("scroll",M,!0)}},[r,i,bt]);const En=(Cl=ge==null?void 0:ge.current)==null?void 0:Cl.cell,qs=s.useCallback((p,M,O,T,U,ie)=>{if(Sr.current=!1,r!==void 0){const $e=_n.current;($e.x!==p.x||$e.y!==p.y)&&i(void 0)}let ce=En;ce!==void 0&&(ce=[ce[0]-N,ce[1]]);const he=Le===0?void 0:{x:0,y:p.y,width:Le,height:p.height},Ee=[];he!==void 0&&Ee.push(he),Ve>0&&(Ee.push({x:p.x-N,y:Ue-Ve,width:p.width,height:Ve}),Le>0&&Ee.push({x:0,y:Ue-Ve,width:Le,height:Ve}));const ze={x:p.x-N,y:p.y,width:p.width,height:Be&&p.y+p.height>=Ue?p.height-1:p.height,tx:U,ty:ie,extras:{selected:ce,freezeRegion:he,freezeRegions:Ee}};_n.current=ze,ol(ze),zs([M,O,T]),un==null||un(ze,ze.tx,ze.ty,ze.extras)},[En,r,N,Be,Ue,Le,Ve,i,ol,un]),js=Jn(G,s.useCallback((p,M)=>(G==null?void 0:G(p-N,M-N))!==!1,[G,N])),Zs=Jn(ae,s.useCallback((p,M)=>{ae==null||ae(p-N,M-N),oe!=="none"&&rn(ot.fromSingleSelection(M),void 0,!0)},[oe,ae,N,rn])),wi=s.useRef(!1),Js=s.useCallback(p=>{if(p.location[0]===0&&N>0){p.preventDefault();return}je==null||je({...p,location:[p.location[0]-N,p.location[1]]}),p.defaultPrevented()||(wi.current=!0),u(void 0)},[je,N]),Qs=s.useCallback(()=>{wi.current=!1},[]),cl=Ft==null?void 0:Ft.selectionBehavior,zr=s.useCallback(p=>{if(cl!=="block-spanning")return;const{isGroupHeader:M,path:O,groupRows:T}=or(p);if(M)return[p,p];const U=O[O.length-1],ie=p-U,ce=p+T-U-1;return[ie,ce]},[or,cl]),pi=s.useRef(void 0),bi=s.useCallback(p=>{var M,O,T;if(!Hs(p,pi.current)&&(pi.current=p,!(((M=Ln==null?void 0:Ln.current)==null?void 0:M.button)!==void 0&&Ln.current.button>=1))){if(p.buttons!==0&&c!==void 0&&((O=Ln.current)==null?void 0:O.location[0])===0&&N===1&&ve==="multi"&&c.previousSelection&&!c.previousSelection.rows.hasIndex(Ln.current.location[1])&&ge.rows.hasIndex(Ln.current.location[1])){const U=Math.min(Ln.current.location[1],p.location[1]),ie=Math.max(Ln.current.location[1],p.location[1])+1;fn(ot.fromSingleSelection([U,ie]),void 0,!1)}else if(p.buttons!==0&&c!==void 0&&ge.current!==void 0&&!wi.current&&!_s.current&&(Fe==="rect"||Fe==="multi-rect")){const[U,ie]=ge.current.cell;let[ce,he]=p.location;if(he<0&&(he=_n.current.y),c.fillHandle===!0&&((T=c.previousSelection)==null?void 0:T.current)!==void 0){const Ee=c.previousSelection.current.range;he=Math.min(he,Be?Ue-1:Ue);const ze=ld(Ee,ce,he,tt);rl(ze)}else{if(Be&&ie===Ue)return;if(Be&&he===Ue)if(p.kind===Zr)he--;else return;ce=Math.max(ce,N);const $e=zr(ie);he=$e===void 0?he:hn(he,$e[0],$e[1]);const it=ce-U,nt=he-ie,Qe={x:it>=0?U:ce,y:nt>=0?ie:he,width:Math.abs(it)+1,height:Math.abs(nt)+1};Pt({...ge.current,range:Qe},!0,!1,"drag")}}dn==null||dn({...p,location:[p.location[0]-N,p.location[1]]})}},[c,N,ve,ge,Fe,dn,fn,Be,Ue,tt,zr,Pt]),ea=s.useCallback(()=>{var ce,he;const p=pi.current;if(p===void 0)return;const[M,O]=p.scrollEdge;let[T,U]=p.location;const ie=_n.current;M===-1?T=((he=(ce=ie.extras)==null?void 0:ce.freezeRegion)==null?void 0:he.x)??ie.x:M===1&&(T=ie.x+ie.width),O===-1?U=Math.max(0,ie.y):O===1&&(U=Math.min(Ue-1,ie.y+ie.height)),T=hn(T,0,dt.length-1),U=hn(U,0,Ue-1),bi({...p,location:[T,U]})},[dt.length,bi,Ue]);wu(d,bt,ea);const ta=s.useCallback(p=>{if(ge.current===void 0)return;const[M,O]=p,[T,U]=ge.current.cell,ie=ge.current.range;let ce=ie.x,he=ie.x+ie.width,Ee=ie.y,ze=ie.y+ie.height;const[$e,it]=zr(U)??[0,Ue-1],nt=it+1;if(O!==0)switch(O){case 2:{ze=nt,Ee=U,Mt(0,ze,"vertical");break}case-2:{Ee=$e,ze=U+1,Mt(0,Ee,"vertical");break}case 1:{Ee<U?(Ee++,Mt(0,Ee,"vertical")):(ze=Math.min(nt,ze+1),Mt(0,ze,"vertical"));break}case-1:{ze>U+1?(ze--,Mt(0,ze,"vertical")):(Ee=Math.max($e,Ee-1),Mt(0,Ee,"vertical"));break}default:dr()}if(M!==0)if(M===2)he=dt.length,ce=T,Mt(he-1-N,0,"horizontal");else if(M===-2)ce=N,he=T+1,Mt(ce-N,0,"horizontal");else{let Qe=[];if(Ot!==void 0){const Ie=Ot({x:ce,y:Ee,width:he-ce-N,height:ze-Ee},At.current.signal);typeof Ie=="object"&&(Qe=Tu(Ie))}if(M===1){let Ie=!1;if(ce<T){if(Qe.length>0){const st=mo(ce+1,T+1).find(lt=>!Qe.includes(lt-N));st!==void 0&&(ce=st,Ie=!0)}else ce++,Ie=!0;Ie&&Mt(ce,0,"horizontal")}Ie||(he=Math.min(dt.length,he+1),Mt(he-1-N,0,"horizontal"))}else if(M===-1){let Ie=!1;if(he>T+1){if(Qe.length>0){const st=mo(he-1,T,-1).find(lt=>!Qe.includes(lt-N));st!==void 0&&(he=st,Ie=!0)}else he--,Ie=!0;Ie&&Mt(he-N,0,"horizontal")}Ie||(ce=Math.max(N,ce-1),Mt(ce-N,0,"horizontal"))}else dr()}Pt({cell:ge.current.cell,range:{x:ce,y:Ee,width:he-ce,height:ze-Ee}},!0,!1,"keyboard-select")},[Ot,zr,ge,dt.length,N,Ue,Mt,Pt]),yi=s.useRef(Ro);yi.current=Ro;const ho=s.useCallback((p,M,O,T)=>{const U=Xt-(O?0:1);p=hn(p,N,yn.length-1+N),M=hn(M,0,U);const ie=En==null?void 0:En[0],ce=En==null?void 0:En[1];if(p===ie&&M===ce)return!1;if(T&&ge.current!==void 0){const he=[...ge.current.rangeStack];(ge.current.range.width>1||ge.current.range.height>1)&&he.push(ge.current.range),Gt({...ge,current:{cell:[p,M],range:{x:p,y:M,width:1,height:1},rangeStack:he}},!0)}else Pt({cell:[p,M],range:{x:p,y:M,width:1,height:1}},!0,!1,"keyboard-nav");return h.current!==void 0&&h.current[0]===p&&h.current[1]===M&&(h.current=void 0),yi.current&&Mt(p-N,M,"both",0,20),!0},[Xt,N,yn.length,En,ge,Mt,Gt,Pt]),dl=s.useCallback((p,M)=>{var $e,it,nt,Qe;const O=v.current;y.current;let T=p;const U=(($e=m.current)==null?void 0:$e.getValue())??"",ie=((it=O==null?void 0:O.content)==null?void 0:it.kind)===te.Custom;if((O==null?void 0:O.cell)!==void 0&&U.length>0&&O.content!==void 0&&!ie){const Ie=O.content;if(Ie.kind===te.Text)T={...Ie,data:U,displayData:U};else if(Ie.kind===te.Number){const st=Number.parseFloat(U),lt=Number.isNaN(st)?0:st;T={...Ie,data:lt,displayData:lt.toLocaleString()}}else Ie.kind===te.Uri?T={...Ie,data:U,displayData:U}:Ie.kind===te.Markdown&&(T={...Ie,data:U})}else ie&&(T=p);if(T!==void 0&&U.length===0)if(T.kind===te.Text&&T.data!==T.displayData)T={...T,displayData:T.data};else if(T.kind===te.Number){const Ie=T.data!==void 0?T.data.toLocaleString():"0";T.displayData!==Ie&&(T={...T,displayData:Ie})}else T.kind===te.Uri&&T.data!==T.displayData&&(T={...T,displayData:T.data});const ce=O==null?void 0:O.content,he=()=>{if(T===void 0||ce===void 0)return!1;if(T.kind!==ce.kind)return!0;switch(T.kind){case te.Text:case te.Uri:case te.Markdown:return T.data!==ce.data;case te.Number:return T.data!==ce.data;case te.Boolean:return T.data!==ce.data;default:return!0}};(O==null?void 0:O.cell)!==void 0&&T!==void 0&&Wn(T)&&he()&&(uo([{location:O.cell,value:T}]),window.requestAnimationFrame(()=>{var Ie;(Ie=jt.current)==null||Ie.damage([{cell:O.cell}])})),(nt=m.current)==null||nt.clear(),(Qe=m.current)==null||Qe.setVisible(!1),w(!1),Zt(!0),v.current=void 0,i(void 0);const[Ee,ze]=M;if(ge.current!==void 0&&(Ee!==0||ze!==0)){const Ie=ge.current.cell[1]===Xt-1;if(Ie&&ze===1){k==null||k(p,[0,0]);return}const st=ge.current.cell[0]===dt.length-1&&p!==void 0;let lt=!0;if(Ie&&ze===1&&pe!==void 0){lt=!1;const Ze=ge.current.cell[0]+Ee,et=nr(Ze);fo(et??Ze,!1)}if(st&&Ee===1&&q!==void 0){lt=!1;const Ze=ge.current.cell[1]+ze;Fr(Ze,!1)}if(lt){const Ze=hn(ge.current.cell[0]+Ee,N,dt.length-1),et=hn(ge.current.cell[1]+ze,0,Xt-1);ho(Ze,et,Ie,!1),window.requestAnimationFrame(()=>{var Dt;(Dt=m.current)==null||Dt.focus()})}}k==null||k(p,M)},[Zt,ge,k,uo,Xt,ho,dt.length,fo,Fr,pe,q,nr,N]),na=s.useMemo(()=>`gdg-overlay-${Fu++}`,[]),ul=s.useCallback(p=>{var O,T,U,ie;Zt();const M=[];for(let ce=p.x;ce<p.x+p.width;ce++)for(let he=p.y;he<p.y+p.height;he++){const Ee=A([ce-N,he]);if(!Ee.allowOverlay&&Ee.kind!==te.Boolean)continue;let ze;if(Ee.kind===te.Custom){const $e=Rn(Ee),it=(O=$e==null?void 0:$e.provideEditor)==null?void 0:O.call($e,{...Ee,location:[ce-N,he]});($e==null?void 0:$e.onDelete)!==void 0?ze=$e.onDelete(Ee):es(it)&&(ze=(T=it==null?void 0:it.deletedValue)==null?void 0:T.call(it,Ee))}else if(Wn(Ee)&&Ee.allowOverlay||Ee.kind===te.Boolean){const $e=Rn(Ee);ze=(U=$e==null?void 0:$e.onDelete)==null?void 0:U.call($e,Ee)}ze!==void 0&&!wo(ze)&&Wn(ze)&&M.push({location:[ce,he],value:ze})}uo(M),(ie=jt.current)==null||ie.damage(M.map(ce=>({cell:ce.location})))},[Zt,A,Rn,uo,N]),oa=r!==void 0,{onKeyDown:$o}=su({state:Pr,keybindings:fe,overlayOpen:oa,columnSelect:oe,rowSelect:ve,rangeSelect:Fe,editOnType:B,trapFocus:Pn,showTrailingBlankRow:Be,columnsInLength:R.length,rowGroupingNavBehavior:hi,mapper:or,onKeyDownIn:qe,onSelectionCleared:Qt,onCellActivated:D,onDelete:xr,getCellContent:A,setSelectedColumns:rn,setSelectedRows:fn,setShowSearchInner:ht,searchInputRef:a,adjustSelection:ta,updateSelectedCell:ho,deleteRange:ul,fillDown:Ks,fillRight:Ys,appendRow:fo,getCustomNewRowTargetColumn:nr,scrollToRef:Dr}),[ra,fl]=s.useState(!1),hl=s.useRef(Jl(p=>{fl(p)},5)),{onGhostInput:ia,onGhostCompositionStart:la,onGhostCompositionEnd:sa,onGhostKeyDown:aa,onGhostKeyUp:ca,onGhostFocus:da,onGhostBlur:ua}=Iu({state:Pr,onKeyDown:$o,onFinishEditing:dl,onKeyUpIn:Pe,onCellActivated:D,setIsFocused:fl}),fa=s.useCallback((p,M)=>{const O=p.location[0]-N;if(p.kind==="header"&&(re==null||re(O,{...p,preventDefault:M})),p.kind===kn){if(O<0)return;Y==null||Y(O,{...p,preventDefault:M})}if(p.kind==="cell"){const[T,U]=p.location;me==null||me([O,U],{...p,preventDefault:M}),cc(ge,p.location)||ho(T,U,!1,!1)}},[ge,me,Y,re,N,ho]),{onCopy:gl,onPasteInternal:ml}=pu({state:Pr,keybindings:fe,getCellsForSelection:Ot,coercePasteValue:$,onPaste:ut,copyHeaders:at,columnsIn:R,onDelete:xr,deleteRange:ul,safeWindow:b}),ha=s.useCallback((p,M)=>{if(Te!==void 0){N!==0&&(p=p.map(U=>[U[0]-N,U[1]])),Te(p,M);return}if(p.length===0||M===-1)return;const[O,T]=p[M];h.current!==void 0&&h.current[0]===O&&h.current[1]===T||(h.current=[O,T],ho(O,T,!1,!1))},[Te,N,ho]),[Lr,Br]=((kl=Je==null?void 0:Je.current)==null?void 0:kl.cell)??[];s.useLayoutEffect(()=>{var p,M,O,T;yi.current&&!Sr.current&&Lr!==void 0&&Br!==void 0&&(Lr!==((M=(p=Vt.current)==null?void 0:p.current)==null?void 0:M.cell[0])||Br!==((T=(O=Vt.current)==null?void 0:O.current)==null?void 0:T.cell[1]))&&Dr.current(Lr,Br),Sr.current=!1},[Lr,Br]);const wl=ge.current!==void 0&&(ge.current.cell[0]>=dt.length||ge.current.cell[1]>=Xt);s.useLayoutEffect(()=>{wl&&Gt(Ri,!1)},[wl,Gt]);const ga=s.useMemo(()=>Be===!0&&(ue==null?void 0:ue.tint)===!0?ot.fromSingleSelection(Xt-1):ot.empty(),[Xt,Be,ue==null?void 0:ue.tint]),ma=s.useCallback(p=>typeof Oe=="boolean"?Oe:(Oe==null?void 0:Oe(p-N))??!0,[N,Oe]),wa=s.useMemo(()=>{if(gi===void 0||l.current===null)return null;const{bounds:p,group:M}=gi,O=l.current.getBoundingClientRect();return s.createElement(Zd,{bounds:p,group:M,canvasBounds:O,onClose:()=>mi(void 0),onFinish:T=>{mi(void 0),K==null||K(M,T)}})},[K,gi]),pa=Math.min(dt.length,Le+N);s.useImperativeHandle(t,()=>({appendRow:(p,M)=>fo(p+N,M),appendColumn:(p,M)=>Fr(p,M),updateCells:p=>{var M;return N!==0&&(p=p.map(O=>({cell:[O.cell[0]+N,O.cell[1]]}))),(M=jt.current)==null?void 0:M.damage(p)},getBounds:(p,M)=>{var O;if(!((l==null?void 0:l.current)===null||(bt==null?void 0:bt.current)===null)){if(p===void 0&&M===void 0){const T=l.current.getBoundingClientRect(),U=T.width/bt.current.clientWidth;return{x:T.x-bt.current.scrollLeft*U,y:T.y-bt.current.scrollTop*U,width:bt.current.scrollWidth*U,height:bt.current.scrollHeight*U}}return(O=jt.current)==null?void 0:O.getBounds((p??0)+N,M)}},focus:()=>{var p;return(p=jt.current)==null?void 0:p.focus()},emit:async p=>{switch(p){case"delete":$o({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":$o({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":$o({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await gl(void 0,!0);break;case"paste":await ml();break}},scrollTo:Mt,remeasureColumns:p=>{for(const M of p)al(M+N)},getMouseArgsForPosition:(p,M,O)=>{if((jt==null?void 0:jt.current)===null)return;const T=jt.current.getMouseArgsForPosition(p,M,O);if(T!==void 0)return{...T,location:[T.location[0]-N,T.location[1]]}}}),[fo,Fr,al,bt,gl,$o,ml,N,Mt]);const[pl,bl]=En??[],ba=s.useCallback(p=>{const[M,O]=p;if(O===-1){oe!=="none"&&(rn(ot.fromSingleSelection(M),void 0,!1),Zt());return}pl===M&&bl===O||(Pt({cell:p,range:{x:M,y:O,width:1,height:1}},!0,!1,"keyboard-nav"),Mt(M,O))},[oe,Zt,Mt,pl,bl,Pt,rn]),ya=s.useCallback(()=>{hl.current(!0),ge.current===void 0&&ge.columns.length===0&&ge.rows.length===0&&c===void 0&&Pt({cell:[N,Mr],range:{x:N,y:Mr,width:1,height:1}},!0,!1,"keyboard-select")},[Mr,ge,c,N,Pt]),Ca=s.useCallback(()=>{hl.current(!1)},[]),[ka,va]=s.useMemo(()=>{let p;const M=(mt==null?void 0:mt.scrollbarWidthOverride)??Di(),O=Ue+(Be?1:0);if(typeof xn=="number")p=er+O*xn;else{let U=0;const ie=Math.min(O,10);for(let ce=0;ce<ie;ce++)U+=xn(ce);U=Math.floor(U/ie),p=er+O*U}p+=M;const T=dt.reduce((U,ie)=>ie.width+U,0)+M;return[`${Math.min(1e5,T)}px`,`${Math.min(1e5,p)}px`]},[dt,mt==null?void 0:mt.scrollbarWidthOverride,xn,Ue,Be,er]),xa=s.useMemo(()=>ss(qt),[qt]);return s.createElement($i.Provider,{value:qt},s.createElement(hu,{style:xa,className:le,inWidth:x??ka,inHeight:H??va},s.createElement(Ud,{fillHandle:An,drawFocusRing:Eo,experimental:mt,fixedShadowX:Co,fixedShadowY:fr,getRowThemeOverride:bn,headerIcons:hr,imageWindowLoader:ko,initialSize:vo,isDraggable:xo,onDragLeave:So,onRowMoved:wn,overscrollX:Se,overscrollY:Me,preventDiagonalScrolling:gr,rightElement:ni,rightElementProps:oi,smoothScrollX:$n,smoothScrollY:ri,className:le,enableGroups:Qi,onCanvasFocused:ya,onCanvasBlur:Ca,canvasRef:l,onContextMenu:fa,theme:qt,cellXOffset:Bs,cellYOffset:Mr,accessibilityHeight:co.height,onDragEnd:Qs,columns:dt,nonGrowWidth:Ji,drawHeader:vr,onColumnProposeMove:js,drawCell:ao,disabledRows:ga,freezeColumns:pa,lockColumns:N,firstColAccessible:N===0,getCellContent:zn,minColumnWidth:lo,maxColumnWidth:Po,searchInputRef:a,showSearch:It,onSearchClose:Ht,highlightRegions:Ws,getCellsForSelection:Ot,getGroupDetails:ci,headerHeight:kr,isFocused:ra,groupHeaderHeight:Qi?z:0,groupLevels:Qo,groupHeaderHeights:el,freezeTrailingRows:Ve+(Be&&(ue==null?void 0:ue.sticky)===!0?1:0),hasAppendRow:Be,onColumnResize:Ut,onColumnResizeEnd:so,onColumnResizeStart:Yn,onCellFocused:ba,onColumnMoved:Zs,onDragStart:Js,onHeaderMenuClick:Vs,onHeaderIndicatorClick:Us,onItemHovered:bi,isFilling:(c==null?void 0:c.fillHandle)===!0,onMouseMove:Xs,onKeyDown:$o,onKeyUp:Pe,onMouseDown:$s,onMouseUp:Gs,onDragOverCell:Uo,onDrop:Tt,onSearchResultsChanged:ha,onVisibleRegionChanged:qs,clientSize:ai,rowHeight:xn,searchResults:W,searchValue:we,onSearchValueChange:ee,rows:Xt,scrollRef:bt,selection:ge,translateX:co.tx,translateY:co.ty,verticalBorder:ma,gridRef:jt,getCellRenderer:Rn,resizeIndicator:pr}),wa,r!==void 0&&s.createElement(s.Suspense,{fallback:null},s.createElement(Du,{...r,validateCell:Mn,bloom:Z,id:na,getCellRenderer:Rn,className:(mt==null?void 0:mt.isSubGrid)===!0?"click-outside-ignore":void 0,provideEditor:Tn,imageEditorOverride:C,portalElementRef:pn,onFinishEditing:dl,markdownDivCreateNode:L,isOutsideClick:wr,customEventTarget:mt==null?void 0:mt.eventTarget,isGhostMode:f}))),(()=>{const p=(pn==null?void 0:pn.current)??document.getElementById("portal");return p===null?null:Zl.createPortal(s.createElement(Eu,{ref:m,onInput:ia,onCompositionStart:la,onCompositionEnd:sa,onKeyDown:aa,onKeyUp:ca,onFocus:da,onBlur:ua}),p)})())},Pu=s.forwardRef(Au);function Vl(e){const{cell:t,posX:n,posY:o,bounds:r,theme:i}=e,{width:a,height:l,x:c,y:u}=r,d=t.maxSize??i.checkboxMaxSize,g=Math.floor(r.y+l/2),h=os(d,l,i.cellVerticalPadding),m=ns(t.contentAlign??"center",c,a,i.cellHorizontalPadding,h),f=ts(m,g,h),w=rs(c+n,u+o,f);return Wi(t)&&w}const zu={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??"false"},kind:te.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>Lu(e,e.cell.data,Wi(e.cell),e.cell.maxSize??e.theme.checkboxMaxSize,e.cell.hoverEffectIntensity??.35),onDelete:e=>({...e,data:!1}),onSelect:e=>{Vl(e)&&e.preventDefault()},onClick:e=>{if(Vl(e))return{...e.cell,data:Ui(e.cell.data)}},onPaste:(e,t)=>{let n=Yr;return e.toLowerCase()==="true"?n=!0:e.toLowerCase()==="false"?n=!1:e.toLowerCase()==="indeterminate"&&(n=Bi),n===t.data?void 0:{...t,data:n}}};function Lu(e,t,n,o,r){if(!n&&t===Yr)return;const{ctx:i,hoverAmount:a,theme:l,rect:c,highlighted:u,hoverX:d,hoverY:g,cell:{contentAlign:h}}=e,{x:m,y:f,width:w,height:y}=c;let v=!1;if(r>0){let b=n?1-r+r*a:.4;if(t===Yr&&(b*=a),b===0)return;b<1&&(v=!0,i.globalAlpha=b)}qr(i,l,t,m,f,w,y,u,d,g,o,h),v&&(i.globalAlpha=1)}const Bu=Yt("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1}),Wu=e=>{const{bubbles:t}=e,{isGhostMode:n}=s.useContext(Vo);return s.createElement(Bu,null,t.map((o,r)=>s.createElement("div",{key:r,className:"boe-bubble"},o)),s.createElement("textarea",{className:"gdg-input",autoFocus:!n}))},Ou={getAccessibilityString:e=>is(e.data),kind:te.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>{const o=t.data.reduce((r,i)=>e.measureText(i).width+r+n.bubblePadding*2+n.bubbleMargin,0);return t.data.length===0?n.cellHorizontalPadding*2:o+2*n.cellHorizontalPadding-n.bubbleMargin},draw:e=>Nu(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return s.createElement(Wu,{bubbles:t.data})},onPaste:()=>{}};function Nu(e,t){const{rect:n,theme:o,ctx:r,highlighted:i}=e,{x:a,y:l,width:c,height:u}=n;let d=a+o.cellHorizontalPadding;const g=[];for(const h of t){if(d>a+c)break;const m=yo(h,r,o.baseFontFull).width;g.push({x:d,width:m}),d+=m+o.bubblePadding*2+o.bubbleMargin}r.beginPath();for(const h of g)Fn(r,h.x,l+(u-o.bubbleHeight)/2,h.width+o.bubblePadding*2,o.bubbleHeight,o.roundingRadius??o.bubbleHeight/2);r.fillStyle=i?o.bgBubbleSelected:o.bgBubble,r.fill();for(const[h,m]of g.entries())r.beginPath(),r.fillStyle=o.textBubble,r.fillText(t[h],m.x+o.bubblePadding,l+u/2+cn(r,o))}const $u=Yt("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),Gu=e=>{const{drilldowns:t}=e;return s.createElement($u,null,t.map((n,o)=>s.createElement("div",{key:o,className:"doe-bubble"},n.img!==void 0&&s.createElement("img",{src:n.img}),s.createElement("div",null,n.text))))},Xu={getAccessibilityString:e=>is(e.data.map(t=>t.text)),kind:te.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((o,r)=>e.measureText(r.text).width+o+n.bubblePadding*2+n.bubbleMargin+(r.img!==void 0?18:0),0)+2*n.cellHorizontalPadding-4,draw:e=>Yu(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return s.createElement(Gu,{drilldowns:t.data})},onPaste:()=>{}},Ei={};function Ku(e,t,n,o){const r=Math.ceil(window.devicePixelRatio),i=5,a=n-i*2,l=4,c=n*r,u=o+i,d=o*3,g=(d+i*2)*r,h=`${e},${t},${r},${n}`;if(Ei[h]!==void 0)return{el:Ei[h],height:c,width:g,middleWidth:l*r,sideWidth:u*r,padding:i*r,dpr:r};const m=document.createElement("canvas"),f=m.getContext("2d");return f===null?null:(m.width=g,m.height=c,f.scale(r,r),Ei[h]=m,f.beginPath(),Fn(f,i,i,d,a,o),f.shadowColor="rgba(24, 25, 34, 0.4)",f.shadowBlur=1,f.fillStyle=e,f.fill(),f.shadowColor="rgba(24, 25, 34, 0.3)",f.shadowOffsetY=1,f.shadowBlur=5,f.fillStyle=e,f.fill(),f.shadowOffsetY=0,f.shadowBlur=0,f.shadowBlur=0,f.beginPath(),Fn(f,i+.5,i+.5,d,a,o),f.strokeStyle=t,f.lineWidth=1,f.stroke(),{el:m,height:c,width:g,sideWidth:u*r,middleWidth:o*r,padding:i*r,dpr:r})}function Yu(e,t){const{rect:n,theme:o,ctx:r,imageLoader:i,col:a,row:l}=e,{x:c,width:u}=n,d=o.baseFontFull,g=ps(r,d),h=Math.min(n.height,Math.max(16,Math.ceil(g*o.lineHeight)*2)),m=Math.floor(n.y+(n.height-h)/2),f=h-10,w=o.bubblePadding,y=o.bubbleMargin;let v=c+o.cellHorizontalPadding;const b=o.roundingRadius??6,C=Ku(o.bgCell,o.drilldownBorder,h,b),I=[];for(const L of t){if(v>c+u)break;const H=yo(L.text,r,d).width;let R=0;L.img!==void 0&&i.loadOrGetImage(L.img,a,l)!==void 0&&(R=f-8+4);const S=H+R+w*2;I.push({x:v,width:S}),v+=S+y}if(C!==null){const{el:L,height:x,middleWidth:H,sideWidth:R,width:S,dpr:A,padding:F}=C,D=R/A,E=F/A;for(const k of I){const $=Math.floor(k.x),_=Math.floor(k.width),se=_-(D-E)*2;r.imageSmoothingEnabled=!1,r.drawImage(L,0,0,R,x,$-E,m,D,h),se>0&&r.drawImage(L,R,0,H,x,$+(D-E),m,se,h),r.drawImage(L,S-R,0,R,x,$+_-(D-E),m,D,h),r.imageSmoothingEnabled=!0}}r.beginPath();for(const[L,x]of I.entries()){const H=t[L];let R=x.x+w;if(H.img!==void 0){const S=i.loadOrGetImage(H.img,a,l);if(S!==void 0){const A=f-8;let F=0,D=0,E=S.width,k=S.height;E>k?(F+=(E-k)/2,E=k):k>E&&(D+=(k-E)/2,k=E),r.beginPath(),Fn(r,R,m+h/2-A/2,A,A,o.roundingRadius??3),r.save(),r.clip(),r.drawImage(S,F,D,E,k,R,m+h/2-A/2,A,A),r.restore(),R+=A+4}}r.beginPath(),r.fillStyle=o.textBubble,r.fillText(H.text,R,m+h/2+cn(r,o))}}const _u={getAccessibilityString:e=>e.data.join(", "),kind:te.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>Vu(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{const{value:t,onFinishedEditing:n,imageEditorOverride:o}=e,r=o??Ka;return s.createElement(r,{urls:t.data,canWrite:t.readonly!==!0,onCancel:n,onChange:i=>{n({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();const o=e.split(",").map(r=>{try{return new URL(r),r}catch{return}}).filter(r=>r!==void 0);if(!(o.length===t.data.length&&o.every((r,i)=>r===t.data[i])))return{...t,data:o}}},Ii=4;function Vu(e,t,n,o){const{rect:r,col:i,row:a,theme:l,ctx:c,imageLoader:u}=e,{x:d,y:g,height:h,width:m}=r,f=h-l.cellVerticalPadding*2,w=[];let y=0;for(let b=0;b<t.length;b++){const C=t[b];if(C.length===0)continue;const I=u.loadOrGetImage(C,i,a);if(I!==void 0){w[b]=I;const L=I.width*(f/I.height);y+=L+Ii}}if(y===0)return;y-=Ii;let v=d+l.cellHorizontalPadding;o==="right"?v=Math.floor(d+m-l.cellHorizontalPadding-y):o==="center"&&(v=Math.floor(d+m/2-y/2));for(const b of w){if(b===void 0)continue;const C=b.width*(f/b.height);n>0&&(c.beginPath(),Fn(c,v,g+l.cellVerticalPadding,C,f,n),c.save(),c.clip()),c.drawImage(b,v,g+l.cellVerticalPadding,C,f),n>0&&c.restore(),v+=C+Ii}}function Uu(e,t){let n=e*49632+t*325176;return n^=n<<13,n^=n>>17,n^=n<<5,n/4294967295*2}const qu={getAccessibilityString:()=>"",kind:te.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{const{cell:t,col:n,row:o,ctx:r,rect:i,theme:a}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(Uu(n,o)*t.skeletonWidthVariability));const c=a.cellHorizontalPadding;l+c*2>=i.width&&(l=i.width-c*2-1);const u=t.skeletonHeight??Math.min(18,i.height-2*a.cellVerticalPadding);Fn(r,i.x+c,i.y+(i.height-u)/2,l,u,a.roundingRadius??3),r.fillStyle=no(a.textDark,.1),r.fill()},onPaste:()=>{}},ju=()=>e=>e.targetWidth,Ul=Yt("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[ju(),"px"]}}),Zu=e=>{const{value:t,onChange:n,forceEditMode:o,createNode:r,targetRect:i,onFinish:a,validatedSelection:l}=e,{isGhostMode:c}=s.useContext(Vo),u=t.data,d=t.readonly===!0,[g,h]=s.useState(u===""||o),m=s.useCallback(()=>{h(w=>!w)},[]),f=u?"gdg-ml-6":"";return g?s.createElement(Ul,{targetWidth:i.width-20},s.createElement(Gi,{autoFocus:!c,highlight:!1,validatedSelection:l,value:u,onKeyDown:w=>{w.key==="Enter"&&w.stopPropagation()},onChange:n}),s.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${f}`,onClick:()=>a(t)},s.createElement(Ba,null))):s.createElement(Ul,{targetWidth:i.width},s.createElement(_a,{contents:u,createNode:r}),!d&&s.createElement(s.Fragment,null,s.createElement("div",{className:"spacer"}),s.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${f}`,onClick:m},s.createElement(Oi,null))),s.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!c}))},Ju={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:te.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:Jr,measure:(e,t,n)=>{const o=t.data.split(`
`)[0];return e.measureText(o).width+2*n.cellHorizontalPadding},draw:e=>Bn(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{const{onChange:t,value:n,target:o,onFinishedEditing:r,markdownDivCreateNode:i,forceEditMode:a,validatedSelection:l}=e;return s.createElement(Zu,{onFinish:r,targetRect:o,value:n,validatedSelection:l,onChange:c=>t({...n,data:c.target.value}),forceEditMode:a,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},Qu={getAccessibilityString:e=>e.row.toString(),kind:zt.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:ef,measure:()=>44,draw:e=>nf(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle,e.cell.checkboxStyle,e.cell.disabled),onClick:e=>{const{bounds:t,cell:n,posX:o,posY:r}=e;if(n.disabled===!0)return;const{width:i,height:a}=t,l=n.drawHandle?7+(i-7)/2:i/2,c=a/2;if(Math.abs(o-l)<=10&&Math.abs(r-c)<=10)return{...n,checked:!n.checked}},onPaste:()=>{}};function ef(e,t){const{ctx:n,theme:o}=e,r=o.markerFontFull,i=t??{};return(i==null?void 0:i.font)!==r&&(n.font=r,i.font=r),i.deprep=tf,n.textAlign="center",i}function tf(e){const{ctx:t}=e;t.textAlign="start"}function nf(e,t,n,o,r,i,a){if(a){const{ctx:y,rect:v,theme:b}=e,{x:C,y:I,width:L,height:x}=v,H=o==="checkbox"?"checkbox-visible":o;if(H!=="number"&&(y.globalAlpha=n?1:.4,qr(y,b,n,r?C+7:C,I,r?L-7:L,x,!1,-20,-20,b.checkboxMaxSize,"center",i,!0),y.globalAlpha=1),H==="number"||H==="both"&&!n){const R=t.toString(),S=b.markerFontFull,A=C+L/2;y.fillStyle="#cccccc",y.font=S,y.fillText(R,A,I+x/2+cn(y,S))}if(r){y.globalAlpha=.4,y.beginPath();for(const R of[3,6])for(const S of[-5,-1,3])y.rect(C+R,I+x/2+S,2,2);y.fillStyle="#cccccc",y.fill(),y.beginPath(),y.globalAlpha=1}return}const{ctx:l,rect:c,hoverAmount:u,theme:d}=e,{x:g,y:h,width:m,height:f}=c,w=n?1:o==="checkbox-visible"?.6+.4*u:u;if(o!=="number"&&w>0){l.globalAlpha=w;const y=7*(n?u:1);if(qr(l,d,n,r?g+y:g,h,r?m-y:m,f,!0,void 0,void 0,d.checkboxMaxSize,"center",i,a),r){l.globalAlpha=u,l.beginPath();for(const v of[3,6])for(const b of[-5,-1,3])l.rect(g+v,h+f/2+b,2,2);l.fillStyle=d.textLight,l.fill(),l.beginPath()}l.globalAlpha=1}if(o==="number"||o==="both"&&!n){const y=t.toString(),v=d.markerFontFull,b=g+m/2;o==="both"&&u!==0&&(l.globalAlpha=1-u),l.fillStyle=d.textLight,l.font=v,l.fillText(y,b,h+f/2+cn(l,v)),u!==0&&(l.globalAlpha=1)}}const of={getAccessibilityString:()=>"",kind:zt.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>rf(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function rf(e,t,n){const{ctx:o,rect:r,hoverAmount:i,theme:a,spriteManager:l}=e,{x:c,y:u,width:d,height:g}=r;o.beginPath(),o.globalAlpha=i,o.rect(c+1,u+1,d,g-2),o.fillStyle=a.bgHeaderHovered,o.fill(),o.globalAlpha=1,o.beginPath();const h=t!=="";let m=0;if(n!==void 0){const w=g-8,y=c+8/2,v=u+8/2;l.drawSprite(n,"normal",o,y,v,w,a,h?1:i),m=w}else{m=24;const f=12,w=h?f:i*f,y=h?0:(1-i)*f*.5,v=a.cellHorizontalPadding+4;w>0&&(o.moveTo(c+v+y,u+g/2),o.lineTo(c+v+y+w,u+g/2),o.moveTo(c+v+y+w*.5,u+g/2-w*.5),o.lineTo(c+v+y+w*.5,u+g/2+w*.5),o.lineWidth=2,o.strokeStyle=a.bgIconHeader,o.lineCap="round",o.stroke())}o.fillStyle=a.textMedium,o.fillText(t,m+c+a.cellHorizontalPadding+.5,u+g/2+cn(o,a)),o.beginPath()}function As(e,t,n,o,r,i,a){e.textBaseline="alphabetic";const l=lf(e,r,o,t,(n==null?void 0:n.fullSize)??!1);e.beginPath(),Fn(e,l.x,l.y,l.width,l.height,t.roundingRadius??4),e.globalAlpha=i,e.fillStyle=(n==null?void 0:n.bgColor)??no(t.textDark,.1),e.fill(),e.globalAlpha=1,e.fillStyle=t.textDark,e.textBaseline="middle",a==null||a("text")}function lf(e,t,n,o,r){const i=o.cellHorizontalPadding,a=o.cellVerticalPadding;if(r)return{x:t.x+i/2,y:t.y+a/2+1,width:t.width-i,height:t.height-a-1};const l=yo(n,e,o.baseFontFull,"alphabetic"),c=t.height-a,u=Math.min(c,l.actualBoundingBoxAscent*2.5);return{x:t.x+i/2,y:t.y+(t.height-u)/2+1,width:l.width+i*3,height:u-1}}const sf=s.lazy(async()=>await jl(()=>import("./number-overlay-editor-DYN3leDJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url)),af={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:te.Number,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!1,useLabel:!0,drawPrep:Jr,draw:e=>{const{hoverAmount:t,cell:n,ctx:o,theme:r,rect:i,overrideCursor:a}=e,{hoverEffect:l,displayData:c,hoverEffectTheme:u}=n;l===!0&&t>0&&As(o,r,u,c,i,t,a),Bn(e,e.cell.displayData,e.cell.contentAlign)},measure:(e,t,n)=>e.measureText(t.displayData).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,onFinishedEditing:o,value:r,validatedSelection:i}=e;return s.createElement(s.Suspense,{fallback:null},s.createElement(sf,{highlight:t,disabled:r.readonly===!0,value:r.data,fixedDecimals:r.fixedDecimals,allowNegative:r.allowNegative,thousandSeparator:r.thousandSeparator,decimalSeparator:r.decimalSeparator,validatedSelection:i,onChange:a=>n({...r,data:Number.isNaN(a.floatValue??0)?0:a.floatValue}),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey?(a.preventDefault(),o(r,[0,1])):a.key==="Tab"?(a.preventDefault(),o(r,[a.shiftKey?-1:1,0])):a.key==="Escape"&&(a.preventDefault(),o(void 0,[0,0]))}}))},onPaste:(e,t,n)=>{const o=typeof n.rawValue=="number"?n.rawValue:Number.parseFloat(typeof n.rawValue=="string"?n.rawValue:e);if(!(Number.isNaN(o)||t.data===o))return{...t,data:o,displayData:n.formattedString??t.displayData}}},cf={getAccessibilityString:()=>"",measure:()=>108,kind:te.Protected,needsHover:!1,needsHoverPosition:!1,draw:df,onPaste:()=>{}};function df(e){const{ctx:t,theme:n,rect:o}=e,{x:r,y:i,height:a}=o;t.beginPath();const l=2.5;let c=r+n.cellHorizontalPadding+l;const u=i+a/2,d=Math.cos(El(30))*l,g=Math.sin(El(30))*l;for(let h=0;h<12;h++)t.moveTo(c,u-l),t.lineTo(c,u+l),t.moveTo(c+d,u-g),t.lineTo(c-d,u+g),t.moveTo(c-d,u-g),t.lineTo(c+d,u+g),c+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=n.textLight,t.stroke()}const uf={getAccessibilityString:e=>e.rowId??"",kind:zt.RowId,needsHover:!1,needsHoverPosition:!1,measure:(e,t,n)=>yo(t.rowId??"",e,n.baseFontStyle).width+n.cellHorizontalPadding*2,draw:e=>{const{ctx:t,rect:n,cell:o,theme:r}=e,i=o.rowId;if(!i)return;t.fillStyle=r.textDark,t.font=r.baseFontStyle,t.textAlign="left";const a=n.x+r.cellHorizontalPadding,l=n.y+n.height/2;t.fillText(i,a,l+cn(t,r))},onClick:()=>{},onPaste:()=>{}},ff={getAccessibilityString:e=>e.rowId??"",kind:zt.RowId,needsHover:!1,needsHoverPosition:!1,drawPrep:hf,measure:()=>80,draw:e=>mf(e,e.cell.rowId),onClick:()=>{},onPaste:()=>{}};function hf(e,t){const{ctx:n}=e,o="12px sans-serif",r=t??{};return(r==null?void 0:r.font)!==o&&(n.font=o,r.font=o),r.deprep=gf,n.textAlign="left",r}function gf(e){const{ctx:t}=e;t.textAlign="start"}function mf(e,t){if(!t)return;const{ctx:n,rect:o,theme:r}=e,{x:i,y:a,height:l}=o;n.fillStyle=r.textDark,n.font="12px sans-serif";const c=i+8,u=a+l/2;n.fillText(t,c,u+cn(n,n.font))}const wf={getAccessibilityString:e=>e.status??"",kind:zt.RowStatus,needsHover:!1,needsHoverPosition:!1,drawPrep:pf,measure:()=>40,draw:e=>yf(e,e.cell.status),onClick:()=>{},onPaste:()=>{}};function pf(e,t){const{ctx:n}=e,o="bold 14px sans-serif",r=t??{};return(r==null?void 0:r.font)!==o&&(n.font=o,r.font=o),r.deprep=bf,n.textAlign="center",r}function bf(e){const{ctx:t}=e;t.textAlign="start"}function yf(e,t){if(!t)return;const{ctx:n,rect:o}=e,{x:r,y:i,width:a,height:l}=o,c={A:"#2e7d32",U:"#f9a825",D:"#c62828"};n.fillStyle=c[t],n.font="bold 14px sans-serif";const u=r+a/2,d=i+l/2;n.fillText(t,u,d+cn(n,n.font))}const Cf={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:te.Text,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!1,drawPrep:Jr,useLabel:!0,draw:e=>{const{cell:t,hoverAmount:n,hyperWrapping:o,ctx:r,rect:i,theme:a,overrideCursor:l}=e,{displayData:c,contentAlign:u,hoverEffect:d,allowWrapping:g,hoverEffectTheme:h}=t;d===!0&&n>0&&As(r,a,h,c,i,n,l),Bn(e,c,u,g,o)},measure:(e,t,n)=>{const o=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1);let r=0;for(const i of o)r=Math.max(r,e.measureText(i).width);return r+2*n.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{const{isHighlighted:n,onChange:o,value:r,validatedSelection:i}=t;return s.createElement(Gi,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:n,autoFocus:r.readonly!==!0,disabled:r.readonly===!0,altNewline:!0,value:r.data,validatedSelection:i,onChange:a=>o({...r,data:a.target.value})})}}),onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},kf=Yt("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1}),vf=e=>{const{uri:t,onChange:n,forceEditMode:o,readonly:r,validatedSelection:i,preview:a}=e,{isGhostMode:l}=s.useContext(Vo),[c,u]=s.useState(!r&&(t===""||o)),d=s.useCallback(()=>{u(!0)},[]);return c?s.createElement(Gi,{validatedSelection:i,highlight:!0,autoFocus:!l,value:t,onChange:n}):s.createElement(kf,null,s.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},a),!r&&s.createElement("div",{className:"gdg-edit-icon",onClick:d},s.createElement(Oi,null)),s.createElement("textarea",{className:"gdg-input",autoFocus:!l}))};function Ps(e,t,n,o){let r=n.cellHorizontalPadding;const i=t.height/2-e.actualBoundingBoxAscent/2,a=e.width,l=e.actualBoundingBoxAscent;return o==="right"?r=t.width-a-n.cellHorizontalPadding:o==="center"&&(r=t.width/2-a/2),{x:r,y:i,width:a,height:l}}function ql(e){const{cell:t,bounds:n,posX:o,posY:r,theme:i}=e,a=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return!1;const l=ms(a,i.baseFontFull);if(l===void 0)return!1;const c=Ps(l,n,i,t.contentAlign);return eo({x:c.x-4,y:c.y-4,width:c.width+8,height:c.height+8},o,r)}const xf={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:te.Uri,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!0,useLabel:!0,drawPrep:Jr,draw:e=>{const{cell:t,theme:n,overrideCursor:o,hoverX:r,hoverY:i,rect:a,ctx:l}=e,c=t.displayData??t.data,u=t.hoverEffect===!0;if(o!==void 0&&u&&r!==void 0&&i!==void 0){const d=yo(c,l,n.baseFontFull),g=Ps(d,a,n,t.contentAlign),{x:h,y:m,width:f,height:w}=g;if(r>=h-4&&r<=h-4+f+8&&i>=m-4&&i<=m-4+w+8){const y=cn(l,n.baseFontFull);o("pointer");const v=5,b=m-y;l.beginPath(),l.moveTo(a.x+h,Math.floor(a.y+b+w+v)+.5),l.lineTo(a.x+h+f,Math.floor(a.y+b+w+v)+.5),l.strokeStyle=n.linkColor,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,Bn({...e,rect:{...a,x:a.x-1}},c,t.contentAlign),Bn({...e,rect:{...a,x:a.x-2}},c,t.contentAlign),Bn({...e,rect:{...a,x:a.x+1}},c,t.contentAlign),Bn({...e,rect:{...a,x:a.x+2}},c,t.contentAlign),l.restore()}}l.fillStyle=u?n.linkColor:n.textDark,Bn(e,c,t.contentAlign)},onSelect:e=>{ql(e)&&e.preventDefault()},onClick:e=>{var o;const{cell:t}=e;ql(e)&&((o=t.onClickUri)==null||o.call(t,e))},measure:(e,t,n)=>e.measureText(t.displayData??t.data).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{const{onChange:n,value:o,forceEditMode:r,validatedSelection:i}=t;return s.createElement(vf,{forceEditMode:o.readonly!==!0&&(r||e.hoverEffect===!0&&e.onClickUri!==void 0),uri:o.data,preview:o.displayData??o.data,validatedSelection:i,readonly:o.readonly===!0,onChange:a=>n({...o,data:a.target.value})})},onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},Sf=[Qu,of,wf,ff,zu,Ou,Xu,_u,qu,Ju,af,cf,uf,Cf,xf],Hi=[];class Mf extends ys{constructor(){super(...arguments);Xe(this,"imageLoaded",()=>{});Xe(this,"loadedLocations",[]);Xe(this,"cache",{});Xe(this,"sendLoaded",Fa(()=>{this.imageLoaded(new Xo(this.loadedLocations)),this.loadedLocations=[]},20));Xe(this,"clearOutOfWindow",()=>{const n=Object.keys(this.cache);for(const o of n){const r=this.cache[o];let i=!1;for(let a=0;a<r.cells.length;a++){const l=r.cells[a];if(this.isInWindow(l)){i=!0;break}}i?r.cells=r.cells.filter(this.isInWindow):(r.cancel(),delete this.cache[o])}})}setCallback(n){this.imageLoaded=n}loadImage(n,o,r,i){let a=!1;const l=Hi.pop()??new Image;let c=!1;const u={img:void 0,cells:[Cn(o,r)],url:n,cancel:()=>{c||(c=!0,Hi.length<12?Hi.unshift(l):a||(l.src=""))}},d=new Promise(g=>l.addEventListener("load",()=>g(null)));requestAnimationFrame(async()=>{try{l.src=n,await d,await l.decode();const g=this.cache[i];if(g!==void 0&&!c){g.img=l;for(const h of g.cells)this.loadedLocations.push(Yi(h));a=!0,this.sendLoaded()}}catch{u.cancel()}}),this.cache[i]=u}loadOrGetImage(n,o,r){const i=n,a=this.cache[i];if(a!==void 0){const l=Cn(o,r);return a.cells.includes(l)||a.cells.push(l),a.img}else this.loadImage(n,o,r,i)}}const Rf=(e,t)=>{const n=s.useMemo(()=>({...td,...e.headerIcons}),[e.headerIcons]),o=s.useMemo(()=>e.renderers??Sf,[e.renderers]),r=s.useMemo(()=>e.imageWindowLoader??new Mf,[e.imageWindowLoader]);return s.createElement(Pu,{...e,renderers:o,headerIcons:n,ref:t,imageWindowLoader:r})},Of=s.forwardRef(Rf);export{Of as D,te as G,Gi as a,ps as b,an as c,Wf as d,Lf as e,Pf as f,cn as g,Wn as h,zf as i,Sl as j,Vo as k,yo as m,Yo as p,Fn as r,Bf as u};
